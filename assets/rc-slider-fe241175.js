import{h as Je,g as Qe,b as q,e as J,c as z,f as te,d as dt}from"./@babel-43e769cc.js";import{r as a}from"./react-d998b26c.js";import{c as Ee}from"./classnames-325479d5.js";import{K as ee,p as ft,o as mt}from"./rc-util-6fbd7337.js";var le=a.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0});function Pe(e,c,r){return(e-c)/(r-c)}function He(e,c,r,f){var o=Pe(c,r,f),l={};switch(e){case"rtl":l.right="".concat(o*100,"%"),l.transform="translateX(50%)";break;case"btt":l.bottom="".concat(o*100,"%"),l.transform="translateY(50%)";break;case"ttb":l.top="".concat(o*100,"%"),l.transform="translateY(-50%)";break;default:l.left="".concat(o*100,"%"),l.transform="translateX(-50%)";break}return l}function me(e,c){return Array.isArray(e)?e[c]:e}var gt=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],ht=a.forwardRef(function(e,c){var r,f,o=e.prefixCls,l=e.value,v=e.valueIndex,S=e.onStartMove,h=e.style,x=e.render,k=e.dragging,g=e.onOffsetChange,m=Je(e,gt),u=a.useContext(le),i=u.min,s=u.max,n=u.direction,C=u.disabled,t=u.keyboard,b=u.range,X=u.tabIndex,w=u.ariaLabelForHandle,R=u.ariaLabelledByForHandle,L=u.ariaValueTextFormatterForHandle,A="".concat(o,"-handle"),E=function(O){C||S(O,v)},y=function(O){if(!C&&t){var $=null;switch(O.which||O.keyCode){case ee.LEFT:$=n==="ltr"||n==="btt"?-1:1;break;case ee.RIGHT:$=n==="ltr"||n==="btt"?1:-1;break;case ee.UP:$=n!=="ttb"?1:-1;break;case ee.DOWN:$=n!=="ttb"?-1:1;break;case ee.HOME:$="min";break;case ee.END:$="max";break;case ee.PAGE_UP:$=2;break;case ee.PAGE_DOWN:$=-2;break}$!==null&&(O.preventDefault(),g($,v))}},Y=He(n,l,i,s),T=a.createElement("div",Qe({ref:c,className:Ee(A,(r={},q(r,"".concat(A,"-").concat(v+1),b),q(r,"".concat(A,"-dragging"),k),r)),style:J(J({},Y),h),onMouseDown:E,onTouchStart:E,onKeyDown:y,tabIndex:C?null:me(X,v),role:"slider","aria-valuemin":i,"aria-valuemax":s,"aria-valuenow":l,"aria-disabled":C,"aria-label":me(w,v),"aria-labelledby":me(R,v),"aria-valuetext":(f=me(L,v))===null||f===void 0?void 0:f(l),"aria-orientation":n==="ltr"||n==="rtl"?"horizontal":"vertical"},m));return x&&(T=x(T,{index:v,prefixCls:o,value:l,dragging:k})),T}),bt=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],yt=a.forwardRef(function(e,c){var r=e.prefixCls,f=e.style,o=e.onStartMove,l=e.onOffsetChange,v=e.values,S=e.handleRender,h=e.draggingIndex,x=Je(e,bt),k=a.useRef({});return a.useImperativeHandle(c,function(){return{focus:function(m){var u;(u=k.current[m])===null||u===void 0||u.focus()}}}),a.createElement(a.Fragment,null,v.map(function(g,m){return a.createElement(ht,Qe({ref:function(i){i?k.current[m]=i:delete k.current[m]},dragging:h===m,prefixCls:r,style:me(f,m),key:m,value:g,valueIndex:m,onStartMove:o,onOffsetChange:l,render:S},x))}))});function qe(e){var c="touches"in e?e.touches[0]:e;return{pageX:c.pageX,pageY:c.pageY}}function Ct(e,c,r,f,o,l,v,S,h){var x=a.useState(null),k=z(x,2),g=k[0],m=k[1],u=a.useState(-1),i=z(u,2),s=i[0],n=i[1],C=a.useState(r),t=z(C,2),b=t[0],X=t[1],w=a.useState(r),R=z(w,2),L=R[0],A=R[1],E=a.useRef(null),y=a.useRef(null);a.useEffect(function(){s===-1&&X(r)},[r,s]),a.useEffect(function(){return function(){document.removeEventListener("mousemove",E.current),document.removeEventListener("mouseup",y.current),document.removeEventListener("touchmove",E.current),document.removeEventListener("touchend",y.current)}},[]);var Y=function(_,P){b.some(function(N,Q){return N!==_[Q]})&&(P!==void 0&&m(P),X(_),v(_))},T=function(_,P){if(_===-1){var N=L[0],Q=L[L.length-1],ge=f-N,he=o-Q,B=P*(o-f);B=Math.max(B,ge),B=Math.min(B,he);var ae=l(N+B);B=ae-N;var re=L.map(function(se){return se+B});Y(re)}else{var I=(o-f)*P,ne=te(b);ne[_]=L[_];var ce=h(ne,I,_,"dist");Y(ce.values,ce.value)}},U=a.useRef(T);U.current=T;var O=function(_,P){_.stopPropagation();var N=r[P];n(P),m(N),A(r);var Q=qe(_),ge=Q.pageX,he=Q.pageY,B=function(I){I.preventDefault();var ne=qe(I),ce=ne.pageX,se=ne.pageY,be=ce-ge,ye=se-he,Ce=e.current.getBoundingClientRect(),Se=Ce.width,V=Ce.height,G;switch(c){case"btt":G=-ye/V;break;case"ttb":G=ye/V;break;case"rtl":G=-be/Se;break;default:G=be/Se}U.current(P,G)},ae=function re(I){I.preventDefault(),document.removeEventListener("mouseup",re),document.removeEventListener("mousemove",B),document.removeEventListener("touchend",re),document.removeEventListener("touchmove",B),E.current=null,y.current=null,n(-1),S()};document.addEventListener("mouseup",ae),document.addEventListener("mousemove",B),document.addEventListener("touchend",ae),document.addEventListener("touchmove",B),E.current=B,y.current=ae},$=a.useMemo(function(){var K=te(r).sort(function(P,N){return P-N}),_=te(b).sort(function(P,N){return P-N});return K.every(function(P,N){return P===_[N]})?b:r},[r,b]);return[s,g,$,O]}function St(e){var c,r=e.prefixCls,f=e.style,o=e.start,l=e.end,v=e.index,S=e.onStartMove,h=a.useContext(le),x=h.direction,k=h.min,g=h.max,m=h.disabled,u=h.range,i="".concat(r,"-track"),s=Pe(o,k,g),n=Pe(l,k,g),C=function(X){!m&&S&&S(X,-1)},t={};switch(x){case"rtl":t.right="".concat(s*100,"%"),t.width="".concat(n*100-s*100,"%");break;case"btt":t.bottom="".concat(s*100,"%"),t.height="".concat(n*100-s*100,"%");break;case"ttb":t.top="".concat(s*100,"%"),t.height="".concat(n*100-s*100,"%");break;default:t.left="".concat(s*100,"%"),t.width="".concat(n*100-s*100,"%")}return a.createElement("div",{className:Ee(i,(c={},q(c,"".concat(i,"-").concat(v+1),u),q(c,"".concat(r,"-track-draggable"),S),c)),style:J(J({},t),f),onMouseDown:C,onTouchStart:C})}function Mt(e){var c=e.prefixCls,r=e.style,f=e.values,o=e.startPoint,l=e.onStartMove,v=a.useContext(le),S=v.included,h=v.range,x=v.min,k=a.useMemo(function(){if(!h){if(f.length===0)return[];var g=o??x,m=f[0];return[{start:Math.min(g,m),end:Math.max(g,m)}]}for(var u=[],i=0;i<f.length-1;i+=1)u.push({start:f[i],end:f[i+1]});return u},[f,h,o,x]);return S?k.map(function(g,m){var u=g.start,i=g.end;return a.createElement(St,{index:m,prefixCls:c,style:me(r,m),start:u,end:i,key:m,onStartMove:l})}):null}function kt(e){var c=e.prefixCls,r=e.style,f=e.children,o=e.value,l=e.onClick,v=a.useContext(le),S=v.min,h=v.max,x=v.direction,k=v.includedStart,g=v.includedEnd,m=v.included,u="".concat(c,"-text"),i=He(x,o,S,h);return a.createElement("span",{className:Ee(u,q({},"".concat(u,"-active"),m&&k<=o&&o<=g)),style:J(J({},i),r),onMouseDown:function(n){n.stopPropagation()},onClick:function(){l(o)}},f)}function Et(e){var c=e.prefixCls,r=e.marks,f=e.onClick,o="".concat(c,"-mark");return r.length?a.createElement("div",{className:o},r.map(function(l){var v=l.value,S=l.style,h=l.label;return a.createElement(kt,{key:v,prefixCls:o,style:S,value:v,onClick:f},h)})):null}function xt(e){var c=e.prefixCls,r=e.value,f=e.style,o=e.activeStyle,l=a.useContext(le),v=l.min,S=l.max,h=l.direction,x=l.included,k=l.includedStart,g=l.includedEnd,m="".concat(c,"-dot"),u=x&&k<=r&&r<=g,i=J(J({},He(h,r,v,S)),typeof f=="function"?f(r):f);return u&&(i=J(J({},i),typeof o=="function"?o(r):o)),a.createElement("span",{className:Ee(m,q({},"".concat(m,"-active"),u)),style:i})}function Rt(e){var c=e.prefixCls,r=e.marks,f=e.dots,o=e.style,l=e.activeStyle,v=a.useContext(le),S=v.min,h=v.max,x=v.step,k=a.useMemo(function(){var g=new Set;if(r.forEach(function(u){g.add(u.value)}),f&&x!==null)for(var m=S;m<=h;)g.add(m),m+=x;return Array.from(g)},[S,h,x,f,r]);return a.createElement("div",{className:"".concat(c,"-step")},k.map(function(g){return a.createElement(xt,{prefixCls:c,key:g,value:g,style:o,activeStyle:l})}))}function $t(e,c,r,f,o,l){var v=a.useCallback(function(u){var i=isFinite(u)?u:e;return i=Math.min(c,u),i=Math.max(e,i),i},[e,c]),S=a.useCallback(function(u){if(r!==null){var i=e+Math.round((v(u)-e)/r)*r,s=function(b){return(String(b).split(".")[1]||"").length},n=Math.max(s(r),s(c),s(e)),C=Number(i.toFixed(n));return e<=C&&C<=c?C:null}return null},[r,e,c,v]),h=a.useCallback(function(u){var i=v(u),s=f.map(function(t){return t.value});r!==null&&s.push(S(u)),s.push(e,c);var n=s[0],C=c-e;return s.forEach(function(t){var b=Math.abs(i-t);b<=C&&(n=t,C=b)}),n},[e,c,f,r,v,S]),x=function u(i,s,n){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof s=="number"){var t,b=i[n],X=b+s,w=[];f.forEach(function(y){w.push(y.value)}),w.push(e,c),w.push(S(b));var R=s>0?1:-1;C==="unit"?w.push(S(b+R*r)):w.push(S(X)),w=w.filter(function(y){return y!==null}).filter(function(y){return s<0?y<=b:y>=b}),C==="unit"&&(w=w.filter(function(y){return y!==b}));var L=C==="unit"?b:X;t=w[0];var A=Math.abs(t-L);if(w.forEach(function(y){var Y=Math.abs(y-L);Y<A&&(t=y,A=Y)}),t===void 0)return s<0?e:c;if(C==="dist")return t;if(Math.abs(s)>1){var E=te(i);return E[n]=t,u(E,s-R,n,C)}return t}else{if(s==="min")return e;if(s==="max")return c}},k=function(i,s,n){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",t=i[n],b=x(i,s,n,C);return{value:b,changed:b!==t}},g=function(i){return l===null&&i===0||typeof l=="number"&&i<l},m=function(i,s,n){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",t=i.map(h),b=t[n],X=x(t,s,n,C);if(t[n]=X,o===!1){var w=l||0;n>0&&t[n-1]!==b&&(t[n]=Math.max(t[n],t[n-1]+w)),n<t.length-1&&t[n+1]!==b&&(t[n]=Math.min(t[n],t[n+1]-w))}else if(typeof l=="number"||l===null){for(var R=n+1;R<t.length;R+=1)for(var L=!0;g(t[R]-t[R-1])&&L;){var A=k(t,1,R);t[R]=A.value,L=A.changed}for(var E=n;E>0;E-=1)for(var y=!0;g(t[E]-t[E-1])&&y;){var Y=k(t,-1,E-1);t[E-1]=Y.value,y=Y.changed}for(var T=t.length-1;T>0;T-=1)for(var U=!0;g(t[T]-t[T-1])&&U;){var O=k(t,-1,T-1);t[T-1]=O.value,U=O.changed}for(var $=0;$<t.length-1;$+=1)for(var K=!0;g(t[$+1]-t[$])&&K;){var _=k(t,1,$+1);t[$+1]=_.value,K=_.changed}}return{value:t[n],values:t}};return[h,m]}var Lt=a.forwardRef(function(e,c){var r,f=e.prefixCls,o=f===void 0?"rc-slider":f,l=e.className,v=e.style,S=e.disabled,h=S===void 0?!1:S,x=e.keyboard,k=x===void 0?!0:x,g=e.autoFocus,m=e.onFocus,u=e.onBlur,i=e.min,s=i===void 0?0:i,n=e.max,C=n===void 0?100:n,t=e.step,b=t===void 0?1:t,X=e.value,w=e.defaultValue,R=e.range,L=e.count,A=e.onChange,E=e.onBeforeChange,y=e.onAfterChange,Y=e.allowCross,T=Y===void 0?!0:Y,U=e.pushable,O=U===void 0?!1:U,$=e.draggableTrack,K=e.reverse,_=e.vertical,P=e.included,N=P===void 0?!0:P,Q=e.startPoint,ge=e.trackStyle,he=e.handleStyle,B=e.railStyle,ae=e.dotStyle,re=e.activeDotStyle,I=e.marks,ne=e.dots,ce=e.handleRender,se=e.tabIndex,be=se===void 0?0:se,ye=e.ariaLabelForHandle,Ce=e.ariaLabelledByForHandle,Se=e.ariaValueTextFormatterForHandle,V=a.useRef(),G=a.useRef(),xe=a.useMemo(function(){return _?K?"ttb":"btt":K?"rtl":"ltr"},[K,_]),j=a.useMemo(function(){return isFinite(s)?s:0},[s]),ve=a.useMemo(function(){return isFinite(C)?C:100},[C]),ue=a.useMemo(function(){return b!==null&&b<=0?1:b},[b]),Ve=a.useMemo(function(){return typeof O=="boolean"?O?ue:!1:O>=0?O:!1},[O,ue]),Re=a.useMemo(function(){var D=Object.keys(I||{});return D.map(function(M){var d=I[M],H={value:Number(M)};return d&&dt(d)==="object"&&!a.isValidElement(d)&&("label"in d||"style"in d)?(H.style=d.style,H.label=d.label):H.label=d,H}).filter(function(M){var d=M.label;return d||typeof d=="number"}).sort(function(M,d){return M.value-d.value})},[I]),Ze=$t(j,ve,ue,Re,T,Ve),Oe=z(Ze,2),$e=Oe[0],Ne=Oe[1],pe=ft(w,{value:X}),Te=z(pe,2),Z=Te[0],et=Te[1],W=a.useMemo(function(){var D=Z==null?[]:Array.isArray(Z)?Z:[Z],M=z(D,1),d=M[0],H=d===void 0?j:d,F=Z===null?[]:[H];if(R){if(F=te(D),L||Z===void 0){var fe=L>=0?L+1:2;for(F=F.slice(0,fe);F.length<fe;){var ie;F.push((ie=F[F.length-1])!==null&&ie!==void 0?ie:j)}}F.sort(function(p,Me){return p-Me})}return F.forEach(function(p,Me){F[Me]=$e(p)}),F},[Z,R,j,L,$e]),Fe=a.useRef(W);Fe.current=W;var oe=function(M){return R?M:M[0]},we=function(M){var d=te(M).sort(function(H,F){return H-F});A&&!mt(d,Fe.current,!0)&&A(oe(d)),et(d)},Be=function(M){if(!h){var d=0,H=ve-j;W.forEach(function(fe,ie){var p=Math.abs(M-fe);p<=H&&(H=p,d=ie)});var F=te(W);F[d]=M,R&&!W.length&&L===void 0&&F.push(M),E==null||E(oe(F)),we(F),y==null||y(oe(F))}},tt=function(M){M.preventDefault();var d=G.current.getBoundingClientRect(),H=d.width,F=d.height,fe=d.left,ie=d.top,p=d.bottom,Me=d.right,We=M.clientX,ze=M.clientY,ke;switch(xe){case"btt":ke=(p-ze)/F;break;case"ttb":ke=(ze-ie)/F;break;case"rtl":ke=(Me-We)/H;break;default:ke=(We-fe)/H}var vt=j+ke*(ve-j);Be($e(vt))},at=a.useState(null),Ae=z(at,2),De=Ae[0],Xe=Ae[1],rt=function(M,d){if(!h){var H=Ne(W,M,d);E==null||E(oe(W)),we(H.values),y==null||y(oe(H.values)),Xe(H.value)}};a.useEffect(function(){if(De!==null){var D=W.indexOf(De);D>=0&&V.current.focus(D)}Xe(null)},[De]);var nt=a.useMemo(function(){return $&&ue===null?!1:$},[$,ue]),ut=function(){y==null||y(oe(Fe.current))},ot=Ct(G,xe,W,j,ve,$e,we,ut,Ne),_e=z(ot,4),Ye=_e[0],it=_e[1],Le=_e[2],lt=_e[3],je=function(M,d){lt(M,d),E==null||E(oe(Fe.current))},Ke=Ye!==-1;a.useEffect(function(){if(!Ke){var D=W.lastIndexOf(it);V.current.focus(D)}},[Ke]);var de=a.useMemo(function(){return te(Le).sort(function(D,M){return D-M})},[Le]),ct=a.useMemo(function(){return R?[de[0],de[de.length-1]]:[j,de[0]]},[de,R,j]),Ue=z(ct,2),Ie=Ue[0],Ge=Ue[1];a.useImperativeHandle(c,function(){return{focus:function(){V.current.focus(0)},blur:function(){var M=document,d=M.activeElement;G.current.contains(d)&&(d==null||d.blur())}}}),a.useEffect(function(){g&&V.current.focus(0)},[]);var st=a.useMemo(function(){return{min:j,max:ve,direction:xe,disabled:h,keyboard:k,step:ue,included:N,includedStart:Ie,includedEnd:Ge,range:R,tabIndex:be,ariaLabelForHandle:ye,ariaLabelledByForHandle:Ce,ariaValueTextFormatterForHandle:Se}},[j,ve,xe,h,k,ue,N,Ie,Ge,R,be,ye,Ce,Se]);return a.createElement(le.Provider,{value:st},a.createElement("div",{ref:G,className:Ee(o,l,(r={},q(r,"".concat(o,"-disabled"),h),q(r,"".concat(o,"-vertical"),_),q(r,"".concat(o,"-horizontal"),!_),q(r,"".concat(o,"-with-marks"),Re.length),r)),style:v,onMouseDown:tt},a.createElement("div",{className:"".concat(o,"-rail"),style:B}),a.createElement(Mt,{prefixCls:o,style:ge,values:de,startPoint:Q,onStartMove:nt?je:null}),a.createElement(Rt,{prefixCls:o,marks:Re,dots:ne,style:ae,activeStyle:re}),a.createElement(yt,{ref:V,prefixCls:o,style:he,values:Le,draggingIndex:Ye,onStartMove:je,onOffsetChange:rt,onFocus:m,onBlur:u,handleRender:ce}),a.createElement(Et,{prefixCls:o,marks:Re,onClick:Be})))});export{Lt as S};

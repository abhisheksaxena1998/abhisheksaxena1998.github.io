import{r as e}from"./react.DlfX74Oz.js";function t(e){let t;const r=new Set,n=(e,n)=>{const c="function"==typeof e?e(t):e;if(c!==t){const e=t;t=n?c:Object.assign({},t,c),r.forEach((r=>r(t,e)))}},c=()=>t,u={setState:n,getState:c,subscribe:(e,n,u)=>n||u?((e,n=c,u=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=n(t);function o(){const r=n(t);if(!u(s,r)){const t=s;e(s=r,t)}}return r.add(o),()=>r.delete(o)})(e,n,u):(r.add(e),()=>r.delete(e)),destroy:()=>r.clear()};return t=e(n,c,u),u}const r="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?e.useEffect:e.useLayoutEffect;function n(n){const c="function"==typeof n?t(n):n,u=(t=c.getState,n=Object.is)=>{const[,u]=e.useReducer((e=>e+1),0),s=c.getState(),o=e.useRef(s),i=e.useRef(t),a=e.useRef(n),f=e.useRef(!1),d=e.useRef();let l;void 0===d.current&&(d.current=t(s));let b=!1;(o.current!==s||i.current!==t||a.current!==n||f.current)&&(l=t(s),b=!n(d.current,l)),r((()=>{b&&(d.current=l),o.current=s,i.current=t,a.current=n,f.current=!1}));const g=e.useRef(s);r((()=>{const e=()=>{try{const e=c.getState(),t=i.current(e);a.current(d.current,t)||(o.current=e,d.current=t,u())}catch(e){f.current=!0,u()}},t=c.subscribe(e);return c.getState()!==g.current&&e(),t}),[]);const S=b?l:d.current;return e.useDebugValue(S),S};return Object.assign(u,c),u[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[u,c];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},u}export{n as c};

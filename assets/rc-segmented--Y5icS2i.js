import{c as V,e as A,h as G,g as L,b as $,d as z}from"./@babel-DbNJHz-F.js";import{r as a}from"./react-gY946ZKh.js";import{c as I}from"./classnames-uKr76nPM.js";import{a as H,f as B,p as J,v as K}from"./rc-util-I-T2_Oqq.js";import{C as O}from"./rc-motion-0ib2B0_b.js";var q=function(e){return e?{left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth}:null},C=function(e){return e!==void 0?"".concat(e,"px"):void 0};function Q(t){var e=t.prefixCls,u=t.containerRef,o=t.value,v=t.getValueIndex,r=t.motionName,g=t.onMotionStart,h=t.onMotionEnd,s=t.direction,x=a.useRef(null),R=a.useState(o),S=V(R,2),b=S[0],T=S[1],y=function(m){var n,f=v(m),d=(n=u.current)===null||n===void 0?void 0:n.querySelectorAll(".".concat(e,"-item"))[f];return(d==null?void 0:d.offsetParent)&&d},k=a.useState(null),w=V(k,2),l=w[0],E=w[1],M=a.useState(null),_=V(M,2),i=_[0],N=_[1];H(function(){if(b!==o){var c=y(b),m=y(o),n=q(c),f=q(m);T(o),E(n),N(f),c&&m?g():h()}},[o]);var j=a.useMemo(function(){return C(s==="rtl"?-(l==null?void 0:l.right):l==null?void 0:l.left)},[s,l]),W=a.useMemo(function(){return C(s==="rtl"?-(i==null?void 0:i.right):i==null?void 0:i.left)},[s,i]),p=function(){return{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},X=function(){return{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},P=function(){E(null),N(null),h()};return!l||!i?null:a.createElement(O,{visible:!0,motionName:r,motionAppear:!0,onAppearStart:p,onAppearActive:X,onVisibleChanged:P},function(c,m){var n=c.className,f=c.style,d=A(A({},f),{},{"--thumb-start-left":j,"--thumb-start-width":C(l==null?void 0:l.width),"--thumb-active-left":W,"--thumb-active-width":C(i==null?void 0:i.width)}),F={ref:B(x,m),style:d,className:I("".concat(e,"-thumb"),n)};return a.createElement("div",F)})}var U=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function Y(t){if(typeof t.title<"u")return t.title;if(z(t.label)!=="object"){var e;return(e=t.label)===null||e===void 0?void 0:e.toString()}}function Z(t){return t.map(function(e){if(z(e)==="object"&&e!==null){var u=Y(e);return A(A({},e),{},{title:u})}return{label:e==null?void 0:e.toString(),title:e==null?void 0:e.toString(),value:e}})}var ee=function(e){var u=e.prefixCls,o=e.className,v=e.disabled,r=e.checked,g=e.label,h=e.title,s=e.value,x=e.onChange,R=function(b){v||x(b,s)};return a.createElement("label",{className:I(o,$({},"".concat(u,"-item-disabled"),v))},a.createElement("input",{className:"".concat(u,"-item-input"),type:"radio",disabled:v,checked:r,onChange:R}),a.createElement("div",{className:"".concat(u,"-item-label"),title:h},g))},D=a.forwardRef(function(t,e){var u,o,v=t.prefixCls,r=v===void 0?"rc-segmented":v,g=t.direction,h=t.options,s=t.disabled,x=t.defaultValue,R=t.value,S=t.onChange,b=t.className,T=b===void 0?"":b,y=t.motionName,k=y===void 0?"thumb-motion":y,w=G(t,U),l=a.useRef(null),E=a.useMemo(function(){return B(l,e)},[l,e]),M=a.useMemo(function(){return Z(h)},[h]),_=J((u=M[0])===null||u===void 0?void 0:u.value,{value:R,defaultValue:x}),i=V(_,2),N=i[0],j=i[1],W=a.useState(!1),p=V(W,2),X=p[0],P=p[1],c=function(f,d){s||(j(d),S==null||S(d))},m=K(w,["children"]);return a.createElement("div",L({},m,{className:I(r,(o={},$(o,"".concat(r,"-rtl"),g==="rtl"),$(o,"".concat(r,"-disabled"),s),o),T),ref:E}),a.createElement("div",{className:"".concat(r,"-group")},a.createElement(Q,{prefixCls:r,value:N,containerRef:l,motionName:"".concat(r,"-").concat(k),direction:g,getValueIndex:function(f){return M.findIndex(function(d){return d.value===f})},onMotionStart:function(){P(!0)},onMotionEnd:function(){P(!1)}}),M.map(function(n){return a.createElement(ee,L({},n,{key:n.value,prefixCls:r,className:I(n.className,"".concat(r,"-item"),$({},"".concat(r,"-item-selected"),n.value===N&&!X)),checked:n.value===N,onChange:c,disabled:!!s||!!n.disabled}))})))});D.displayName="Segmented";D.defaultProps={options:[]};export{D as S};

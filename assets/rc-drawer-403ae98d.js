import{g as F,e as u,c as le,b as ue}from"./@babel-43e769cc.js";import{P as be}from"./@rc-component-93a12345.js";import{e as ge,b as Ee,x as xe,K as re,a as ce}from"./rc-util-6fbd7337.js";import{r as a}from"./react-d998b26c.js";import{c as T}from"./classnames-325479d5.js";import{C as de}from"./rc-motion-1104756f.js";var ve=a.createContext(null),ye=a.createContext({}),Se=function(n){var c=n.prefixCls,h=n.className,d=n.style,v=n.children,l=n.containerRef,i=n.id,s=n.onMouseEnter,P=n.onMouseOver,f=n.onMouseLeave,L=n.onClick,E=n.onKeyDown,_=n.onKeyUp,x={onMouseEnter:s,onMouseOver:P,onMouseLeave:f,onClick:L,onKeyDown:E,onKeyUp:_},S=a.useContext(ye),k=S.panel,U=ge(k,l);return a.createElement(a.Fragment,null,a.createElement("div",F({id:i,className:T("".concat(c,"-content"),h),style:u({},d),"aria-modal":"true",role:"dialog",ref:U},x),v))};function fe(e){return typeof e=="string"&&String(Number(e))===e?(Ee(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var me={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function Re(e,n){var c,h,d,v,l=e.prefixCls,i=e.open,s=e.placement,P=e.inline,f=e.push,L=e.forceRender,E=e.autoFocus,_=e.keyboard,x=e.rootClassName,S=e.rootStyle,k=e.zIndex,U=e.className,A=e.id,$=e.style,w=e.motion,W=e.width,B=e.height,V=e.children,X=e.contentWrapperStyle,Y=e.mask,j=e.maskClosable,q=e.maskMotion,H=e.maskClassName,G=e.maskStyle,R=e.afterOpenChange,M=e.onClose,J=e.onMouseEnter,Q=e.onMouseOver,p=e.onMouseLeave,Z=e.onClick,ee=e.onKeyDown,m=e.onKeyUp,K=a.useRef(),y=a.useRef(),I=a.useRef();a.useImperativeHandle(n,function(){return K.current});var ne=function(r){var N=r.keyCode,O=r.shiftKey;switch(N){case re.TAB:{if(N===re.TAB){if(!O&&document.activeElement===I.current){var te;(te=y.current)===null||te===void 0||te.focus({preventScroll:!0})}else if(O&&document.activeElement===y.current){var oe;(oe=I.current)===null||oe===void 0||oe.focus({preventScroll:!0})}}break}case re.ESC:{M&&_&&(r.stopPropagation(),M(r));break}}};a.useEffect(function(){if(i&&E){var t;(t=K.current)===null||t===void 0||t.focus({preventScroll:!0})}},[i]);var ae=a.useState(!1),z=le(ae,2),ie=z[0],D=z[1],o=a.useContext(ve),C;f===!1?C={distance:0}:f===!0?C={}:C=f||{};var b=(c=(h=(d=C)===null||d===void 0?void 0:d.distance)!==null&&h!==void 0?h:o==null?void 0:o.pushDistance)!==null&&c!==void 0?c:180,Ce=a.useMemo(function(){return{pushDistance:b,push:function(){D(!0)},pull:function(){D(!1)}}},[b]);a.useEffect(function(){if(i){var t;o==null||(t=o.push)===null||t===void 0||t.call(o)}else{var r;o==null||(r=o.pull)===null||r===void 0||r.call(o)}},[i]),a.useEffect(function(){return function(){var t;o==null||(t=o.pull)===null||t===void 0||t.call(o)}},[]);var he=Y&&a.createElement(de,F({key:"mask"},q,{visible:i}),function(t,r){var N=t.className,O=t.style;return a.createElement("div",{className:T("".concat(l,"-mask"),N,H),style:u(u({},O),G),onClick:j&&i?M:void 0,ref:r})}),ke=typeof w=="function"?w(s):w,g={};if(ie&&b)switch(s){case"top":g.transform="translateY(".concat(b,"px)");break;case"bottom":g.transform="translateY(".concat(-b,"px)");break;case"left":g.transform="translateX(".concat(b,"px)");break;default:g.transform="translateX(".concat(-b,"px)");break}s==="left"||s==="right"?g.width=fe(W):g.height=fe(B);var we={onMouseEnter:J,onMouseOver:Q,onMouseLeave:p,onClick:Z,onKeyDown:ee,onKeyUp:m},Me=a.createElement(de,F({key:"panel"},ke,{visible:i,forceRender:L,onVisibleChanged:function(r){R==null||R(r)},removeOnLeave:!1,leavedClassName:"".concat(l,"-content-wrapper-hidden")}),function(t,r){var N=t.className,O=t.style;return a.createElement("div",F({className:T("".concat(l,"-content-wrapper"),N),style:u(u(u({},g),O),X)},xe(e,{data:!0})),a.createElement(Se,F({id:A,containerRef:r,prefixCls:l,className:U,style:$},we),V))}),se=u({},S);return k&&(se.zIndex=k),a.createElement(ve.Provider,{value:Ce},a.createElement("div",{className:T(l,"".concat(l,"-").concat(s),x,(v={},ue(v,"".concat(l,"-open"),i),ue(v,"".concat(l,"-inline"),P),v)),style:se,tabIndex:-1,ref:K,onKeyDown:ne},he,a.createElement("div",{tabIndex:0,ref:y,style:me,"aria-hidden":"true","data-sentinel":"start"}),Me,a.createElement("div",{tabIndex:0,ref:I,style:me,"aria-hidden":"true","data-sentinel":"end"})))}var Ke=a.forwardRef(Re),Ue=function(n){var c=n.open,h=c===void 0?!1:c,d=n.prefixCls,v=d===void 0?"rc-drawer":d,l=n.placement,i=l===void 0?"right":l,s=n.autoFocus,P=s===void 0?!0:s,f=n.keyboard,L=f===void 0?!0:f,E=n.width,_=E===void 0?378:E,x=n.mask,S=x===void 0?!0:x,k=n.maskClosable,U=k===void 0?!0:k,A=n.getContainer,$=n.forceRender,w=n.afterOpenChange,W=n.destroyOnClose,B=n.onMouseEnter,V=n.onMouseOver,X=n.onMouseLeave,Y=n.onClick,j=n.onKeyDown,q=n.onKeyUp,H=n.panelRef,G=a.useState(!1),R=le(G,2),M=R[0],J=R[1],Q=a.useState(!1),p=le(Q,2),Z=p[0],ee=p[1];ce(function(){ee(!0)},[]);var m=Z?h:!1,K=a.useRef(),y=a.useRef();ce(function(){m&&(y.current=document.activeElement)},[m]);var I=function(D){var o;if(J(D),w==null||w(D),!D&&y.current&&!((o=K.current)!==null&&o!==void 0&&o.contains(y.current))){var C;(C=y.current)===null||C===void 0||C.focus({preventScroll:!0})}},ne=a.useMemo(function(){return{panel:H}},[H]);if(!$&&!M&&!m&&W)return null;var ae={onMouseEnter:B,onMouseOver:V,onMouseLeave:X,onClick:Y,onKeyDown:j,onKeyUp:q},z=u(u({},n),{},{open:m,prefixCls:v,placement:i,autoFocus:P,keyboard:L,width:_,mask:S,maskClosable:U,inline:A===!1,afterOpenChange:I,ref:K},ae);return a.createElement(ye.Provider,{value:ne},a.createElement(be,{open:m||$||M,autoDestroy:!1,getContainer:A,autoLock:S&&(m||M)},a.createElement(Ke,z)))};export{Ue as D};

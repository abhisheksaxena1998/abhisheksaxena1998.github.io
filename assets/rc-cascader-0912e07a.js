import{K as le,p as Le,f as Ve}from"./rc-util-49e5c6c2.js";import{f as ee,e as ue,b as H,d as Ne,c as G,g as De,h as vn}from"./@babel-28107d12.js";import{u as fn,b as hn,B as pn}from"./rc-select-77f17186.js";import{r as l}from"./react-d998b26c.js";import{c as gn,d as Ae}from"./rc-tree-94f8176b.js";import{c as Oe}from"./classnames-325479d5.js";var me=l.createContext(null),he="__rc_cascader_search_mark__",mn=function(a,n,t){var r=t.label;return n.some(function(o){return String(o[r]).toLowerCase().includes(a.toLowerCase())})},Cn=function(a,n,t,r){return n.map(function(o){return o[r.label]}).join(" / ")};const Sn=function(e,a,n,t,r,o){var s=r.filter,i=s===void 0?mn:s,u=r.render,d=u===void 0?Cn:u,k=r.limit,f=k===void 0?50:k,h=r.sort;return l.useMemo(function(){var p=[];if(!e)return[];function C(v,g){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;v.forEach(function(P){if(!(!h&&f!==!1&&f>0&&p.length>=f)){var S=[].concat(ee(g),[P]),A=P[n.children],W=M||P.disabled;if((!A||A.length===0||o)&&i(e,S,{label:n.label})){var b;p.push(ue(ue({},P),{},(b={disabled:W},H(b,n.label,d(e,S,t,n)),H(b,he,S),H(b,n.children,void 0),b)))}A&&C(P[n.children],S,W)}})}return C(a,[]),h&&p.sort(function(v,g){return h(v[he],g[he],e,n)}),f!==!1&&f>0?p.slice(0,f):p},[e,a,n,t,d,o,i,h,f])};var Re="__RC_CASCADER_SPLIT__",We="SHOW_PARENT",He="SHOW_CHILD";function ne(e){return e.join(Re)}function pe(e){return e.map(ne)}function bn(e){return e.split(Re)}function Fe(e){var a=e||{},n=a.label,t=a.value,r=a.children,o=t||"value";return{label:n||"label",value:o,key:o,children:r||"children"}}function ke(e,a){var n,t;return(n=e.isLeaf)!==null&&n!==void 0?n:!((t=e[a.children])!==null&&t!==void 0&&t.length)}function kn(e){var a=e.parentElement;if(a){var n=e.offsetTop-a.offsetTop;n-a.scrollTop<0?a.scrollTo({top:n}):n+e.offsetHeight-a.scrollTop>a.offsetHeight&&a.scrollTo({top:n+e.offsetHeight-a.offsetHeight})}}function Be(e,a){return e.map(function(n){var t;return(t=n[he])===null||t===void 0?void 0:t.map(function(r){return r[a.value]})})}function yn(e){return Array.isArray(e)&&Array.isArray(e[0])}function xe(e){return e?yn(e)?e:(e.length===0?[]:[e]).map(function(a){return Array.isArray(a)?a:[a]}):[]}function Ue(e,a,n){var t=new Set(e),r=a();return e.filter(function(o){var s=r[o],i=s?s.parent:null,u=s?s.children:null;return s&&s.node.disabled?!0:n===He?!(u&&u.some(function(d){return d.key&&t.has(d.key)})):!(i&&!i.node.disabled&&t.has(i.key))})}function ge(e,a,n){for(var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=a,o=[],s=function(){var d,k,f,h=e[i],p=(d=r)===null||d===void 0?void 0:d.findIndex(function(v){var g=v[n.value];return t?String(g)===String(h):g===h}),C=p!==-1?(k=r)===null||k===void 0?void 0:k[p]:null;o.push({value:(f=C==null?void 0:C[n.value])!==null&&f!==void 0?f:h,index:p,option:C}),r=C==null?void 0:C[n.children]},i=0;i<e.length;i+=1)s();return o}const Vn=function(e,a,n,t,r){return l.useMemo(function(){var o=r||function(s){var i=t?s.slice(-1):s,u=" / ";return i.every(function(d){return["string","number"].includes(Ne(d))})?i.join(u):i.reduce(function(d,k,f){var h=l.isValidElement(k)?l.cloneElement(k,{key:f}):k;return f===0?[h]:[].concat(ee(d),[u,h])},[])};return e.map(function(s){var i,u,d=ge(s,a,n),k=o(d.map(function(h){var p,C=h.option,v=h.value;return(p=C==null?void 0:C[n.label])!==null&&p!==void 0?p:v}),d.map(function(h){var p=h.option;return p})),f=ne(s);return{label:k,value:f,key:f,valueCells:s,disabled:(i=d[d.length-1])===null||i===void 0||(u=i.option)===null||u===void 0?void 0:u.disabled}})},[e,a,n,r,t])};function je(e,a){return l.useCallback(function(n){var t=[],r=[];return n.forEach(function(o){var s=ge(o,e,a);s.every(function(i){return i.option})?r.push(o):t.push(o)}),[r,t]},[e,a])}const xn=function(e,a){var n=l.useRef({options:null,info:null}),t=l.useCallback(function(){return n.current.options!==e&&(n.current.options=e,n.current.info=gn(e,{fieldNames:a,initWrapper:function(o){return ue(ue({},o),{},{pathKeyEntities:{}})},processEntity:function(o,s){var i=o.nodes.map(function(u){return u[a.value]}).join(Re);s.pathKeyEntities[i]=o,o.key=i}})),n.current.info.pathKeyEntities},[a,e]);return t};function Je(e,a){var n=l.useMemo(function(){return a||[]},[a]),t=xn(n,e),r=l.useCallback(function(o){var s=t();return o.map(function(i){var u=s[i].nodes;return u.map(function(d){return d[e.value]})})},[t,e]);return[n,t,r]}function On(e){return l.useMemo(function(){if(!e)return[!1,{}];var a={matchInputWidth:!0,limit:50};return e&&Ne(e)==="object"&&(a=ue(ue({},a),e)),a.limit<=0&&delete a.limit,[!0,a]},[e])}function Xe(e,a,n,t,r,o,s,i){return function(u){if(!e)a(u);else{var d=ne(u),k=pe(n),f=pe(t),h=k.includes(d),p=r.some(function(b){return ne(b)===d}),C=n,v=r;if(p&&!h)v=r.filter(function(b){return ne(b)!==d});else{var g=h?k.filter(function(b){return b!==d}):[].concat(ee(k),[d]),M=o(),P;if(h){var S=Ae(g,{checked:!1,halfCheckedKeys:f},M);P=S.checkedKeys}else{var A=Ae(g,!0,M);P=A.checkedKeys}var W=Ue(P,o,i);C=s(W)}a([].concat(ee(v),ee(C)))}}}function qe(e,a,n,t,r){return l.useMemo(function(){var o=r(a),s=G(o,2),i=s[0],u=s[1];if(!e||!a.length)return[i,[],u];var d=pe(i),k=n(),f=Ae(d,!0,k),h=f.checkedKeys,p=f.halfCheckedKeys;return[t(h),t(p),u]},[e,a,n,t,r])}var _n=l.memo(function(e){var a=e.children;return a},function(e,a){return!a.open});function Pn(e){var a,n=e.prefixCls,t=e.checked,r=e.halfChecked,o=e.disabled,s=e.onClick,i=e.disableCheckbox,u=l.useContext(me),d=u.checkable,k=typeof d!="boolean"?d:null;return l.createElement("span",{className:Oe("".concat(n),(a={},H(a,"".concat(n,"-checked"),t),H(a,"".concat(n,"-indeterminate"),!t&&r),H(a,"".concat(n,"-disabled"),o||i),a)),onClick:s},k)}var Ge="__cascader_fix_label__";function En(e){var a=e.prefixCls,n=e.multiple,t=e.options,r=e.activeValue,o=e.prevValuePath,s=e.onToggleOpen,i=e.onSelect,u=e.onActive,d=e.checkedSet,k=e.halfCheckedSet,f=e.loadingKeys,h=e.isSelectable,p=e.searchValue,C="".concat(a,"-menu"),v="".concat(a,"-menu-item"),g=l.useContext(me),M=g.fieldNames,P=g.changeOnSelect,S=g.expandTrigger,A=g.expandIcon,W=g.loadingIcon,b=g.dropdownMenuColumnStyle,y=S==="hover",E=l.useMemo(function(){return t.map(function(c){var V,x=c.disabled,O=c.disableCheckbox,R=c[he],T=(V=c[Ge])!==null&&V!==void 0?V:c[M.label],D=c[M.value],F=ke(c,M),Y=R?R.map(function(q){return q[M.value]}):[].concat(ee(o),[D]),$=ne(Y),J=f.includes($),_=d.has($),K=k.has($);return{disabled:x,label:T,value:D,isLeaf:F,isLoading:J,checked:_,halfChecked:K,option:c,disableCheckbox:O,fullPath:Y,fullPathKey:$}})},[t,d,M,k,f,o]);return l.createElement("ul",{className:C,role:"menu"},E.map(function(c){var V,x=c.disabled,O=c.label,R=c.value,T=c.isLeaf,D=c.isLoading,F=c.checked,Y=c.halfChecked,$=c.option,J=c.fullPath,_=c.fullPathKey,K=c.disableCheckbox,q=function(){if(!(x||p)){var j=ee(J);y&&T&&j.pop(),u(j)}},te=function(){h($)&&i(J,T)},B;return typeof $.title=="string"?B=$.title:typeof O=="string"&&(B=O),l.createElement("li",{key:_,className:Oe(v,(V={},H(V,"".concat(v,"-expand"),!T),H(V,"".concat(v,"-active"),r===R||r===_),H(V,"".concat(v,"-disabled"),x),H(V,"".concat(v,"-loading"),D),V)),style:b,role:"menuitemcheckbox",title:B,"aria-checked":F,"data-path-key":_,onClick:function(){q(),!K&&(!n||T)&&te()},onDoubleClick:function(){P&&s(!1)},onMouseEnter:function(){y&&q()},onMouseDown:function(j){j.preventDefault()}},n&&l.createElement(Pn,{prefixCls:"".concat(a,"-checkbox"),checked:F,halfChecked:Y,disabled:x||K,disableCheckbox:K,onClick:function(j){K||(j.stopPropagation(),te())}}),l.createElement("div",{className:"".concat(v,"-content")},O),!D&&A&&!T&&l.createElement("div",{className:"".concat(v,"-expand-icon")},A),D&&W&&l.createElement("div",{className:"".concat(v,"-loading-icon")},W))}))}const wn=function(e,a){var n=l.useContext(me),t=n.values,r=l.useState([]),o=G(r,2),s=o[0],i=o[1];return l.useEffect(function(){if(a&&!e){var u=t[0];i(u||[])}},[a]),[s,i]},Mn=function(e,a,n,t,r,o,s){var i=s.direction,u=s.searchValue,d=s.toggleOpen,k=s.open,f=i==="rtl",h=l.useMemo(function(){for(var b=-1,y=a,E=[],c=[],V=t.length,x=Be(a,n),O=function($){var J=y.findIndex(function(_,K){return(x[K]?ne(x[K]):_[n.value])===t[$]});if(J===-1)return"break";b=J,E.push(b),c.push(t[$]),y=y[b][n.children]},R=0;R<V&&y;R+=1){var T=O(R);if(T==="break")break}for(var D=a,F=0;F<E.length-1;F+=1)D=D[E[F]][n.children];return[c,b,D,x]},[t,n,a]),p=G(h,4),C=p[0],v=p[1],g=p[2],M=p[3],P=function(y){r(y)},S=function(y){var E=g.length,c=v;c===-1&&y<0&&(c=E);for(var V=0;V<E;V+=1){c=(c+y+E)%E;var x=g[c];if(x&&!x.disabled){var O=C.slice(0,-1).concat(M[c]?ne(M[c]):x[n.value]);P(O);return}}},A=function(){if(C.length>1){var y=C.slice(0,-1);P(y)}else d(!1)},W=function(){var y,E=((y=g[v])===null||y===void 0?void 0:y[n.children])||[],c=E.find(function(x){return!x.disabled});if(c){var V=[].concat(ee(C),[c[n.value]]);P(V)}};l.useImperativeHandle(e,function(){return{onKeyDown:function(y){var E=y.which;switch(E){case le.UP:case le.DOWN:{var c=0;E===le.UP?c=-1:E===le.DOWN&&(c=1),c!==0&&S(c);break}case le.LEFT:{if(u)break;f?W():A();break}case le.RIGHT:{if(u)break;f?A():W();break}case le.BACKSPACE:{u||A();break}case le.ENTER:{if(C.length){var V=g[v],x=(V==null?void 0:V[he])||[];x.length?o(x.map(function(O){return O[n.value]}),x[x.length-1]):o(C,g[v])}break}case le.ESC:d(!1),k&&y.stopPropagation()}},onKeyUp:function(){}}})};var Ye=l.forwardRef(function(e,a){var n,t,r,o,s=e.prefixCls,i=e.multiple,u=e.searchValue,d=e.toggleOpen,k=e.notFoundContent,f=e.direction,h=e.open,p=l.useRef(),C=f==="rtl",v=l.useContext(me),g=v.options,M=v.values,P=v.halfValues,S=v.fieldNames,A=v.changeOnSelect,W=v.onSelect,b=v.searchOptions,y=v.dropdownPrefixCls,E=v.loadData,c=v.expandTrigger,V=y||s,x=l.useState([]),O=G(x,2),R=O[0],T=O[1],D=function(m){if(!(!E||u)){var I=ge(m,g,S),L=I.map(function(de){var Se=de.option;return Se}),N=L[L.length-1];if(N&&!ke(N,S)){var ae=ne(m);T(function(de){return[].concat(ee(de),[ae])}),E(L)}}};l.useEffect(function(){R.length&&R.forEach(function(w){var m=bn(w),I=ge(m,g,S,!0).map(function(N){var ae=N.option;return ae}),L=I[I.length-1];(!L||L[S.children]||ke(L,S))&&T(function(N){return N.filter(function(ae){return ae!==w})})})},[g,R,S]);var F=l.useMemo(function(){return new Set(pe(M))},[M]),Y=l.useMemo(function(){return new Set(pe(P))},[P]),$=wn(i,h),J=G($,2),_=J[0],K=J[1],q=function(m){K(m),D(m)},te=function(m){var I=m.disabled,L=ke(m,S);return!I&&(L||A||i)},B=function(m,I){var L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;W(m),!i&&(I||A&&(c==="hover"||L))&&d(!1)},U=l.useMemo(function(){return u?b:g},[u,b,g]),j=l.useMemo(function(){for(var w=[{options:U}],m=U,I=Be(m,S),L=function(){var Se=_[N],ve=m.find(function(ye,fe){return(I[fe]?ne(I[fe]):ye[S.value])===Se}),ce=ve==null?void 0:ve[S.children];if(!(ce!=null&&ce.length))return"break";m=ce,w.push({options:ce})},N=0;N<_.length;N+=1){var ae=L();if(ae==="break")break}return w},[U,_,S]),Ce=function(m,I){te(I)&&B(m,ke(I,S),!0)};Mn(a,U,S,_,q,Ce,{direction:f,searchValue:u,toggleOpen:d,open:h}),l.useEffect(function(){for(var w=0;w<_.length;w+=1){var m,I=_.slice(0,w+1),L=ne(I),N=(m=p.current)===null||m===void 0?void 0:m.querySelector('li[data-path-key="'.concat(L.replace(/\\{0,2}"/g,'\\"'),'"]'));N&&kn(N)}},[_]);var re=!((n=j[0])!==null&&n!==void 0&&(t=n.options)!==null&&t!==void 0&&t.length),z=[(r={},H(r,S.value,"__EMPTY__"),H(r,Ge,k),H(r,"disabled",!0),r)],ie=ue(ue({},e),{},{multiple:!re&&i,onSelect:B,onActive:q,onToggleOpen:d,checkedSet:F,halfCheckedSet:Y,loadingKeys:R,isSelectable:te}),oe=re?[{options:z}]:j,Q=oe.map(function(w,m){var I=_.slice(0,m),L=_[m];return l.createElement(En,De({key:m},ie,{searchValue:u,prefixCls:V,options:w.options,prevValuePath:I,activeValue:L}))});return l.createElement(_n,{open:h},l.createElement("div",{className:Oe("".concat(V,"-menus"),(o={},H(o,"".concat(V,"-menu-empty"),re),H(o,"".concat(V,"-rtl"),C),o)),ref:p},Q))}),In=l.forwardRef(function(e,a){var n=fn();return l.createElement(Ye,De({},e,n,{ref:a}))});function Ln(){}function An(e){var a,n=e,t=n.prefixCls,r=t===void 0?"rc-cascader":t,o=n.style,s=n.className,i=n.options,u=n.checkable,d=n.defaultValue,k=n.value,f=n.fieldNames,h=n.changeOnSelect,p=n.onChange,C=n.showCheckedStrategy,v=n.loadData,g=n.expandTrigger,M=n.expandIcon,P=M===void 0?">":M,S=n.loadingIcon,A=n.direction,W=n.notFoundContent,b=W===void 0?"Not Found":W,y=!!u,E=Le(d,{value:k,postState:xe}),c=G(E,2),V=c[0],x=c[1],O=l.useMemo(function(){return Fe(f)},[JSON.stringify(f)]),R=Je(O,i),T=G(R,3),D=T[0],F=T[1],Y=T[2],$=je(D,O),J=qe(y,V,F,Y,$),_=G(J,3),K=_[0],q=_[1],te=_[2],B=Ve(function(ie){if(x(ie),p){var oe=xe(ie),Q=oe.map(function(I){return ge(I,D,O).map(function(L){return L.option})}),w=y?oe:oe[0],m=y?Q:Q[0];p(w,m)}}),U=Xe(y,B,K,q,te,F,Y,C),j=Ve(function(ie){U(ie)}),Ce=l.useMemo(function(){return{options:D,fieldNames:O,values:K,halfValues:q,changeOnSelect:h,onSelect:j,checkable:u,searchOptions:[],dropdownPrefixCls:null,loadData:v,expandTrigger:g,expandIcon:P,loadingIcon:S,dropdownMenuColumnStyle:null}},[D,O,K,q,h,j,u,v,g,P,S]),re="".concat(r,"-panel"),z=!D.length;return l.createElement(me.Provider,{value:Ce},l.createElement("div",{className:Oe(re,(a={},H(a,"".concat(re,"-rtl"),A==="rtl"),H(a,"".concat(re,"-empty"),z),a),s),style:o},z?b:l.createElement(Ye,{prefixCls:r,searchValue:null,multiple:y,toggleOpen:Ln,open:!0,direction:A})))}var Dn=["id","prefixCls","fieldNames","defaultValue","value","changeOnSelect","onChange","displayRender","checkable","autoClearSearchValue","searchValue","onSearch","showSearch","expandTrigger","options","dropdownPrefixCls","loadData","popupVisible","open","popupClassName","dropdownClassName","dropdownMenuColumnStyle","popupPlacement","placement","onDropdownVisibleChange","onPopupVisibleChange","expandIcon","loadingIcon","children","dropdownMatchSelectWidth","showCheckedStrategy"],Te=l.forwardRef(function(e,a){var n=e.id,t=e.prefixCls,r=t===void 0?"rc-cascader":t,o=e.fieldNames,s=e.defaultValue,i=e.value,u=e.changeOnSelect,d=e.onChange,k=e.displayRender,f=e.checkable,h=e.autoClearSearchValue,p=h===void 0?!0:h,C=e.searchValue,v=e.onSearch,g=e.showSearch,M=e.expandTrigger,P=e.options,S=e.dropdownPrefixCls,A=e.loadData,W=e.popupVisible,b=e.open,y=e.popupClassName,E=e.dropdownClassName,c=e.dropdownMenuColumnStyle,V=e.popupPlacement,x=e.placement,O=e.onDropdownVisibleChange,R=e.onPopupVisibleChange,T=e.expandIcon,D=T===void 0?">":T,F=e.loadingIcon,Y=e.children,$=e.dropdownMatchSelectWidth,J=$===void 0?!1:$,_=e.showCheckedStrategy,K=_===void 0?We:_,q=vn(e,Dn),te=hn(n),B=!!f,U=Le(s,{value:i,postState:xe}),j=G(U,2),Ce=j[0],re=j[1],z=l.useMemo(function(){return Fe(o)},[JSON.stringify(o)]),ie=Je(z,P),oe=G(ie,3),Q=oe[0],w=oe[1],m=oe[2],I=Le("",{value:C,postState:function(X){return X||""}}),L=G(I,2),N=L[0],ae=L[1],de=function(X,se){ae(X),se.source!=="blur"&&v&&v(X)},Se=On(g),ve=G(Se,2),ce=ve[0],ye=ve[1],fe=Sn(N,Q,z,S||r,ye,u),ze=je(Q,z),Qe=qe(B,Ce,w,m,ze),_e=G(Qe,3),be=_e[0],Pe=_e[1],Ee=_e[2],Ze=l.useMemo(function(){var Z=pe(be),X=Ue(Z,w,K);return[].concat(ee(Ee),ee(m(X)))},[be,w,m,Ee,K]),en=Vn(Ze,Q,z,B,k),Ke=Ve(function(Z){if(re(Z),d){var X=xe(Z),se=X.map(function(sn){return ge(sn,Q,z).map(function(dn){return dn.option})}),Me=B?X:X[0],Ie=B?se:se[0];d(Me,Ie)}}),nn=Xe(B,Ke,be,Pe,Ee,w,m,K),we=Ve(function(Z){(!B||p)&&ae(""),nn(Z)}),an=function(X,se){if(se.type==="clear"){Ke([]);return}var Me=se.values[0],Ie=Me.valueCells;we(Ie)},tn=b!==void 0?b:W,rn=E||y,on=x||V,ln=function(X){O==null||O(X),R==null||R(X)},un=l.useMemo(function(){return{options:Q,fieldNames:z,values:be,halfValues:Pe,changeOnSelect:u,onSelect:we,checkable:f,searchOptions:fe,dropdownPrefixCls:S,loadData:A,expandTrigger:M,expandIcon:D,loadingIcon:F,dropdownMenuColumnStyle:c}},[Q,z,be,Pe,u,we,f,fe,S,A,M,D,F,c]),$e=!(N?fe:Q).length,cn=N&&ye.matchInputWidth||$e?{}:{minWidth:"auto"};return l.createElement(me.Provider,{value:un},l.createElement(pn,De({},q,{ref:a,id:te,prefixCls:r,autoClearSearchValue:p,dropdownMatchSelectWidth:J,dropdownStyle:cn,displayValues:en,onDisplayValuesChange:an,mode:B?"multiple":void 0,searchValue:N,onSearch:de,showSearch:ce,OptionList:In,emptyOptions:$e,open:tn,dropdownClassName:rn,placement:on,onDropdownVisibleChange:ln,getRawInputElement:function(){return Y}})))});Te.SHOW_PARENT=We;Te.SHOW_CHILD=He;Te.Panel=An;export{Te as C,An as P};

import{c as p,e as j,k as F,g as Y,b as V,d as z}from"./@babel.CqxtU2kl.js";import{c as W}from"./classnames.CIPFGIzL.js";import{u as G,i as B,e as J,x as K}from"./rc-util.9PQy9ck0.js";import{r}from"./react.DPZx3FLm.js";import{C as O}from"./rc-motion.cq0Hvde5.js";var q=function(e,d){if(!e)return null;var n={left:e.offsetLeft,right:e.parentElement.clientWidth-e.clientWidth-e.offsetLeft,width:e.clientWidth,top:e.offsetTop,bottom:e.parentElement.clientHeight-e.clientHeight-e.offsetTop,height:e.clientHeight};return d?{left:0,right:0,width:0,top:n.top,bottom:n.bottom,height:n.height}:{left:n.left,right:n.right,width:n.width,top:0,bottom:0,height:0}},v=function(e){return e!==void 0?"".concat(e,"px"):void 0};function Q(t){var e=t.prefixCls,d=t.containerRef,n=t.value,f=t.getValueIndex,u=t.motionName,N=t.onMotionStart,g=t.onMotionEnd,m=t.direction,S=t.vertical,c=S===void 0?!1:S,_=r.useRef(null),R=r.useState(n),C=p(R,2),w=C[0],X=C[1],M=function(h){var o,b=f(h),s=(o=d.current)===null||o===void 0?void 0:o.querySelectorAll(".".concat(e,"-item"))[b];return(s==null?void 0:s.offsetParent)&&s},H=r.useState(null),A=p(H,2),a=A[0],P=A[1],y=r.useState(null),T=p(y,2),i=T[0],x=T[1];G(function(){if(w!==n){var l=M(w),h=M(n),o=q(l,c),b=q(h,c);X(n),P(o),x(b),l&&h?N():g()}},[n]);var E=r.useMemo(function(){if(c){var l;return v((l=a==null?void 0:a.top)!==null&&l!==void 0?l:0)}return v(m==="rtl"?-(a==null?void 0:a.right):a==null?void 0:a.left)},[c,m,a]),$=r.useMemo(function(){if(c){var l;return v((l=i==null?void 0:i.top)!==null&&l!==void 0?l:0)}return v(m==="rtl"?-(i==null?void 0:i.right):i==null?void 0:i.left)},[c,m,i]),I=function(){return c?{transform:"translateY(var(--thumb-start-top))",height:"var(--thumb-start-height)"}:{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},L=function(){return c?{transform:"translateY(var(--thumb-active-top))",height:"var(--thumb-active-height)"}:{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},k=function(){P(null),x(null),g()};return!a||!i?null:r.createElement(O,{visible:!0,motionName:u,motionAppear:!0,onAppearStart:I,onAppearActive:L,onVisibleChanged:k},function(l,h){var o=l.className,b=l.style,s=j(j({},b),{},{"--thumb-start-left":E,"--thumb-start-width":v(a==null?void 0:a.width),"--thumb-active-left":$,"--thumb-active-width":v(i==null?void 0:i.width),"--thumb-start-top":E,"--thumb-start-height":v(a==null?void 0:a.height),"--thumb-active-top":$,"--thumb-active-height":v(i==null?void 0:i.height)}),D={ref:B(_,h),style:s,className:W("".concat(e,"-thumb"),o)};return r.createElement("div",D)})}var U=["prefixCls","direction","vertical","options","disabled","defaultValue","value","onChange","className","motionName"];function Z(t){if(typeof t.title<"u")return t.title;if(z(t.label)!=="object"){var e;return(e=t.label)===null||e===void 0?void 0:e.toString()}}function ee(t){return t.map(function(e){if(z(e)==="object"&&e!==null){var d=Z(e);return j(j({},e),{},{title:d})}return{label:e==null?void 0:e.toString(),title:e==null?void 0:e.toString(),value:e}})}var te=function(e){var d=e.prefixCls,n=e.className,f=e.disabled,u=e.checked,N=e.label,g=e.title,m=e.value,S=e.onChange,c=function(R){f||S(R,m)};return r.createElement("label",{className:W(n,V({},"".concat(d,"-item-disabled"),f))},r.createElement("input",{className:"".concat(d,"-item-input"),type:"radio",disabled:f,checked:u,onChange:c}),r.createElement("div",{className:"".concat(d,"-item-label"),title:g,role:"option","aria-selected":u},N))},ae=r.forwardRef(function(t,e){var d,n,f=t.prefixCls,u=f===void 0?"rc-segmented":f,N=t.direction,g=t.vertical,m=t.options,S=m===void 0?[]:m,c=t.disabled,_=t.defaultValue,R=t.value,C=t.onChange,w=t.className,X=w===void 0?"":w,M=t.motionName,H=M===void 0?"thumb-motion":M,A=F(t,U),a=r.useRef(null),P=r.useMemo(function(){return B(a,e)},[a,e]),y=r.useMemo(function(){return ee(S)},[S]),T=J((d=y[0])===null||d===void 0?void 0:d.value,{value:R,defaultValue:_}),i=p(T,2),x=i[0],E=i[1],$=r.useState(!1),I=p($,2),L=I[0],k=I[1],l=function(b,s){c||(E(s),C==null||C(s))},h=K(A,["children"]);return r.createElement("div",Y({role:"listbox","aria-label":"segmented control"},h,{className:W(u,(n={},V(n,"".concat(u,"-rtl"),N==="rtl"),V(n,"".concat(u,"-disabled"),c),V(n,"".concat(u,"-vertical"),g),n),X),ref:P}),r.createElement("div",{className:"".concat(u,"-group")},r.createElement(Q,{vertical:g,prefixCls:u,value:x,containerRef:a,motionName:"".concat(u,"-").concat(H),direction:N,getValueIndex:function(b){return y.findIndex(function(s){return s.value===b})},onMotionStart:function(){k(!0)},onMotionEnd:function(){k(!1)}}),y.map(function(o){return r.createElement(te,Y({},o,{key:o.value,prefixCls:u,className:W(o.className,"".concat(u,"-item"),V({},"".concat(u,"-item-selected"),o.value===x&&!L)),checked:o.value===x,onChange:l,disabled:!!c||!!o.disabled}))})))}),ue=ae;export{ue as T};

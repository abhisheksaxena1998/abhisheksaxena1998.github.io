import{c as y}from"./classnames-uKr76nPM.js";import{r as E,a as m}from"./react-gY946ZKh.js";import{d as ve,b as S,g as de,e as D,h as me,c as ce,f as ye}from"./@babel-Xj_bk_MP.js";import{p as Ee,v as Ce}from"./rc-util-RBoppPtV.js";function Se(e){return!!(e.addonBefore||e.addonAfter)}function Ne(e){return!!(e.prefix||e.suffix||e.allowClear)}function fe(e,n,i,d){if(i){var l=n;if(n.type==="click"){var f=e.cloneNode(!0);l=Object.create(n,{target:{value:f},currentTarget:{value:f}}),f.value="",i(l);return}if(e.type!=="file"&&d!==void 0){var c=e.cloneNode(!0);l=Object.create(n,{target:{value:c},currentTarget:{value:c}}),c.value=d,i(l);return}i(l)}}function we(e,n){if(e){e.focus(n);var i=n||{},d=i.cursor;if(d){var l=e.value.length;switch(d){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(l,l);break;default:e.setSelectionRange(0,l)}}}}var be=function(n){var i,d,l=n.inputElement,f=n.children,c=n.prefixCls,k=n.prefix,R=n.suffix,N=n.addonBefore,F=n.addonAfter,Y=n.className,Z=n.style,M=n.disabled,O=n.readOnly,ee=n.focused,L=n.triggerFocus,g=n.allowClear,W=n.value,ne=n.handleReset,w=n.hidden,u=n.classes,t=n.classNames,A=n.dataAttrs,h=n.styles,v=n.components,z=f??l,ae=(v==null?void 0:v.affixWrapper)||"span",P=(v==null?void 0:v.groupWrapper)||"span",$=(v==null?void 0:v.wrapper)||"span",s=(v==null?void 0:v.groupAddon)||"span",_=E.useRef(null),te=function(J){var Q;(Q=_.current)!==null&&Q!==void 0&&Q.contains(J.target)&&(L==null||L())},G=Ne(n),x=E.cloneElement(z,{value:W,className:y(z.props.className,!G&&(t==null?void 0:t.variant))||null});if(G){var C,j=null;if(g){var K,U=!M&&!O&&W,B="".concat(c,"-clear-icon"),oe=ve(g)==="object"&&g!==null&&g!==void 0&&g.clearIcon?g.clearIcon:"âœ–";j=m.createElement("span",{onClick:ne,onMouseDown:function(J){return J.preventDefault()},className:y(B,(K={},S(K,"".concat(B,"-hidden"),!U),S(K,"".concat(B,"-has-suffix"),!!R),K)),role:"button",tabIndex:-1},oe)}var r="".concat(c,"-affix-wrapper"),I=y(r,(C={},S(C,"".concat(c,"-disabled"),M),S(C,"".concat(r,"-disabled"),M),S(C,"".concat(r,"-focused"),ee),S(C,"".concat(r,"-readonly"),O),S(C,"".concat(r,"-input-with-clear-btn"),R&&g&&W),C),u==null?void 0:u.affixWrapper,t==null?void 0:t.affixWrapper,t==null?void 0:t.variant),H=(R||g)&&m.createElement("span",{className:y("".concat(c,"-suffix"),t==null?void 0:t.suffix),style:h==null?void 0:h.suffix},j,R);x=m.createElement(ae,de({className:I,style:h==null?void 0:h.affixWrapper,onClick:te},A==null?void 0:A.affixWrapper,{ref:_}),k&&m.createElement("span",{className:y("".concat(c,"-prefix"),t==null?void 0:t.prefix),style:h==null?void 0:h.prefix},k),x,H)}if(Se(n)){var V="".concat(c,"-group"),q="".concat(V,"-addon"),X="".concat(V,"-wrapper"),le=y("".concat(c,"-wrapper"),V,u==null?void 0:u.wrapper,t==null?void 0:t.wrapper),re=y(X,S({},"".concat(X,"-disabled"),M),u==null?void 0:u.group,t==null?void 0:t.groupWrapper);x=m.createElement(P,{className:re},m.createElement($,{className:le},N&&m.createElement(s,{className:q},N),x,F&&m.createElement(s,{className:q},F)))}return m.cloneElement(x,{className:y((i=x.props)===null||i===void 0?void 0:i.className,Y)||null,style:D(D({},(d=x.props)===null||d===void 0?void 0:d.style),Z),hidden:w})},pe=["show"];function Re(e,n){return E.useMemo(function(){var i={};n&&(i.show=ve(n)==="object"&&n.formatter?n.formatter:!!n),i=D(D({},i),e);var d=i,l=d.show,f=me(d,pe);return D(D({},f),{},{show:!!l,showFormatter:typeof l=="function"?l:void 0,strategy:f.strategy||function(c){return c.length}})},[e,n])}var Fe=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],ke=E.forwardRef(function(e,n){var i=e.autoComplete,d=e.onChange,l=e.onFocus,f=e.onBlur,c=e.onPressEnter,k=e.onKeyDown,R=e.prefixCls,N=R===void 0?"rc-input":R,F=e.disabled,Y=e.htmlSize,Z=e.className,M=e.maxLength,O=e.suffix,ee=e.showCount,L=e.count,g=e.type,W=g===void 0?"text":g,ne=e.classes,w=e.classNames,u=e.styles,t=e.onCompositionStart,A=e.onCompositionEnd,h=me(e,Fe),v=E.useState(!1),z=ce(v,2),ae=z[0],P=z[1],$=E.useRef(!1),s=E.useRef(null),_=function(a){s.current&&we(s.current,a)},te=Ee(e.defaultValue,{value:e.value}),G=ce(te,2),x=G[0],C=G[1],j=x==null?"":String(x),K=E.useState(null),U=ce(K,2),B=U[0],oe=U[1],r=Re(L,ee),I=r.max||M,H=r.strategy(j),V=!!I&&H>I;E.useImperativeHandle(n,function(){return{focus:_,blur:function(){var a;(a=s.current)===null||a===void 0||a.blur()},setSelectionRange:function(a,b,T){var p;(p=s.current)===null||p===void 0||p.setSelectionRange(a,b,T)},select:function(){var a;(a=s.current)===null||a===void 0||a.select()},input:s.current}}),E.useEffect(function(){P(function(o){return o&&F?!1:o})},[F]);var q=function(a,b,T){var p=b;if(!$.current&&r.exceedFormatter&&r.max&&r.strategy(b)>r.max){if(p=r.exceedFormatter(b,{max:r.max}),b!==p){var ue,se;oe([((ue=s.current)===null||ue===void 0?void 0:ue.selectionStart)||0,((se=s.current)===null||se===void 0?void 0:se.selectionEnd)||0])}}else if(T.source==="compositionEnd")return;C(p),s.current&&fe(s.current,a,d,p)};E.useEffect(function(){if(B){var o;(o=s.current)===null||o===void 0||o.setSelectionRange.apply(o,ye(B))}},[B]);var X=function(a){q(a,a.target.value,{source:"change"})},le=function(a){$.current=!1,q(a,a.currentTarget.value,{source:"compositionEnd"}),A==null||A(a)},re=function(a){c&&a.key==="Enter"&&c(a),k==null||k(a)},ie=function(a){P(!0),l==null||l(a)},J=function(a){P(!1),f==null||f(a)},Q=function(a){C(""),_(),s.current&&fe(s.current,a,d)},ge=V&&"".concat(N,"-out-of-range"),he=function(){var a=Ce(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames"]);return m.createElement("input",de({autoComplete:i},a,{onChange:X,onFocus:ie,onBlur:J,onKeyDown:re,className:y(N,S({},"".concat(N,"-disabled"),F),w==null?void 0:w.input),style:u==null?void 0:u.input,ref:s,size:Y,type:W,onCompositionStart:function(T){$.current=!0,t==null||t(T)},onCompositionEnd:le}))},xe=function(){var a=Number(I)>0;if(O||r.show){var b=r.showFormatter?r.showFormatter({value:j,count:H,maxLength:I}):"".concat(H).concat(a?" / ".concat(I):"");return m.createElement(m.Fragment,null,r.show&&m.createElement("span",{className:y("".concat(N,"-show-count-suffix"),S({},"".concat(N,"-show-count-has-suffix"),!!O),w==null?void 0:w.count),style:D({},u==null?void 0:u.count)},b),O)}return null};return m.createElement(be,de({},h,{prefixCls:N,className:y(Z,ge),handleReset:Q,value:j,focused:ae,triggerFocus:_,suffix:xe(),disabled:F,classes:ne,classNames:w,styles:u}),he())});export{be as B,ke as I,fe as r,we as t,Re as u};

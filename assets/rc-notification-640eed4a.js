import{c as L,g as M,b as H,e as K,f as P,h as G}from"./@babel-43e769cc.js";import{r as o,a as I}from"./react-d998b26c.js";import{r as Q}from"./react-dom-890fecd1.js";import{c as D}from"./classnames-325479d5.js";import{a as q}from"./rc-motion-1104756f.js";import{K as F}from"./rc-util-6fbd7337.js";var W=o.forwardRef(function(e,i){var m=e.prefixCls,r=e.style,u=e.className,g=e.duration,f=g===void 0?4.5:g,x=e.eventKey,k=e.content,R=e.closable,E=e.closeIcon,y=E===void 0?"x":E,h=e.props,S=e.onClick,l=e.onNoticeClose,N=e.times,A=o.useState(!1),_=L(A,2),v=_[0],d=_[1],C=function(){l(x)},$=function(n){(n.key==="Enter"||n.code==="Enter"||n.keyCode===F.ENTER)&&C()};o.useEffect(function(){if(!v&&f>0){var t=setTimeout(function(){C()},f*1e3);return function(){clearTimeout(t)}}},[f,v,N]);var c="".concat(m,"-notice");return o.createElement("div",M({},h,{ref:i,className:D(c,u,H({},"".concat(c,"-closable"),R)),style:r,onMouseEnter:function(){d(!0)},onMouseLeave:function(){d(!1)},onClick:S}),o.createElement("div",{className:"".concat(c,"-content")},k),R&&o.createElement("a",{tabIndex:0,className:"".concat(c,"-close"),onKeyDown:$,onClick:function(n){n.preventDefault(),n.stopPropagation(),C()}},y))}),O=I.createContext({}),oe=function(i){var m=i.children,r=i.classNames;return I.createElement(O.Provider,{value:{classNames:r}},m)},z=function(i){var m=i.configList,r=i.placement,u=i.prefixCls,g=i.className,f=i.style,x=i.motion,k=i.onAllNoticeRemoved,R=i.onNoticeClose,E=o.useContext(O),y=E.classNames,h=m.map(function(l){return{config:l,key:l.key}}),S=typeof x=="function"?x(r):x;return I.createElement(q,M({key:r,className:D(u,"".concat(u,"-").concat(r),y==null?void 0:y.list,g),style:f,keys:h,motionAppear:!0},S,{onAllRemoved:function(){k(r)}}),function(l,N){var A=l.config,_=l.className,v=l.style,d=A,C=d.key,$=d.times,c=A,t=c.className,n=c.style;return I.createElement(W,M({},A,{ref:N,prefixCls:u,className:D(_,t,y==null?void 0:y.notice),style:K(K({},v),n),times:$,key:C,eventKey:C,onNoticeClose:R}))})},B=o.forwardRef(function(e,i){var m=e.prefixCls,r=m===void 0?"rc-notification":m,u=e.container,g=e.motion,f=e.maxCount,x=e.className,k=e.style,R=e.onAllRemoved,E=e.renderNotifications,y=o.useState([]),h=L(y,2),S=h[0],l=h[1],N=function(n){var s,a=S.find(function(b){return b.key===n});a==null||(s=a.onClose)===null||s===void 0||s.call(a),l(function(b){return b.filter(function(p){return p.key!==n})})};o.useImperativeHandle(i,function(){return{open:function(n){l(function(s){var a=P(s),b=a.findIndex(function(j){return j.key===n.key}),p=K({},n);if(b>=0){var w;p.times=(((w=s[b])===null||w===void 0?void 0:w.times)||0)+1,a[b]=p}else p.times=0,a.push(p);return f>0&&a.length>f&&(a=a.slice(-f)),a})},close:function(n){N(n)},destroy:function(){l([])}}});var A=o.useState({}),_=L(A,2),v=_[0],d=_[1];o.useEffect(function(){var t={};S.forEach(function(n){var s=n.placement,a=s===void 0?"topRight":s;a&&(t[a]=t[a]||[],t[a].push(n))}),Object.keys(v).forEach(function(n){t[n]=t[n]||[]}),d(t)},[S]);var C=function(n){d(function(s){var a=K({},s),b=a[n]||[];return b.length||delete a[n],a})},$=o.useRef(!1);if(o.useEffect(function(){Object.keys(v).length>0?$.current=!0:$.current&&(R==null||R(),$.current=!1)},[v]),!u)return null;var c=Object.keys(v);return Q.createPortal(o.createElement(o.Fragment,null,c.map(function(t){var n=v[t],s=o.createElement(z,{key:t,configList:n,placement:t,prefixCls:r,className:x==null?void 0:x(t),style:k==null?void 0:k(t),motion:g,onNoticeClose:N,onAllNoticeRemoved:C});return E?E(s,{prefixCls:r,key:t}):s})),u)}),J=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","renderNotifications"],U=function(){return document.body},T=0;function V(){for(var e={},i=arguments.length,m=new Array(i),r=0;r<i;r++)m[r]=arguments[r];return m.forEach(function(u){u&&Object.keys(u).forEach(function(g){var f=u[g];f!==void 0&&(e[g]=f)})}),e}function ie(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.getContainer,m=i===void 0?U:i,r=e.motion,u=e.prefixCls,g=e.maxCount,f=e.className,x=e.style,k=e.onAllRemoved,R=e.renderNotifications,E=G(e,J),y=o.useState(),h=L(y,2),S=h[0],l=h[1],N=o.useRef(),A=o.createElement(B,{container:S,ref:N,prefixCls:u,motion:r,maxCount:g,className:f,style:x,onAllRemoved:k,renderNotifications:R}),_=o.useState([]),v=L(_,2),d=v[0],C=v[1],$=o.useMemo(function(){return{open:function(t){var n=V(E,t);(n.key===null||n.key===void 0)&&(n.key="rc-notification-".concat(T),T+=1),C(function(s){return[].concat(P(s),[{type:"open",config:n}])})},close:function(t){C(function(n){return[].concat(P(n),[{type:"close",key:t}])})},destroy:function(){C(function(t){return[].concat(P(t),[{type:"destroy"}])})}}},[]);return o.useEffect(function(){l(m())}),o.useEffect(function(){N.current&&d.length&&(d.forEach(function(c){switch(c.type){case"open":N.current.open(c.config);break;case"close":N.current.close(c.key);break;case"destroy":N.current.destroy();break}}),C(function(c){return c.filter(function(t){return!d.includes(t)})}))},[d]),[$,A]}export{W as N,oe as a,ie as u};

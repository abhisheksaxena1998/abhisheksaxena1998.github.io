import{g as U,e as c,c as le,b as ue}from"./@babel-Xj_bk_MP.js";import{P as ge}from"./@rc-component-lPyAtwCK.js";import{e as Ee,b as xe,x as Me,K as re,a as ce}from"./rc-util-RBoppPtV.js";import{r as a}from"./react-gY946ZKh.js";import{c as $}from"./classnames-uKr76nPM.js";import{C as de}from"./rc-motion-S_lIiSSJ.js";var fe=a.createContext(null),ye=a.createContext({}),Se=function(n){var f=n.prefixCls,C=n.className,v=n.style,u=n.children,i=n.containerRef,d=n.id,E=n.onMouseEnter,h=n.onMouseOver,x=n.onMouseLeave,_=n.onClick,M=n.onKeyDown,s=n.onKeyUp,S={onMouseEnter:E,onMouseOver:h,onMouseLeave:x,onClick:_,onKeyDown:M,onKeyUp:s},N=a.useContext(ye),k=N.panel,L=Ee(k,i);return a.createElement(a.Fragment,null,a.createElement("div",U({id:d,className:$("".concat(f,"-content"),C),style:c({},v),"aria-modal":"true",role:"dialog",ref:L},S),u))};function ve(e){return typeof e=="string"&&String(Number(e))===e?(xe(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var me={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function Ne(e,n){var f,C,v,u=e.prefixCls,i=e.open,d=e.placement,E=e.inline,h=e.push,x=e.forceRender,_=e.autoFocus,M=e.keyboard,s=e.classNames,S=e.rootClassName,N=e.rootStyle,k=e.zIndex,L=e.className,H=e.id,z=e.style,w=e.motion,X=e.width,Y=e.height,j=e.children,W=e.mask,q=e.maskClosable,G=e.maskMotion,J=e.maskClassName,T=e.maskStyle,I=e.afterOpenChange,R=e.onClose,A=e.onMouseEnter,Q=e.onMouseOver,Z=e.onMouseLeave,B=e.onClick,p=e.onKeyDown,ee=e.onKeyUp,r=e.styles,D=a.useRef(),m=a.useRef(),F=a.useRef();a.useImperativeHandle(n,function(){return D.current});var ne=function(l){var O=l.keyCode,P=l.shiftKey;switch(O){case re.TAB:{if(O===re.TAB){if(!P&&document.activeElement===F.current){var te;(te=m.current)===null||te===void 0||te.focus({preventScroll:!0})}else if(P&&document.activeElement===m.current){var oe;(oe=F.current)===null||oe===void 0||oe.focus({preventScroll:!0})}}break}case re.ESC:{R&&M&&(l.stopPropagation(),R(l));break}}};a.useEffect(function(){if(i&&_){var t;(t=D.current)===null||t===void 0||t.focus({preventScroll:!0})}},[i]);var ae=a.useState(!1),V=le(ae,2),ie=V[0],K=V[1],o=a.useContext(fe),y;h===!1?y={distance:0}:h===!0?y={}:y=h||{};var b=(f=(C=(v=y)===null||v===void 0?void 0:v.distance)!==null&&C!==void 0?C:o==null?void 0:o.pushDistance)!==null&&f!==void 0?f:180,Ce=a.useMemo(function(){return{pushDistance:b,push:function(){K(!0)},pull:function(){K(!1)}}},[b]);a.useEffect(function(){if(i){var t;o==null||(t=o.push)===null||t===void 0||t.call(o)}else{var l;o==null||(l=o.pull)===null||l===void 0||l.call(o)}},[i]),a.useEffect(function(){return function(){var t;o==null||(t=o.pull)===null||t===void 0||t.call(o)}},[]);var he=W&&a.createElement(de,U({key:"mask"},G,{visible:i}),function(t,l){var O=t.className,P=t.style;return a.createElement("div",{className:$("".concat(u,"-mask"),O,s==null?void 0:s.mask,J),style:c(c(c({},P),T),r==null?void 0:r.mask),onClick:q&&i?R:void 0,ref:l})}),ke=typeof w=="function"?w(d):w,g={};if(ie&&b)switch(d){case"top":g.transform="translateY(".concat(b,"px)");break;case"bottom":g.transform="translateY(".concat(-b,"px)");break;case"left":g.transform="translateX(".concat(b,"px)");break;default:g.transform="translateX(".concat(-b,"px)");break}d==="left"||d==="right"?g.width=ve(X):g.height=ve(Y);var we={onMouseEnter:A,onMouseOver:Q,onMouseLeave:Z,onClick:B,onKeyDown:p,onKeyUp:ee},be=a.createElement(de,U({key:"panel"},ke,{visible:i,forceRender:x,onVisibleChanged:function(l){I==null||I(l)},removeOnLeave:!1,leavedClassName:"".concat(u,"-content-wrapper-hidden")}),function(t,l){var O=t.className,P=t.style;return a.createElement("div",U({className:$("".concat(u,"-content-wrapper"),s==null?void 0:s.wrapper,O),style:c(c(c({},g),P),r==null?void 0:r.wrapper)},Me(e,{data:!0})),a.createElement(Se,U({id:H,containerRef:l,prefixCls:u,className:$(L,s==null?void 0:s.content),style:c(c({},z),r==null?void 0:r.content)},we),j))}),se=c({},N);return k&&(se.zIndex=k),a.createElement(fe.Provider,{value:Ce},a.createElement("div",{className:$(u,"".concat(u,"-").concat(d),S,ue(ue({},"".concat(u,"-open"),i),"".concat(u,"-inline"),E)),style:se,tabIndex:-1,ref:D,onKeyDown:ne},he,a.createElement("div",{tabIndex:0,ref:m,style:me,"aria-hidden":"true","data-sentinel":"start"}),be,a.createElement("div",{tabIndex:0,ref:F,style:me,"aria-hidden":"true","data-sentinel":"end"})))}var Re=a.forwardRef(Ne),Ie=function(n){var f=n.open,C=f===void 0?!1:f,v=n.prefixCls,u=v===void 0?"rc-drawer":v,i=n.placement,d=i===void 0?"right":i,E=n.autoFocus,h=E===void 0?!0:E,x=n.keyboard,_=x===void 0?!0:x,M=n.width,s=M===void 0?378:M,S=n.mask,N=S===void 0?!0:S,k=n.maskClosable,L=k===void 0?!0:k,H=n.getContainer,z=n.forceRender,w=n.afterOpenChange,X=n.destroyOnClose,Y=n.onMouseEnter,j=n.onMouseOver,W=n.onMouseLeave,q=n.onClick,G=n.onKeyDown,J=n.onKeyUp,T=n.panelRef,I=a.useState(!1),R=le(I,2),A=R[0],Q=R[1],Z=a.useState(!1),B=le(Z,2),p=B[0],ee=B[1];ce(function(){ee(!0)},[]);var r=p?C:!1,D=a.useRef(),m=a.useRef();ce(function(){r&&(m.current=document.activeElement)},[r]);var F=function(K){var o;if(Q(K),w==null||w(K),!K&&m.current&&!((o=D.current)!==null&&o!==void 0&&o.contains(m.current))){var y;(y=m.current)===null||y===void 0||y.focus({preventScroll:!0})}},ne=a.useMemo(function(){return{panel:T}},[T]);if(!z&&!A&&!r&&X)return null;var ae={onMouseEnter:Y,onMouseOver:j,onMouseLeave:W,onClick:q,onKeyDown:G,onKeyUp:J},V=c(c({},n),{},{open:r,prefixCls:u,placement:d,autoFocus:h,keyboard:_,width:s,mask:N,maskClosable:L,inline:H===!1,afterOpenChange:F,ref:D},ae);return a.createElement(ye.Provider,{value:ne},a.createElement(ge,{open:r||z||A,autoDestroy:!1,getContainer:H,autoLock:N&&(r||A)},a.createElement(Re,V)))};export{Ie as D};

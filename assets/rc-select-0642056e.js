import{r as t,a as bn}from"./react-d998b26c.js";import{w as lt,f as ct,x as sn,K as E,b as st,m as dt,e as ft,a as vt,p as wn,q as mt,v as pt,c as gt,A as ht}from"./rc-util-97a39b52.js";import{c as Be}from"./classnames-325479d5.js";import{d as dn,c as te,e as J,b as ne,g as Fe,h as Je,n as bt,f as Ee}from"./@babel-28107d12.js";import{F as St}from"./rc-overflow-145e1866.js";import{c as wt}from"./@rc-component-420a2024.js";import{L as Ct}from"./rc-virtual-list-a53ac715.js";var fn=function(e){var o=e.className,a=e.customizeIcon,i=e.customizeIconProps,r=e.onMouseDown,s=e.onClick,d=e.children,f;return typeof a=="function"?f=a(i):f=a,t.createElement("span",{className:o,onMouseDown:function(S){S.preventDefault(),r&&r(S)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:s,"aria-hidden":!0},f!==void 0?f:t.createElement("span",{className:Be(o.split(/\s+/).map(function(h){return"".concat(h,"-icon")}))},d))};function yt(n,e,o,a,i){var r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,s=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0,f=bn.useMemo(function(){if(dn(a)==="object")return a.clearIcon;if(i)return i},[a,i]),h=bn.useMemo(function(){return!!(!r&&a&&(o.length||s)&&!(d==="combobox"&&s===""))},[a,r,o.length,s,d]);return{allowClear:h,clearIcon:bn.createElement(fn,{className:"".concat(n,"-clear"),onMouseDown:e,customizeIcon:f},"×")}}var Fn=t.createContext(null);function It(){return t.useContext(Fn)}function Et(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=t.useState(!1),o=te(e,2),a=o[0],i=o[1],r=t.useRef(null),s=function(){window.clearTimeout(r.current)};t.useEffect(function(){return s},[]);var d=function(h,S){s(),r.current=window.setTimeout(function(){i(h),S&&S()},n)};return[a,d,s]}function kn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=t.useRef(null),o=t.useRef(null);t.useEffect(function(){return function(){window.clearTimeout(o.current)}},[]);function a(i){(i||e.current===null)&&(e.current=i),window.clearTimeout(o.current),o.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},a]}function Rt(n,e,o,a){var i=t.useRef(null);i.current={open:e,triggerOpen:o,customizedTrigger:a},t.useEffect(function(){function r(s){var d;if(!((d=i.current)!==null&&d!==void 0&&d.customizedTrigger)){var f=s.target;f.shadowRoot&&s.composed&&(f=s.composedPath()[0]||f),i.current.open&&n().filter(function(h){return h}).every(function(h){return!h.contains(f)&&h!==f})&&i.current.triggerOpen(!1)}}return window.addEventListener("mousedown",r),function(){return window.removeEventListener("mousedown",r)}},[])}var Dt=function(e,o){var a,i=e.prefixCls,r=e.id,s=e.inputElement,d=e.disabled,f=e.tabIndex,h=e.autoFocus,S=e.autoComplete,c=e.editable,R=e.activeDescendantId,u=e.value,w=e.maxLength,x=e.onKeyDown,G=e.onMouseDown,P=e.onChange,T=e.onPaste,A=e.onCompositionStart,Z=e.onCompositionEnd,W=e.open,X=e.attrs,Y=s||t.createElement("input",null),q=Y,ae=q.ref,L=q.props,K=L.onKeyDown,H=L.onChange,oe=L.onMouseDown,N=L.onCompositionStart,U=L.onCompositionEnd,_=L.style;return lt(!("maxLength"in Y.props)),Y=t.cloneElement(Y,J(J(J({type:"search"},L),{},{id:r,ref:ct(o,ae),disabled:d,tabIndex:f,autoComplete:S||"off",autoFocus:h,className:Be("".concat(i,"-selection-search-input"),(a=Y)===null||a===void 0||(a=a.props)===null||a===void 0?void 0:a.className),role:"combobox","aria-expanded":W||!1,"aria-haspopup":"listbox","aria-owns":"".concat(r,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(r,"_list"),"aria-activedescendant":W?R:void 0},X),{},{value:c?u:"",maxLength:w,readOnly:!c,unselectable:c?null:"on",style:J(J({},_),{},{opacity:c?null:0}),onKeyDown:function(p){x(p),K&&K(p)},onMouseDown:function(p){G(p),oe&&oe(p)},onChange:function(p){P(p),H&&H(p)},onCompositionStart:function(p){A(p),N&&N(p)},onCompositionEnd:function(p){Z(p),U&&U(p)},onPaste:T})),Y},In=t.forwardRef(Dt);In.displayName="Input";function Kn(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var Ot=typeof window<"u"&&window.document&&window.document.documentElement,Mt=Ot;function xt(n){return n!=null}function Pt(n){return!n&&n!==0}function Nn(n){return["string","number"].includes(dn(n))}function $n(n){var e=void 0;return n&&(Nn(n.title)?e=n.title.toString():Nn(n.label)&&(e=n.label.toString())),e}function Nt(n,e){Mt?t.useLayoutEffect(n,e):t.useEffect(n,e)}function Vt(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var Vn=function(e){e.preventDefault(),e.stopPropagation()},Tt=function(e){var o=e.id,a=e.prefixCls,i=e.values,r=e.open,s=e.searchValue,d=e.autoClearSearchValue,f=e.inputRef,h=e.placeholder,S=e.disabled,c=e.mode,R=e.showSearch,u=e.autoFocus,w=e.autoComplete,x=e.activeDescendantId,G=e.tabIndex,P=e.removeIcon,T=e.maxTagCount,A=e.maxTagTextLength,Z=e.maxTagPlaceholder,W=Z===void 0?function(C){return"+ ".concat(C.length," ...")}:Z,X=e.tagRender,Y=e.onToggleOpen,q=e.onRemove,ae=e.onInputChange,L=e.onInputPaste,K=e.onInputKeyDown,H=e.onInputMouseDown,oe=e.onInputCompositionStart,N=e.onInputCompositionEnd,U=t.useRef(null),_=t.useState(0),D=te(_,2),p=D[0],le=D[1],Ce=t.useState(!1),ye=te(Ce,2),ce=ye[0],he=ye[1],fe="".concat(a,"-selection"),z=r||c==="multiple"&&d===!1||c==="tags"?s:"",Ve=c==="tags"||c==="multiple"&&d===!1||R&&(r||ce);Nt(function(){le(U.current.scrollWidth)},[z]);function Oe(C,V,j,se,ie){return t.createElement("span",{className:Be("".concat(fe,"-item"),ne({},"".concat(fe,"-item-disabled"),j)),title:$n(C)},t.createElement("span",{className:"".concat(fe,"-item-content")},V),se&&t.createElement(fn,{className:"".concat(fe,"-item-remove"),onMouseDown:Vn,onClick:ie,customizeIcon:P},"×"))}function I(C,V,j,se,ie){var Ie=function(ve){Vn(ve),Y(!r)};return t.createElement("span",{onMouseDown:Ie},X({label:V,value:C,disabled:j,closable:se,onClose:ie}))}function v(C){var V=C.disabled,j=C.label,se=C.value,ie=!S&&!V,Ie=j;if(typeof A=="number"&&(typeof j=="string"||typeof j=="number")){var re=String(Ie);re.length>A&&(Ie="".concat(re.slice(0,A),"..."))}var ve=function(Q){Q&&Q.stopPropagation(),q(C)};return typeof X=="function"?I(se,Ie,V,ie,ve):Oe(C,Ie,V,ie,ve)}function O(C){var V=typeof W=="function"?W(C):W;return Oe({title:V},V,!1)}var F=t.createElement("div",{className:"".concat(fe,"-search"),style:{width:p},onFocus:function(){he(!0)},onBlur:function(){he(!1)}},t.createElement(In,{ref:f,open:r,prefixCls:a,id:o,inputElement:null,disabled:S,autoFocus:u,autoComplete:w,editable:Ve,activeDescendantId:x,value:z,onKeyDown:K,onMouseDown:H,onChange:ae,onPaste:L,onCompositionStart:oe,onCompositionEnd:N,tabIndex:G,attrs:sn(e,!0)}),t.createElement("span",{ref:U,className:"".concat(fe,"-search-mirror"),"aria-hidden":!0},z," ")),k=t.createElement(St,{prefixCls:"".concat(fe,"-overflow"),data:i,renderItem:v,renderRest:O,suffix:F,itemKey:Vt,maxCount:T});return t.createElement(t.Fragment,null,k,!i.length&&!z&&t.createElement("span",{className:"".concat(fe,"-placeholder")},h))},Lt=function(e){var o=e.inputElement,a=e.prefixCls,i=e.id,r=e.inputRef,s=e.disabled,d=e.autoFocus,f=e.autoComplete,h=e.activeDescendantId,S=e.mode,c=e.open,R=e.values,u=e.placeholder,w=e.tabIndex,x=e.showSearch,G=e.searchValue,P=e.activeValue,T=e.maxLength,A=e.onInputKeyDown,Z=e.onInputMouseDown,W=e.onInputChange,X=e.onInputPaste,Y=e.onInputCompositionStart,q=e.onInputCompositionEnd,ae=e.title,L=t.useState(!1),K=te(L,2),H=K[0],oe=K[1],N=S==="combobox",U=N||x,_=R[0],D=G||"";N&&P&&!H&&(D=P),t.useEffect(function(){N&&oe(!1)},[N,P]);var p=S!=="combobox"&&!c&&!x?!1:!!D,le=ae===void 0?$n(_):ae,Ce=function(){if(_)return null;var ce=p?{visibility:"hidden"}:void 0;return t.createElement("span",{className:"".concat(a,"-selection-placeholder"),style:ce},u)};return t.createElement(t.Fragment,null,t.createElement("span",{className:"".concat(a,"-selection-search")},t.createElement(In,{ref:r,prefixCls:a,id:i,open:c,inputElement:o,disabled:s,autoFocus:d,autoComplete:f,editable:U,activeDescendantId:h,value:D,onKeyDown:A,onMouseDown:Z,onChange:function(ce){oe(!0),W(ce)},onPaste:X,onCompositionStart:Y,onCompositionEnd:q,tabIndex:w,attrs:sn(e,!0),maxLength:N?T:void 0})),!N&&_?t.createElement("span",{className:"".concat(a,"-selection-item"),title:le,style:p?{visibility:"hidden"}:void 0},_.label):null,Ce())};function At(n){return![E.ESC,E.SHIFT,E.BACKSPACE,E.TAB,E.WIN_KEY,E.ALT,E.META,E.WIN_KEY_RIGHT,E.CTRL,E.SEMICOLON,E.EQUALS,E.CAPS_LOCK,E.CONTEXT_MENU,E.F1,E.F2,E.F3,E.F4,E.F5,E.F6,E.F7,E.F8,E.F9,E.F10,E.F11,E.F12].includes(n)}var _t=function(e,o){var a=t.useRef(null),i=t.useRef(!1),r=e.prefixCls,s=e.open,d=e.mode,f=e.showSearch,h=e.tokenWithEnter,S=e.autoClearSearchValue,c=e.onSearch,R=e.onSearchSubmit,u=e.onToggleOpen,w=e.onInputKeyDown,x=e.domRef;t.useImperativeHandle(o,function(){return{focus:function(){a.current.focus()},blur:function(){a.current.blur()}}});var G=kn(0),P=te(G,2),T=P[0],A=P[1],Z=function(D){var p=D.which;(p===E.UP||p===E.DOWN)&&D.preventDefault(),w&&w(D),p===E.ENTER&&d==="tags"&&!i.current&&!s&&(R==null||R(D.target.value)),At(p)&&u(!0)},W=function(){A(!0)},X=t.useRef(null),Y=function(D){c(D,!0,i.current)!==!1&&u(!0)},q=function(){i.current=!0},ae=function(D){i.current=!1,d!=="combobox"&&Y(D.target.value)},L=function(D){var p=D.target.value;if(h&&X.current&&/[\r\n]/.test(X.current)){var le=X.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");p=p.replace(le,X.current)}X.current=null,Y(p)},K=function(D){var p=D.clipboardData,le=p.getData("text");X.current=le},H=function(D){var p=D.target;if(p!==a.current){var le=document.body.style.msTouchAction!==void 0;le?setTimeout(function(){a.current.focus()}):a.current.focus()}},oe=function(D){var p=T();D.target!==a.current&&!p&&d!=="combobox"&&D.preventDefault(),(d!=="combobox"&&(!f||!p)||!s)&&(s&&S!==!1&&c("",!0,!1),u())},N={inputRef:a,onInputKeyDown:Z,onInputMouseDown:W,onInputChange:L,onInputPaste:K,onInputCompositionStart:q,onInputCompositionEnd:ae},U=d==="multiple"||d==="tags"?t.createElement(Tt,Fe({},e,N)):t.createElement(Lt,Fe({},e,N));return t.createElement("div",{ref:x,className:"".concat(r,"-selector"),onClick:H,onMouseDown:oe},U)},Wn=t.forwardRef(_t);Wn.displayName="Selector";var Ft=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],kt=function(e){var o=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"}}},Kt=function(e,o){var a=e.prefixCls;e.disabled;var i=e.visible,r=e.children,s=e.popupElement,d=e.animation,f=e.transitionName,h=e.dropdownStyle,S=e.dropdownClassName,c=e.direction,R=c===void 0?"ltr":c,u=e.placement,w=e.builtinPlacements,x=e.dropdownMatchSelectWidth,G=e.dropdownRender,P=e.dropdownAlign,T=e.getPopupContainer,A=e.empty,Z=e.getTriggerDOMNode,W=e.onPopupVisibleChange,X=e.onPopupMouseEnter,Y=Je(e,Ft),q="".concat(a,"-dropdown"),ae=s;G&&(ae=G(s));var L=t.useMemo(function(){return w||kt(x)},[w,x]),K=d?"".concat(q,"-").concat(d):f,H=typeof x=="number",oe=t.useMemo(function(){return H?null:x===!1?"minWidth":"width"},[x,H]),N=h;H&&(N=J(J({},N),{},{width:x}));var U=t.useRef(null);return t.useImperativeHandle(o,function(){return{getPopupElement:function(){return U.current}}}),t.createElement(wt,Fe({},Y,{showAction:W?["click"]:[],hideAction:W?["click"]:[],popupPlacement:u||(R==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:L,prefixCls:q,popupTransitionName:K,popup:t.createElement("div",{ref:U,onMouseEnter:X},ae),stretch:oe,popupAlign:P,popupVisible:i,getPopupContainer:T,popupClassName:Be(S,ne({},"".concat(q,"-empty"),A)),popupStyle:N,getTriggerDOMNode:Z,onPopupVisibleChange:W}),r)},Bn=t.forwardRef(Kt);Bn.displayName="SelectTrigger";function Tn(n,e){var o=n.key,a;return"value"in n&&(a=n.value),o??(a!==void 0?a:"rc-index-key-".concat(e))}function Hn(n,e){var o=n||{},a=o.label,i=o.value,r=o.options,s=o.groupLabel,d=a||(e?"children":"label");return{label:d,value:i||"value",options:r||"options",groupLabel:s||d}}function $t(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=e.fieldNames,a=e.childrenAsData,i=[],r=Hn(o,!1),s=r.label,d=r.value,f=r.options,h=r.groupLabel;function S(c,R){c.forEach(function(u){if(R||!(f in u)){var w=u[d];i.push({key:Tn(u,i.length),groupOption:R,data:u,label:u[s],value:w})}else{var x=u[h];x===void 0&&a&&(x=u.label),i.push({key:Tn(u,i.length),group:!0,data:u,label:x}),S(u[f],!0)}})}return S(n,!1),i}function Cn(n){var e=J({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return st(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}function Wt(n,e){if(!e||!e.length)return null;var o=!1;function a(r,s){var d=bt(s),f=d[0],h=d.slice(1);if(!f)return[r];var S=r.split(f);return o=o||S.length>1,S.reduce(function(c,R){return[].concat(Ee(c),Ee(a(R,h)))},[]).filter(function(c){return c})}var i=a(n,e);return o?i:null}var Bt=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Ht=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function yn(n){return n==="tags"||n==="multiple"}var Ut=t.forwardRef(function(n,e){var o,a,i=n.id,r=n.prefixCls,s=n.className,d=n.showSearch,f=n.tagRender,h=n.direction,S=n.omitDomProps,c=n.displayValues,R=n.onDisplayValuesChange,u=n.emptyOptions,w=n.notFoundContent,x=w===void 0?"Not Found":w,G=n.onClear,P=n.mode,T=n.disabled,A=n.loading,Z=n.getInputElement,W=n.getRawInputElement,X=n.open,Y=n.defaultOpen,q=n.onDropdownVisibleChange,ae=n.activeValue,L=n.onActiveValueChange,K=n.activeDescendantId,H=n.searchValue,oe=n.autoClearSearchValue,N=n.onSearch,U=n.onSearchSplit,_=n.tokenSeparators,D=n.allowClear,p=n.suffixIcon,le=n.clearIcon,Ce=n.OptionList,ye=n.animation,ce=n.transitionName,he=n.dropdownStyle,fe=n.dropdownClassName,z=n.dropdownMatchSelectWidth,Ve=n.dropdownRender,Oe=n.dropdownAlign,I=n.placement,v=n.builtinPlacements,O=n.getPopupContainer,F=n.showAction,k=F===void 0?[]:F,C=n.onFocus,V=n.onBlur,j=n.onKeyUp,se=n.onKeyDown,ie=n.onMouseDown,Ie=Je(n,Bt),re=yn(P),ve=(d!==void 0?d:re)||P==="combobox",Te=J({},Ie);Ht.forEach(function(M){delete Te[M]}),S==null||S.forEach(function(M){delete Te[M]});var Q=t.useState(!1),He=te(Q,2),Qe=He[0],be=He[1];t.useEffect(function(){be(dt())},[]);var me=t.useRef(null),Ue=t.useRef(null),pe=t.useRef(null),Re=t.useRef(null),Se=t.useRef(null),Me=t.useRef(!1),Le=Et(),Ze=te(Le,3),je=Ze[0],en=Ze[1],Ge=Ze[2];t.useImperativeHandle(e,function(){var M,y;return{focus:(M=Re.current)===null||M===void 0?void 0:M.focus,blur:(y=Re.current)===null||y===void 0?void 0:y.blur,scrollTo:function(ge){var ee;return(ee=Se.current)===null||ee===void 0?void 0:ee.scrollTo(ge)}}});var xe=t.useMemo(function(){var M;if(P!=="combobox")return H;var y=(M=c[0])===null||M===void 0?void 0:M.value;return typeof y=="string"||typeof y=="number"?String(y):""},[H,P,c]),nn=P==="combobox"&&typeof Z=="function"&&Z()||null,Pe=typeof W=="function"&&W(),vn=ft(Ue,Pe==null||(o=Pe.props)===null||o===void 0?void 0:o.ref),rn=t.useState(!1),tn=te(rn,2),Xe=tn[0],un=tn[1];vt(function(){un(!0)},[]);var mn=wn(!1,{defaultValue:Y,value:X}),ln=te(mn,2),cn=ln[0],an=ln[1],l=Xe?cn:!1,b=!x&&u;(T||b&&l&&P==="combobox")&&(l=!1);var m=b?!1:l,g=t.useCallback(function(M){var y=M!==void 0?M:!l;T||(an(y),l!==y&&(q==null||q(y)))},[T,l,an,q]),$=t.useMemo(function(){return(_||[]).some(function(M){return[`
`,`\r
`].includes(M)})},[_]),B=function(y,de,ge){var ee=!0,we=y;L==null||L(null);var De=ge?null:Wt(y,_);return P!=="combobox"&&De&&(we="",U==null||U(De),g(!1),ee=!1),N&&xe!==we&&N(we,{source:de?"typing":"effect"}),ee},Ae=function(y){!y||!y.trim()||N(y,{source:"submit"})};t.useEffect(function(){!l&&!re&&P!=="combobox"&&B("",!1,!1)},[l]),t.useEffect(function(){cn&&T&&an(!1),T&&!Me.current&&en(!1)},[T]);var Ne=kn(),ke=te(Ne,2),ue=ke[0],Ke=ke[1],pn=function(y){var de=ue(),ge=y.which;if(ge===E.ENTER&&(P!=="combobox"&&y.preventDefault(),l||g(!0)),Ke(!!xe),ge===E.BACKSPACE&&!de&&re&&!xe&&c.length){for(var ee=Ee(c),we=null,De=ee.length-1;De>=0;De-=1){var on=ee[De];if(!on.disabled){ee.splice(De,1),we=on;break}}we&&R(ee,{type:"remove",values:[we]})}for(var $e=arguments.length,qe=new Array($e>1?$e-1:0),We=1;We<$e;We++)qe[We-1]=arguments[We];if(l&&Se.current){var Pn;(Pn=Se.current).onKeyDown.apply(Pn,[y].concat(qe))}se==null||se.apply(void 0,[y].concat(qe))},gn=function(y){for(var de=arguments.length,ge=new Array(de>1?de-1:0),ee=1;ee<de;ee++)ge[ee-1]=arguments[ee];if(l&&Se.current){var we;(we=Se.current).onKeyUp.apply(we,[y].concat(ge))}j==null||j.apply(void 0,[y].concat(ge))},En=function(y){var de=c.filter(function(ge){return ge!==y});R(de,{type:"remove",values:[y]})},ze=t.useRef(!1),_e=function(){en(!0),T||(C&&!ze.current&&C.apply(void 0,arguments),k.includes("focus")&&g(!0)),ze.current=!0},qn=function(){Me.current=!0,en(!1,function(){ze.current=!1,Me.current=!1,g(!1)}),!T&&(xe&&(P==="tags"?N(xe,{source:"submit"}):P==="multiple"&&N("",{source:"blur"})),V&&V.apply(void 0,arguments))},Ye=[];t.useEffect(function(){return function(){Ye.forEach(function(M){return clearTimeout(M)}),Ye.splice(0,Ye.length)}},[]);var Jn=function(y){var de,ge=y.target,ee=(de=pe.current)===null||de===void 0?void 0:de.getPopupElement();if(ee&&ee.contains(ge)){var we=setTimeout(function(){var qe=Ye.indexOf(we);if(qe!==-1&&Ye.splice(qe,1),Ge(),!Qe&&!ee.contains(document.activeElement)){var We;(We=Re.current)===null||We===void 0||We.focus()}});Ye.push(we)}for(var De=arguments.length,on=new Array(De>1?De-1:0),$e=1;$e<De;$e++)on[$e-1]=arguments[$e];ie==null||ie.apply(void 0,[y].concat(on))},Qn=t.useState({}),Zn=te(Qn,2),et=Zn[1];function nt(){et({})}var Rn;Pe&&(Rn=function(y){g(y)}),Rt(function(){var M;return[me.current,(M=pe.current)===null||M===void 0?void 0:M.getPopupElement()]},m,g,!!Pe);var tt=t.useMemo(function(){return J(J({},n),{},{notFoundContent:x,open:l,triggerOpen:m,id:i,showSearch:ve,multiple:re,toggleOpen:g})},[n,x,m,l,i,ve,re,g]),Dn=!!p||A,On;Dn&&(On=t.createElement(fn,{className:Be("".concat(r,"-arrow"),ne({},"".concat(r,"-arrow-loading"),A)),customizeIcon:p,customizeIconProps:{loading:A,searchValue:xe,open:l,focused:je,showSearch:ve}}));var at=function(){var y;G==null||G(),(y=Re.current)===null||y===void 0||y.focus(),R([],{type:"clear",values:c}),B("",!1,!1)},Mn=yt(r,at,c,D,le,T,xe,P),ot=Mn.allowClear,rt=Mn.clearIcon,it=t.createElement(Ce,{ref:Se}),ut=Be(r,s,(a={},ne(a,"".concat(r,"-focused"),je),ne(a,"".concat(r,"-multiple"),re),ne(a,"".concat(r,"-single"),!re),ne(a,"".concat(r,"-allow-clear"),D),ne(a,"".concat(r,"-show-arrow"),Dn),ne(a,"".concat(r,"-disabled"),T),ne(a,"".concat(r,"-loading"),A),ne(a,"".concat(r,"-open"),l),ne(a,"".concat(r,"-customize-input"),nn),ne(a,"".concat(r,"-show-search"),ve),a)),xn=t.createElement(Bn,{ref:pe,disabled:T,prefixCls:r,visible:m,popupElement:it,animation:ye,transitionName:ce,dropdownStyle:he,dropdownClassName:fe,direction:h,dropdownMatchSelectWidth:z,dropdownRender:Ve,dropdownAlign:Oe,placement:I,builtinPlacements:v,getPopupContainer:O,empty:u,getTriggerDOMNode:function(){return Ue.current},onPopupVisibleChange:Rn,onPopupMouseEnter:nt},Pe?t.cloneElement(Pe,{ref:vn}):t.createElement(Wn,Fe({},n,{domRef:Ue,prefixCls:r,inputElement:nn,ref:Re,id:i,showSearch:ve,autoClearSearchValue:oe,mode:P,activeDescendantId:K,tagRender:f,values:c,open:l,onToggleOpen:g,activeValue:ae,searchValue:xe,onSearch:B,onSearchSubmit:Ae,onRemove:En,tokenWithEnter:$}))),hn;return Pe?hn=xn:hn=t.createElement("div",Fe({className:ut},Te,{ref:me,onMouseDown:Jn,onKeyDown:pn,onKeyUp:gn,onFocus:_e,onBlur:qn}),je&&!l&&t.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(c.map(function(M){var y=M.label,de=M.value;return["number","string"].includes(dn(y))?y:de}).join(", "))),xn,On,ot&&rt),t.createElement(Fn.Provider,{value:tt},hn)}),Un=function(){return null};Un.isSelectOptGroup=!0;var zn=function(){return null};zn.isSelectOption=!0;var jn=t.createContext(null);function zt(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var jt=["disabled","title","children","style","className"];function Ln(n){return typeof n=="string"||typeof n=="number"}var Gt=function(e,o){var a=It(),i=a.prefixCls,r=a.id,s=a.open,d=a.multiple,f=a.mode,h=a.searchValue,S=a.toggleOpen,c=a.notFoundContent,R=a.onPopupScroll,u=t.useContext(jn),w=u.flattenOptions,x=u.onActiveValue,G=u.defaultActiveFirstOption,P=u.onSelect,T=u.menuItemSelectedIcon,A=u.rawValues,Z=u.fieldNames,W=u.virtual,X=u.direction,Y=u.listHeight,q=u.listItemHeight,ae=u.optionRender,L="".concat(i,"-item"),K=mt(function(){return w},[s,w],function(I,v){return v[0]&&I[1]!==v[1]}),H=t.useRef(null),oe=function(v){v.preventDefault()},N=function(v){H.current&&H.current.scrollTo(typeof v=="number"?{index:v}:v)},U=function(v){for(var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,F=K.length,k=0;k<F;k+=1){var C=(v+k*O+F)%F,V=K[C],j=V.group,se=V.data;if(!j&&!se.disabled)return C}return-1},_=t.useState(function(){return U(0)}),D=te(_,2),p=D[0],le=D[1],Ce=function(v){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;le(v);var F={source:O?"keyboard":"mouse"},k=K[v];if(!k){x(null,-1,F);return}x(k.value,v,F)};t.useEffect(function(){Ce(G!==!1?U(0):-1)},[K.length,h]);var ye=t.useCallback(function(I){return A.has(I)&&f!=="combobox"},[f,Ee(A).toString(),A.size]);t.useEffect(function(){var I=setTimeout(function(){if(!d&&s&&A.size===1){var O=Array.from(A)[0],F=K.findIndex(function(k){var C=k.data;return C.value===O});F!==-1&&(Ce(F),N(F))}});if(s){var v;(v=H.current)===null||v===void 0||v.scrollTo(void 0)}return function(){return clearTimeout(I)}},[s,h]);var ce=function(v){v!==void 0&&P(v,{selected:!A.has(v)}),d||S(!1)};if(t.useImperativeHandle(o,function(){return{onKeyDown:function(v){var O=v.which,F=v.ctrlKey;switch(O){case E.N:case E.P:case E.UP:case E.DOWN:{var k=0;if(O===E.UP?k=-1:O===E.DOWN?k=1:zt()&&F&&(O===E.N?k=1:O===E.P&&(k=-1)),k!==0){var C=U(p+k,k);N(C),Ce(C,!0)}break}case E.ENTER:{var V=K[p];V&&!V.data.disabled?ce(V.value):ce(void 0),s&&v.preventDefault();break}case E.ESC:S(!1),s&&v.stopPropagation()}},onKeyUp:function(){},scrollTo:function(v){N(v)}}}),K.length===0)return t.createElement("div",{role:"listbox",id:"".concat(r,"_list"),className:"".concat(L,"-empty"),onMouseDown:oe},c);var he=Object.keys(Z).map(function(I){return Z[I]}),fe=function(v){return v.label};function z(I,v){var O=I.group;return{role:O?"presentation":"option",id:"".concat(r,"_list_").concat(v)}}var Ve=function(v){var O=K[v];if(!O)return null;var F=O.data||{},k=F.value,C=O.group,V=sn(F,!0),j=fe(O);return O?t.createElement("div",Fe({"aria-label":typeof j=="string"&&!C?j:null},V,{key:v},z(O,v),{"aria-selected":ye(k)}),k):null},Oe={role:"listbox",id:"".concat(r,"_list")};return t.createElement(t.Fragment,null,W&&t.createElement("div",Fe({},Oe,{style:{height:0,width:0,overflow:"hidden"}}),Ve(p-1),Ve(p),Ve(p+1)),t.createElement(Ct,{itemKey:"key",ref:H,data:K,height:Y,itemHeight:q,fullHeight:!1,onMouseDown:oe,onScroll:R,virtual:W,direction:X,innerProps:W?null:Oe},function(I,v){var O,F=I.group,k=I.groupOption,C=I.data,V=I.label,j=I.value,se=C.key;if(F){var ie,Ie=(ie=C.title)!==null&&ie!==void 0?ie:Ln(V)?V.toString():void 0;return t.createElement("div",{className:Be(L,"".concat(L,"-group")),title:Ie},V!==void 0?V:se)}var re=C.disabled,ve=C.title;C.children;var Te=C.style,Q=C.className,He=Je(C,jt),Qe=pt(He,he),be=ye(j),me="".concat(L,"-option"),Ue=Be(L,me,Q,(O={},ne(O,"".concat(me,"-grouped"),k),ne(O,"".concat(me,"-active"),p===v&&!re),ne(O,"".concat(me,"-disabled"),re),ne(O,"".concat(me,"-selected"),be),O)),pe=fe(I),Re=!T||typeof T=="function"||be,Se=typeof pe=="number"?pe:pe||j,Me=Ln(Se)?Se.toString():void 0;return ve!==void 0&&(Me=ve),t.createElement("div",Fe({},sn(Qe),W?{}:z(I,v),{"aria-selected":be,className:Ue,title:Me,onMouseMove:function(){p===v||re||Ce(v)},onClick:function(){re||ce(j)},style:Te}),t.createElement("div",{className:"".concat(me,"-content")},typeof ae=="function"?ae(I,{index:v}):Se),t.isValidElement(T)||be,Re&&t.createElement(fn,{className:"".concat(L,"-option-state"),customizeIcon:T,customizeIconProps:{value:j,disabled:re,isSelected:be}},be?"✓":null))}))},Gn=t.forwardRef(Gt);Gn.displayName="OptionList";const Xt=function(n,e){var o=t.useRef({values:new Map,options:new Map}),a=t.useMemo(function(){var r=o.current,s=r.values,d=r.options,f=n.map(function(c){if(c.label===void 0){var R;return J(J({},c),{},{label:(R=s.get(c.value))===null||R===void 0?void 0:R.label})}return c}),h=new Map,S=new Map;return f.forEach(function(c){h.set(c.value,c),S.set(c.value,e.get(c.value)||d.get(c.value))}),o.current.values=h,o.current.options=S,f},[n,e]),i=t.useCallback(function(r){return e.get(r)||o.current.options.get(r)},[e]);return[a,i]};function Sn(n,e){return Kn(n).join("").toUpperCase().includes(e)}const Yt=function(n,e,o,a,i){return t.useMemo(function(){if(!o||a===!1)return n;var r=e.options,s=e.label,d=e.value,f=[],h=typeof a=="function",S=o.toUpperCase(),c=h?a:function(u,w){return i?Sn(w[i],S):w[r]?Sn(w[s!=="children"?s:"label"],S):Sn(w[d],S)},R=h?function(u){return Cn(u)}:function(u){return u};return n.forEach(function(u){if(u[r]){var w=c(o,R(u));if(w)f.push(u);else{var x=u[r].filter(function(G){return c(o,R(G))});x.length&&f.push(J(J({},u),{},ne({},r,x)))}return}c(o,R(u))&&f.push(u)}),f},[n,a,i,o,e])};var An=0,qt=gt();function Jt(){var n;return qt?(n=An,An+=1):n="TEST_OR_SSR",n}function Qt(n){var e=t.useState(),o=te(e,2),a=o[0],i=o[1];return t.useEffect(function(){i("rc_select_".concat(Jt()))},[]),n||a}var Zt=["children","value"],ea=["children"];function na(n){var e=n,o=e.key,a=e.props,i=a.children,r=a.value,s=Je(a,Zt);return J({key:o,value:r!==void 0?r:o,children:i},s)}function Xn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ht(n).map(function(o,a){if(!t.isValidElement(o)||!o.type)return null;var i=o,r=i.type.isSelectOptGroup,s=i.key,d=i.props,f=d.children,h=Je(d,ea);return e||!r?na(o):J(J({key:"__RC_SELECT_GRP__".concat(s===null?a:s,"__"),label:s},h),{},{options:Xn(f)})}).filter(function(o){return o})}function ta(n,e,o,a,i){return t.useMemo(function(){var r=n,s=!n;s&&(r=Xn(e));var d=new Map,f=new Map,h=function(R,u,w){w&&typeof w=="string"&&R.set(u[w],u)};function S(c){for(var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=0;u<c.length;u+=1){var w=c[u];!w[o.options]||R?(d.set(w[o.value],w),h(f,w,o.label),h(f,w,a),h(f,w,i)):S(w[o.options],!0)}}return S(r),{options:r,valueOptions:d,labelOptions:f}},[n,e,o,a,i])}function _n(n){var e=t.useRef();e.current=n;var o=t.useCallback(function(){return e.current.apply(e,arguments)},[]);return o}var aa=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],oa=["inputValue"];function ra(n){return!n||dn(n)!=="object"}var ia=t.forwardRef(function(n,e){var o=n.id,a=n.mode,i=n.prefixCls,r=i===void 0?"rc-select":i,s=n.backfill,d=n.fieldNames,f=n.inputValue,h=n.searchValue,S=n.onSearch,c=n.autoClearSearchValue,R=c===void 0?!0:c,u=n.onSelect,w=n.onDeselect,x=n.dropdownMatchSelectWidth,G=x===void 0?!0:x,P=n.filterOption,T=n.filterSort,A=n.optionFilterProp,Z=n.optionLabelProp,W=n.options,X=n.optionRender,Y=n.children,q=n.defaultActiveFirstOption,ae=n.menuItemSelectedIcon,L=n.virtual,K=n.direction,H=n.listHeight,oe=H===void 0?200:H,N=n.listItemHeight,U=N===void 0?20:N,_=n.value,D=n.defaultValue,p=n.labelInValue,le=n.onChange,Ce=Je(n,aa),ye=Qt(o),ce=yn(a),he=!!(!W&&Y),fe=t.useMemo(function(){return P===void 0&&a==="combobox"?!1:P},[P,a]),z=t.useMemo(function(){return Hn(d,he)},[JSON.stringify(d),he]),Ve=wn("",{value:h!==void 0?h:f,postState:function(b){return b||""}}),Oe=te(Ve,2),I=Oe[0],v=Oe[1],O=ta(W,Y,z,A,Z),F=O.valueOptions,k=O.labelOptions,C=O.options,V=t.useCallback(function(l){var b=Kn(l);return b.map(function(m){var g,$,B,Ae,Ne;if(ra(m))g=m;else{var ke;B=m.key,$=m.label,g=(ke=m.value)!==null&&ke!==void 0?ke:B}var ue=F.get(g);if(ue){var Ke;$===void 0&&($=ue==null?void 0:ue[Z||z.label]),B===void 0&&(B=(Ke=ue==null?void 0:ue.key)!==null&&Ke!==void 0?Ke:g),Ae=ue==null?void 0:ue.disabled,Ne=ue==null?void 0:ue.title}return{label:$,value:g,key:B,disabled:Ae,title:Ne}})},[z,Z,F]),j=wn(D,{value:_}),se=te(j,2),ie=se[0],Ie=se[1],re=t.useMemo(function(){var l,b=V(ie);return a==="combobox"&&Pt((l=b[0])===null||l===void 0?void 0:l.value)?[]:b},[ie,V,a]),ve=Xt(re,F),Te=te(ve,2),Q=Te[0],He=Te[1],Qe=t.useMemo(function(){if(!a&&Q.length===1){var l=Q[0];if(l.value===null&&(l.label===null||l.label===void 0))return[]}return Q.map(function(b){var m;return J(J({},b),{},{label:(m=b.label)!==null&&m!==void 0?m:b.value})})},[a,Q]),be=t.useMemo(function(){return new Set(Q.map(function(l){return l.value}))},[Q]);t.useEffect(function(){if(a==="combobox"){var l,b=(l=Q[0])===null||l===void 0?void 0:l.value;v(xt(b)?String(b):"")}},[Q]);var me=_n(function(l,b){var m,g=b??l;return m={},ne(m,z.value,l),ne(m,z.label,g),m}),Ue=t.useMemo(function(){if(a!=="tags")return C;var l=Ee(C),b=function(g){return F.has(g)};return Ee(Q).sort(function(m,g){return m.value<g.value?-1:1}).forEach(function(m){var g=m.value;b(g)||l.push(me(g,m.label))}),l},[me,C,F,Q,a]),pe=Yt(Ue,z,I,fe,A),Re=t.useMemo(function(){return a!=="tags"||!I||pe.some(function(l){return l[A||"value"]===I})||pe.some(function(l){return l[z.value]===I})?pe:[me(I)].concat(Ee(pe))},[me,A,a,pe,I,z]),Se=t.useMemo(function(){return T?Ee(Re).sort(function(l,b){return T(l,b)}):Re},[Re,T]),Me=t.useMemo(function(){return $t(Se,{fieldNames:z,childrenAsData:he})},[Se,z,he]),Le=function(b){var m=V(b);if(Ie(m),le&&(m.length!==Q.length||m.some(function(B,Ae){var Ne;return((Ne=Q[Ae])===null||Ne===void 0?void 0:Ne.value)!==(B==null?void 0:B.value)}))){var g=p?m:m.map(function(B){return B.value}),$=m.map(function(B){return Cn(He(B.value))});le(ce?g:g[0],ce?$:$[0])}},Ze=t.useState(null),je=te(Ze,2),en=je[0],Ge=je[1],xe=t.useState(0),nn=te(xe,2),Pe=nn[0],vn=nn[1],rn=q!==void 0?q:a!=="combobox",tn=t.useCallback(function(l,b){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g=m.source,$=g===void 0?"keyboard":g;vn(b),s&&a==="combobox"&&l!==null&&$==="keyboard"&&Ge(String(l))},[s,a]),Xe=function(b,m,g){var $=function(){var ze,_e=He(b);return[p?{label:_e==null?void 0:_e[z.label],value:b,key:(ze=_e==null?void 0:_e.key)!==null&&ze!==void 0?ze:b}:b,Cn(_e)]};if(m&&u){var B=$(),Ae=te(B,2),Ne=Ae[0],ke=Ae[1];u(Ne,ke)}else if(!m&&w&&g!=="clear"){var ue=$(),Ke=te(ue,2),pn=Ke[0],gn=Ke[1];w(pn,gn)}},un=_n(function(l,b){var m,g=ce?b.selected:!0;g?m=ce?[].concat(Ee(Q),[l]):[l]:m=Q.filter(function($){return $.value!==l}),Le(m),Xe(l,g),a==="combobox"?Ge(""):(!yn||R)&&(v(""),Ge(""))}),mn=function(b,m){Le(b);var g=m.type,$=m.values;(g==="remove"||g==="clear")&&$.forEach(function(B){Xe(B.value,!1,g)})},ln=function(b,m){if(v(b),Ge(null),m.source==="submit"){var g=(b||"").trim();if(g){var $=Array.from(new Set([].concat(Ee(be),[g])));Le($),Xe(g,!0),v("")}return}m.source!=="blur"&&(a==="combobox"&&Le(b),S==null||S(b))},cn=function(b){var m=b;a!=="tags"&&(m=b.map(function($){var B=k.get($);return B==null?void 0:B.value}).filter(function($){return $!==void 0}));var g=Array.from(new Set([].concat(Ee(be),Ee(m))));Le(g),g.forEach(function($){Xe($,!0)})},an=t.useMemo(function(){var l=L!==!1&&G!==!1;return J(J({},O),{},{flattenOptions:Me,onActiveValue:tn,defaultActiveFirstOption:rn,onSelect:un,menuItemSelectedIcon:ae,rawValues:be,fieldNames:z,virtual:l,direction:K,listHeight:oe,listItemHeight:U,childrenAsData:he,optionRender:X})},[O,Me,tn,rn,un,ae,be,z,L,G,oe,U,he,X]);return t.createElement(jn.Provider,{value:an},t.createElement(Ut,Fe({},Ce,{id:ye,prefixCls:r,ref:e,omitDomProps:oa,mode:a,displayValues:Qe,onDisplayValuesChange:mn,direction:K,searchValue:I,onSearch:ln,autoClearSearchValue:R,onSearchSplit:cn,dropdownMatchSelectWidth:G,OptionList:Gn,emptyOptions:!Me.length,activeValue:en,activeDescendantId:"".concat(ye,"_list_").concat(Pe)})))}),Yn=ia;Yn.Option=zn;Yn.OptGroup=Un;export{Ut as B,zn as O,Yn as T,Un as a,Qt as b,It as u};

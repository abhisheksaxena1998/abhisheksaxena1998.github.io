import{k as e,g as n,b as t,e as r,c as a,f as u,d as l}from"./@babel.BGkJ1U9u.js";import{c as o}from"./classnames.BmZ8OyLm.js";import{K as c,u as i,d as s,e as d,o as f,b as v}from"./rc-util.DIscDwjl.js";import{r as m}from"./react.DlfX74Oz.js";import{r as g}from"./react-dom.tsMZo23m.js";function h(e,n,t){return(e-n)/(t-n)}function p(e,n,t,r){var a=h(n,t,r),u={};switch(e){case"rtl":u.right="".concat(100*a,"%"),u.transform="translateX(50%)";break;case"btt":u.bottom="".concat(100*a,"%"),u.transform="translateY(50%)";break;case"ttb":u.top="".concat(100*a,"%"),u.transform="translateY(-50%)";break;default:u.left="".concat(100*a,"%"),u.transform="translateX(-50%)"}return u}function b(e,n){return Array.isArray(e)?e[n]:e}var x=m.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),y=m.createContext({}),C=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],E=m.forwardRef((function(a,u){var l,i=a.prefixCls,s=a.value,d=a.valueIndex,f=a.onStartMove,v=a.onDelete,g=a.style,h=a.render,y=a.dragging,E=a.draggingDelete,k=a.onOffsetChange,M=a.onChangeComplete,S=a.onFocus,D=a.onMouseEnter,F=e(a,C),w=m.useContext(x),N=w.min,H=w.max,I=w.direction,L=w.disabled,R=w.keyboard,P=w.range,O=w.tabIndex,T=w.ariaLabelForHandle,A=w.ariaLabelledByForHandle,B=w.ariaValueTextFormatterForHandle,V=w.styles,j=w.classNames,X="".concat(i,"-handle"),Y=function(e){L||f(e,d)},G=p(I,s,N,H),U={};null!==d&&(U={tabIndex:L?null:b(O,d),role:"slider","aria-valuemin":N,"aria-valuemax":H,"aria-valuenow":s,"aria-disabled":L,"aria-label":b(T,d),"aria-labelledby":b(A,d),"aria-valuetext":null===(l=b(B,d))||void 0===l?void 0:l(s),"aria-orientation":"ltr"===I||"rtl"===I?"horizontal":"vertical",onMouseDown:Y,onTouchStart:Y,onFocus:function(e){null==S||S(e,d)},onMouseEnter:function(e){D(e,d)},onKeyDown:function(e){if(!L&&R){var n=null;switch(e.which||e.keyCode){case c.LEFT:n="ltr"===I||"btt"===I?-1:1;break;case c.RIGHT:n="ltr"===I||"btt"===I?1:-1;break;case c.UP:n="ttb"!==I?1:-1;break;case c.DOWN:n="ttb"!==I?-1:1;break;case c.HOME:n="min";break;case c.END:n="max";break;case c.PAGE_UP:n=2;break;case c.PAGE_DOWN:n=-2;break;case c.BACKSPACE:case c.DELETE:v(d)}null!==n&&(e.preventDefault(),k(n,d))}},onKeyUp:function(e){switch(e.which||e.keyCode){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:case c.HOME:case c.END:case c.PAGE_UP:case c.PAGE_DOWN:null==M||M()}}});var K=m.createElement("div",n({ref:u,className:o(X,t(t(t({},"".concat(X,"-").concat(d+1),null!==d&&P),"".concat(X,"-dragging"),y),"".concat(X,"-dragging-delete"),E),j.handle),style:r(r(r({},G),g),V.handle)},U,F));return h&&(K=h(K,{index:d,prefixCls:i,value:s,dragging:y,draggingDelete:E})),K})),k=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],M=m.forwardRef((function(t,u){var l=t.prefixCls,o=t.style,c=t.onStartMove,i=t.onOffsetChange,s=t.values,d=t.handleRender,f=t.activeHandleRender,v=t.draggingIndex,h=t.draggingDelete,p=t.onFocus,x=e(t,k),y=m.useRef({}),C=m.useState(!1),M=a(C,2),S=M[0],D=M[1],F=m.useState(-1),w=a(F,2),N=w[0],H=w[1],I=function(e){H(e),D(!0)};m.useImperativeHandle(u,(function(){return{focus:function(e){var n;null===(n=y.current[e])||void 0===n||n.focus()},hideHelp:function(){g.flushSync((function(){D(!1)}))}}}));var L=r({prefixCls:l,onStartMove:c,onOffsetChange:i,render:d,onFocus:function(e,n){I(n),null==p||p(e)},onMouseEnter:function(e,n){I(n)}},x);return m.createElement(m.Fragment,null,s.map((function(e,t){var r=v===t;return m.createElement(E,n({ref:function(e){e?y.current[t]=e:delete y.current[t]},dragging:r,draggingDelete:r&&h,style:b(o,t),key:t,value:e,valueIndex:t},L))})),f&&S&&m.createElement(E,n({key:"a11y"},L,{value:s[N],valueIndex:null,dragging:-1!==v,draggingDelete:h,render:f,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))})),S=function(e){var n=e.prefixCls,a=e.style,u=e.children,l=e.value,c=e.onClick,i=m.useContext(x),s=i.min,d=i.max,f=i.direction,v=i.includedStart,g=i.includedEnd,h=i.included,b="".concat(n,"-text"),y=p(f,l,s,d);return m.createElement("span",{className:o(b,t({},"".concat(b,"-active"),h&&v<=l&&l<=g)),style:r(r({},y),a),onMouseDown:function(e){e.stopPropagation()},onClick:function(){c(l)}},u)},D=function(e){var n=e.prefixCls,t=e.marks,r=e.onClick,a="".concat(n,"-mark");return t.length?m.createElement("div",{className:a},t.map((function(e){var n=e.value,t=e.style,u=e.label;return m.createElement(S,{key:n,prefixCls:a,style:t,value:n,onClick:r},u)}))):null},F=function(e){var n=e.prefixCls,a=e.value,u=e.style,l=e.activeStyle,c=m.useContext(x),i=c.min,s=c.max,d=c.direction,f=c.included,v=c.includedStart,g=c.includedEnd,h="".concat(n,"-dot"),b=f&&v<=a&&a<=g,y=r(r({},p(d,a,i,s)),"function"==typeof u?u(a):u);return b&&(y=r(r({},y),"function"==typeof l?l(a):l)),m.createElement("span",{className:o(h,t({},"".concat(h,"-active"),b)),style:y})},w=function(e){var n=e.prefixCls,t=e.marks,r=e.dots,a=e.style,u=e.activeStyle,l=m.useContext(x),o=l.min,c=l.max,i=l.step,s=m.useMemo((function(){var e=new Set;if(t.forEach((function(n){e.add(n.value)})),r&&null!==i)for(var n=o;n<=c;)e.add(n),n+=i;return Array.from(e)}),[o,c,i,r,t]);return m.createElement("div",{className:"".concat(n,"-step")},s.map((function(e){return m.createElement(F,{prefixCls:n,key:e,value:e,style:a,activeStyle:u})})))},N=function(e){var n=e.prefixCls,a=e.style,u=e.start,l=e.end,c=e.index,i=e.onStartMove,s=e.replaceCls,d=m.useContext(x),f=d.direction,v=d.min,g=d.max,p=d.disabled,b=d.range,y=d.classNames,C="".concat(n,"-track"),E=h(u,v,g),k=h(l,v,g),M=function(e){!p&&i&&i(e,-1)},S={};switch(f){case"rtl":S.right="".concat(100*E,"%"),S.width="".concat(100*k-100*E,"%");break;case"btt":S.bottom="".concat(100*E,"%"),S.height="".concat(100*k-100*E,"%");break;case"ttb":S.top="".concat(100*E,"%"),S.height="".concat(100*k-100*E,"%");break;default:S.left="".concat(100*E,"%"),S.width="".concat(100*k-100*E,"%")}var D=s||o(C,t(t({},"".concat(C,"-").concat(c+1),null!==c&&b),"".concat(n,"-track-draggable"),i),y.track);return m.createElement("div",{className:D,style:r(r({},S),a),onMouseDown:M,onTouchStart:M})},H=function(e){var n=e.prefixCls,t=e.style,a=e.values,u=e.startPoint,l=e.onStartMove,c=m.useContext(x),i=c.included,s=c.range,d=c.min,f=c.styles,v=c.classNames,g=m.useMemo((function(){if(!s){if(0===a.length)return[];var e=null!=u?u:d,n=a[0];return[{start:Math.min(e,n),end:Math.max(e,n)}]}for(var t=[],r=0;r<a.length-1;r+=1)t.push({start:a[r],end:a[r+1]});return t}),[a,s,u,d]);if(!i)return null;var h=v.tracks||f.tracks?m.createElement(N,{index:null,prefixCls:n,start:g[0].start,end:g[g.length-1].end,replaceCls:o(v.tracks,"".concat(n,"-tracks")),style:f.tracks}):null;return m.createElement(m.Fragment,null,h,g.map((function(e,a){var u=e.start,o=e.end;return m.createElement(N,{index:a,prefixCls:n,style:r(r({},b(t,a)),f.track),start:u,end:o,key:a,onStartMove:l})})))};function I(e){var n="targetTouches"in e?e.targetTouches[0]:e;return{pageX:n.pageX,pageY:n.pageY}}var L=m.forwardRef((function(e,n){var c=e.prefixCls,g=void 0===c?"rc-slider":c,h=e.className,p=e.style,b=e.classNames,C=e.styles,E=e.id,k=e.disabled,S=void 0!==k&&k,F=e.keyboard,N=void 0===F||F,L=e.autoFocus,R=e.onFocus,P=e.onBlur,O=e.min,T=void 0===O?0:O,A=e.max,B=void 0===A?100:A,V=e.step,j=void 0===V?1:V,X=e.value,Y=e.defaultValue,G=e.range,U=e.count,K=e.onChange,W=e.onBeforeChange,_=e.onAfterChange,z=e.onChangeComplete,q=e.allowCross,J=void 0===q||q,Q=e.pushable,Z=void 0!==Q&&Q,$=e.reverse,ee=e.vertical,ne=e.included,te=void 0===ne||ne,re=e.startPoint,ae=e.trackStyle,ue=e.handleStyle,le=e.railStyle,oe=e.dotStyle,ce=e.activeDotStyle,ie=e.marks,se=e.dots,de=e.handleRender,fe=e.activeHandleRender,ve=e.track,me=e.tabIndex,ge=void 0===me?0:me,he=e.ariaLabelForHandle,pe=e.ariaLabelledByForHandle,be=e.ariaValueTextFormatterForHandle,xe=m.useRef(null),ye=m.useRef(null),Ce=m.useMemo((function(){return ee?$?"ttb":"btt":$?"rtl":"ltr"}),[$,ee]),Ee=function(e){return m.useMemo((function(){if(!0===e||!e)return[!!e,!1,!1,0];var n=e.editable,t=e.draggableTrack;return[!0,n,!n&&t,e.minCount||0,e.maxCount]}),[e])}(G),ke=a(Ee,5),Me=ke[0],Se=ke[1],De=ke[2],Fe=ke[3],we=ke[4],Ne=m.useMemo((function(){return isFinite(T)?T:0}),[T]),He=m.useMemo((function(){return isFinite(B)?B:100}),[B]),Ie=m.useMemo((function(){return null!==j&&j<=0?1:j}),[j]),Le=m.useMemo((function(){return"boolean"==typeof Z?!!Z&&Ie:Z>=0&&Z}),[Z,Ie]),Re=m.useMemo((function(){return Object.keys(ie||{}).map((function(e){var n=ie[e],t={value:Number(e)};return n&&"object"===l(n)&&!m.isValidElement(n)&&("label"in n||"style"in n)?(t.style=n.style,t.label=n.label):t.label=n,t})).filter((function(e){var n=e.label;return n||"number"==typeof n})).sort((function(e,n){return e.value-n.value}))}),[ie]),Pe=function(e,n,t,r,a,l){var o=m.useCallback((function(t){return Math.max(e,Math.min(n,t))}),[e,n]),c=m.useCallback((function(r){if(null!==t){var a=e+Math.round((o(r)-e)/t)*t,u=function(e){return(String(e).split(".")[1]||"").length},l=Math.max(u(t),u(n),u(e)),c=Number(a.toFixed(l));return e<=c&&c<=n?c:null}return null}),[t,e,n,o]),i=m.useCallback((function(a){var u=o(a),l=r.map((function(e){return e.value}));null!==t&&l.push(c(a)),l.push(e,n);var i=l[0],s=n-e;return l.forEach((function(e){var n=Math.abs(u-e);n<=s&&(i=e,s=n)})),i}),[e,n,r,t,o,c]),s=function a(l,o,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"==typeof o){var d,f=l[i],v=f+o,m=[];r.forEach((function(e){m.push(e.value)})),m.push(e,n),m.push(c(f));var g=o>0?1:-1;"unit"===s?m.push(c(f+g*t)):m.push(c(v)),m=m.filter((function(e){return null!==e})).filter((function(e){return o<0?e<=f:e>=f})),"unit"===s&&(m=m.filter((function(e){return e!==f})));var h="unit"===s?f:v;d=m[0];var p=Math.abs(d-h);if(m.forEach((function(e){var n=Math.abs(e-h);n<p&&(d=e,p=n)})),void 0===d)return o<0?e:n;if("dist"===s)return d;if(Math.abs(o)>1){var b=u(l);return b[i]=d,a(b,o-g,i,s)}return d}return"min"===o?e:"max"===o?n:void 0},d=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",a=e[t],u=s(e,n,t,r);return{value:u,changed:u!==a}},f=function(e){return null===l&&0===e||"number"==typeof l&&e<l};return[i,function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",u=e.map(i),o=u[t],c=s(u,n,t,r);if(u[t]=c,!1===a){var v=l||0;t>0&&u[t-1]!==o&&(u[t]=Math.max(u[t],u[t-1]+v)),t<u.length-1&&u[t+1]!==o&&(u[t]=Math.min(u[t],u[t+1]-v))}else if("number"==typeof l||null===l){for(var m=t+1;m<u.length;m+=1)for(var g=!0;f(u[m]-u[m-1])&&g;){var h=d(u,1,m);u[m]=h.value,g=h.changed}for(var p=t;p>0;p-=1)for(var b=!0;f(u[p]-u[p-1])&&b;){var x=d(u,-1,p-1);u[p-1]=x.value,b=x.changed}for(var y=u.length-1;y>0;y-=1)for(var C=!0;f(u[y]-u[y-1])&&C;){var E=d(u,-1,y-1);u[y-1]=E.value,C=E.changed}for(var k=0;k<u.length-1;k+=1)for(var M=!0;f(u[k+1]-u[k])&&M;){var S=d(u,1,k+1);u[k+1]=S.value,M=S.changed}}return{value:u[t],values:u}}]}(Ne,He,Ie,Re,J,Le),Oe=a(Pe,2),Te=Oe[0],Ae=Oe[1],Be=d(Y,{value:X}),Ve=a(Be,2),je=Ve[0],Xe=Ve[1],Ye=m.useMemo((function(){var e=null==je?[]:Array.isArray(je)?je:[je],n=a(e,1)[0],t=null===je?[]:[void 0===n?Ne:n];if(Me){if(t=u(e),U||void 0===je){var r=U>=0?U+1:2;for(t=t.slice(0,r);t.length<r;){var l;t.push(null!==(l=t[t.length-1])&&void 0!==l?l:Ne)}}t.sort((function(e,n){return e-n}))}return t.forEach((function(e,n){t[n]=Te(e)})),t}),[je,Me,Ne,U,Te]),Ge=function(e){return Me?e:e[0]},Ue=s((function(e){var n=u(e).sort((function(e,n){return e-n}));K&&!f(n,Ye,!0)&&K(Ge(n)),Xe(n)})),Ke=s((function(e){e&&xe.current.hideHelp();var n=Ge(Ye);null==_||_(n),v(!_,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),null==z||z(n)})),We=function(e,n,t,r,l,o,c,d,f,v,g){var h=m.useState(null),p=a(h,2),b=p[0],x=p[1],C=m.useState(-1),E=a(C,2),k=E[0],M=E[1],S=m.useState(!1),D=a(S,2),F=D[0],w=D[1],N=m.useState(t),H=a(N,2),L=H[0],R=H[1],P=m.useState(t),O=a(P,2),T=O[0],A=O[1],B=m.useRef(null),V=m.useRef(null),j=m.useRef(null),X=m.useContext(y),Y=X.onDragStart,G=X.onDragChange;i((function(){-1===k&&R(t)}),[t,k]),m.useEffect((function(){return function(){document.removeEventListener("mousemove",B.current),document.removeEventListener("mouseup",V.current),j.current&&(j.current.removeEventListener("touchmove",B.current),j.current.removeEventListener("touchend",V.current))}}),[]);var U=function(e,n,t){void 0!==n&&x(n),R(e);var r=e;t&&(r=e.filter((function(e,n){return n!==k}))),c(r),G&&G({rawValues:e,deleteIndex:t?k:-1,draggingIndex:k,draggingValue:n})},K=s((function(e,n,t){if(-1===e){var a=T[0],c=T[T.length-1],i=r-a,s=l-c,d=n*(l-r);d=Math.max(d,i),d=Math.min(d,s);var v=o(a+d);d=v-a;var m=T.map((function(e){return e+d}));U(m)}else{var g=(l-r)*n,h=u(L);h[e]=T[e];var p=f(h,g,e,"dist");U(p.values,p.value,t)}})),W=m.useMemo((function(){var e=u(t).sort((function(e,n){return e-n})),n=u(L).sort((function(e,n){return e-n})),r={};n.forEach((function(e){r[e]=(r[e]||0)+1})),e.forEach((function(e){r[e]=(r[e]||0)-1}));var a=v?1:0;return Object.values(r).reduce((function(e,n){return e+Math.abs(n)}),0)<=a?L:t}),[t,L,v]);return[k,b,F,W,function(r,a,u){r.stopPropagation();var l=u||t,o=l[a];M(a),x(o),A(l),R(l),w(!1);var c=I(r),i=c.pageX,s=c.pageY,f=!1;Y&&Y({rawValues:l,draggingIndex:a,draggingValue:o});var m=function(t){t.preventDefault();var r,u,l=I(t),o=l.pageX,c=l.pageY,d=o-i,m=c-s,h=e.current.getBoundingClientRect(),p=h.width,b=h.height;switch(n){case"btt":r=-m/b,u=d;break;case"ttb":r=m/b,u=d;break;case"rtl":r=-d/p,u=m;break;default:r=d/p,u=m}f=!!v&&Math.abs(u)>130&&g<L.length,w(f),K(a,r,f)},h=function e(n){n.preventDefault(),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",m),j.current&&(j.current.removeEventListener("touchmove",B.current),j.current.removeEventListener("touchend",V.current)),B.current=null,V.current=null,j.current=null,d(f),M(-1),w(!1)};document.addEventListener("mouseup",h),document.addEventListener("mousemove",m),r.currentTarget.addEventListener("touchend",h),r.currentTarget.addEventListener("touchmove",m),B.current=m,V.current=h,j.current=r.currentTarget}]}(ye,Ce,Ye,Ne,He,Te,Ue,Ke,Ae,Se,Fe),_e=a(We,5),ze=_e[0],qe=_e[1],Je=_e[2],Qe=_e[3],Ze=_e[4],$e=function(e,n){if(!S){var t=u(Ye),r=0,a=0,l=He-Ne;Ye.forEach((function(n,t){var u=Math.abs(e-n);u<=l&&(l=u,r=t),n<e&&(a=t)}));var o=r;Se&&0!==l&&(!we||Ye.length<we)?(t.splice(a+1,0,e),o=a+1):t[r]=e,Me&&!Ye.length&&void 0===U&&t.push(e);var c,i,s=Ge(t);if(null==W||W(s),Ue(t),n)null===(c=document.activeElement)||void 0===c||null===(i=c.blur)||void 0===i||i.call(c),xe.current.focus(o),Ze(n,o,t);else null==_||_(s),v(!_,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),null==z||z(s)}},en=m.useState(null),nn=a(en,2),tn=nn[0],rn=nn[1];m.useEffect((function(){if(null!==tn){var e=Ye.indexOf(tn);e>=0&&xe.current.focus(e)}rn(null)}),[tn]);var an=m.useMemo((function(){return(!De||null!==Ie)&&De}),[De,Ie]),un=s((function(e,n){Ze(e,n),null==W||W(Ge(Ye))})),ln=-1!==ze;m.useEffect((function(){if(!ln){var e=Ye.lastIndexOf(qe);xe.current.focus(e)}}),[ln]);var on=m.useMemo((function(){return u(Qe).sort((function(e,n){return e-n}))}),[Qe]),cn=m.useMemo((function(){return Me?[on[0],on[on.length-1]]:[Ne,on[0]]}),[on,Me,Ne]),sn=a(cn,2),dn=sn[0],fn=sn[1];m.useImperativeHandle(n,(function(){return{focus:function(){xe.current.focus(0)},blur:function(){var e,n=document.activeElement;null!==(e=ye.current)&&void 0!==e&&e.contains(n)&&(null==n||n.blur())}}})),m.useEffect((function(){L&&xe.current.focus(0)}),[]);var vn=m.useMemo((function(){return{min:Ne,max:He,direction:Ce,disabled:S,keyboard:N,step:Ie,included:te,includedStart:dn,includedEnd:fn,range:Me,tabIndex:ge,ariaLabelForHandle:he,ariaLabelledByForHandle:pe,ariaValueTextFormatterForHandle:be,styles:C||{},classNames:b||{}}}),[Ne,He,Ce,S,N,Ie,te,dn,fn,Me,ge,he,pe,be,C,b]);return m.createElement(x.Provider,{value:vn},m.createElement("div",{ref:ye,className:o(g,h,t(t(t(t({},"".concat(g,"-disabled"),S),"".concat(g,"-vertical"),ee),"".concat(g,"-horizontal"),!ee),"".concat(g,"-with-marks"),Re.length)),style:p,onMouseDown:function(e){e.preventDefault();var n,t=ye.current.getBoundingClientRect(),r=t.width,a=t.height,u=t.left,l=t.top,o=t.bottom,c=t.right,i=e.clientX,s=e.clientY;switch(Ce){case"btt":n=(o-s)/a;break;case"ttb":n=(s-l)/a;break;case"rtl":n=(c-i)/r;break;default:n=(i-u)/r}$e(Te(Ne+n*(He-Ne)),e)},id:E},m.createElement("div",{className:o("".concat(g,"-rail"),null==b?void 0:b.rail),style:r(r({},le),null==C?void 0:C.rail)}),!1!==ve&&m.createElement(H,{prefixCls:g,style:ae,values:Ye,startPoint:re,onStartMove:an?un:void 0}),m.createElement(w,{prefixCls:g,marks:Re,dots:se,style:oe,activeStyle:ce}),m.createElement(M,{ref:xe,prefixCls:g,style:ue,values:Qe,draggingIndex:ze,draggingDelete:Je,onStartMove:un,onOffsetChange:function(e,n){if(!S){var t=Ae(Ye,e,n);null==W||W(Ge(Ye)),Ue(t.values),rn(t.value)}},onFocus:R,onBlur:P,handleRender:de,activeHandleRender:fe,onChangeComplete:Ke,onDelete:Se?function(e){if(!(S||!Se||Ye.length<=Fe)){var n=u(Ye);n.splice(e,1),null==W||W(Ge(n)),Ue(n);var t=Math.max(0,e-1);xe.current.hideHelp(),xe.current.focus(t)}}:void 0}),m.createElement(D,{prefixCls:g,marks:Re,onClick:$e})))}));export{L as S,y as U};

import{r as t}from"./react.DlfX74Oz.js";import{c as e}from"./classnames.BmZ8OyLm.js";import{c as r,d as o,e as a,k as c,g as n}from"./@babel.BGkJ1U9u.js";import{c as s}from"./rc-util.DIscDwjl.js";var i={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},l=0,u=s();const f=function(e){var o=t.useState(),a=r(o,2),c=a[0],n=a[1];return t.useEffect((function(){var t;n("rc_progress_".concat((u?(t=l,l+=1):t="TEST_OR_SSR",t)))}),[]),e||c};var p=function(e){var r=e.bg,o=e.children;return t.createElement("div",{style:{width:"100%",height:"100%",background:r}},o)};function d(t,e){return Object.keys(t).map((function(r){var o=parseFloat(r),a="".concat(Math.floor(o*e),"%");return"".concat(t[r]," ").concat(a)}))}var g=t.forwardRef((function(e,r){var a=e.prefixCls,c=e.color,n=e.gradientId,s=e.radius,i=e.style,l=e.ptg,u=e.strokeLinecap,f=e.strokeWidth,g=e.size,m=e.gapDegree,k=c&&"object"===o(c),h=k?"#FFF":void 0,v=g/2,y=t.createElement("circle",{className:"".concat(a,"-circle-path"),r:s,cx:v,cy:v,stroke:h,strokeLinecap:u,strokeWidth:f,opacity:0===l?0:1,style:i,ref:r});if(!k)return y;var b="".concat(n,"-conic"),E=m?"".concat(180+m/2,"deg"):"0deg",x=d(c,(360-m)/360),D=d(c,1),j="conic-gradient(from ".concat(E,", ").concat(x.join(", "),")"),C="linear-gradient(to ".concat(m?"bottom":"top",", ").concat(D.join(", "),")");return t.createElement(t.Fragment,null,t.createElement("mask",{id:b},y),t.createElement("foreignObject",{x:0,y:0,width:g,height:g,mask:"url(#".concat(b,")")},t.createElement(p,{bg:C},t.createElement(p,{bg:j}))))})),m=100,k=function(t,e,r,o,a,c,n,s,i,l){var u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,f=r/100*360*((360-c)/360),p=0===c?0:{bottom:0,top:180,left:90,right:-90}[n],d=(100-o)/100*e;"round"===i&&100!==o&&(d+=l/2)>=e&&(d=e-.01);return{stroke:"string"==typeof s?s:void 0,strokeDasharray:"".concat(e,"px ").concat(t),strokeDashoffset:d+u,transform:"rotate(".concat(a+f+p,"deg)"),transformOrigin:"".concat(50,"px ").concat(50,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},h=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function v(t){var e=null!=t?t:[];return Array.isArray(e)?e:[e]}var y=function(r){var s,l,u,p,d,y=a(a({},i),r),b=y.id,E=y.prefixCls,x=y.steps,D=y.strokeWidth,j=y.trailWidth,C=y.gapDegree,W=void 0===C?0:C,w=y.gapPosition,L=y.trailColor,N=y.strokeLinecap,F=y.style,O=y.className,R=y.strokeColor,P=y.percent,S=c(y,h),_=f(b),A="".concat(_,"-gradient"),I=50-D/2,M=2*Math.PI*I,z=W>0?90+W/2:-90,T=M*((360-W)/360),B="object"===o(x)?x:{count:x,gap:2},q=B.count,G=B.gap,H=v(P),J=v(R),K=J.find((function(t){return t&&"object"===o(t)})),Q=K&&"object"===o(K)?"butt":N,U=k(M,T,0,100,z,W,w,L,Q,D),V=(s=t.useRef([]),l=t.useRef(null),t.useEffect((function(){var t=Date.now(),e=!1;s.current.forEach((function(r){if(r){e=!0;var o=r.style;o.transitionDuration=".3s, .3s, .3s, .06s",l.current&&t-l.current<100&&(o.transitionDuration="0s, 0s")}})),e&&(l.current=Date.now())})),s.current);return t.createElement("svg",n({className:e("".concat(E,"-circle"),O),viewBox:"0 0 ".concat(m," ").concat(m),style:F,id:b,role:"presentation"},S),!q&&t.createElement("circle",{className:"".concat(E,"-circle-trail"),r:I,cx:50,cy:50,stroke:L,strokeLinecap:Q,strokeWidth:j||D,style:U}),q?(u=Math.round(q*(H[0]/100)),p=100/q,d=0,new Array(q).fill(null).map((function(e,r){var a=r<=u-1?J[0]:L,c=a&&"object"===o(a)?"url(#".concat(A,")"):void 0,n=k(M,T,d,p,z,W,w,a,"butt",D,G);return d+=100*(T-n.strokeDashoffset+G)/T,t.createElement("circle",{key:r,className:"".concat(E,"-circle-path"),r:I,cx:50,cy:50,stroke:c,strokeWidth:D,opacity:1,style:n,ref:function(t){V[r]=t}})}))):function(){var e=0;return H.map((function(r,o){var a=J[o]||J[J.length-1],c=k(M,T,e,r,z,W,w,a,Q,D);return e+=r,t.createElement(g,{key:o,color:a,ptg:r,radius:I,prefixCls:E,gradientId:A,style:c,strokeLinecap:Q,strokeWidth:D,gapDegree:W,ref:function(t){V[o]=t},size:m})})).reverse()}())};export{y as C};

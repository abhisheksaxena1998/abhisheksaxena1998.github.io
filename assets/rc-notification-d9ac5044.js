import{c as H,g as $,b as ee,d as he,e as O,f as j,h as ke}from"./@babel-1e99e06a.js";import{r,a as G}from"./react-d998b26c.js";import{r as xe}from"./react-dom-890fecd1.js";import{c as q}from"./classnames-325479d5.js";import{a as Ee}from"./rc-motion-48ec0384.js";import{K as Se}from"./rc-util-cc63f890.js";var Re=r.forwardRef(function(e,i){var l=e.prefixCls,f=e.style,s=e.className,u=e.duration,C=u===void 0?4.5:u,p=e.eventKey,R=e.content,L=e.closable,_=e.closeIcon,P=_===void 0?"x":_,d=e.props,y=e.onClick,v=e.onNoticeClose,b=e.times,h=e.hovering,m=r.useState(!1),M=H(m,2),E=M[0],k=M[1],N=h||E,x=function(){v(p)},c=function(t){(t.key==="Enter"||t.code==="Enter"||t.keyCode===Se.ENTER)&&x()};r.useEffect(function(){if(!N&&C>0){var n=setTimeout(function(){x()},C*1e3);return function(){clearTimeout(n)}}},[C,N,b]);var o="".concat(l,"-notice");return r.createElement("div",$({},d,{ref:i,className:q(o,s,ee({},"".concat(o,"-closable"),L)),style:f,onMouseEnter:function(t){var a;k(!0),d==null||(a=d.onMouseEnter)===null||a===void 0||a.call(d,t)},onMouseLeave:function(t){var a;k(!1),d==null||(a=d.onMouseLeave)===null||a===void 0||a.call(d,t)},onClick:y}),r.createElement("div",{className:"".concat(o,"-content")},R),L&&r.createElement("a",{tabIndex:0,className:"".concat(o,"-close"),onKeyDown:c,onClick:function(t){t.preventDefault(),t.stopPropagation(),x()}},P))}),le=G.createContext({}),we=function(i){var l=i.children,f=i.classNames;return G.createElement(le.Provider,{value:{classNames:f}},l)},ie=8,re=3,ce=16,Ae=function(i){var l={offset:ie,threshold:re,gap:ce};if(i&&he(i)==="object"){var f,s,u;l.offset=(f=i.offset)!==null&&f!==void 0?f:ie,l.threshold=(s=i.threshold)!==null&&s!==void 0?s:re,l.gap=(u=i.gap)!==null&&u!==void 0?u:ce}return[!!i,l]},Le=function(i){var l,f=i.configList,s=i.placement,u=i.prefixCls,C=i.className,p=i.style,R=i.motion,L=i.onAllNoticeRemoved,_=i.onNoticeClose,P=i.stack,d=r.useContext(le),y=d.classNames,v=r.useRef({}),b=r.useState(null),h=H(b,2),m=h[0],M=h[1],E=r.useState([]),k=H(E,2),N=k[0],x=k[1],c=f.map(function(g){return{config:g,key:g.key}}),o=Ae(P),n=H(o,2),t=n[0],a=n[1],S=a.offset,K=a.threshold,w=a.gap,D=t&&(N.length>0||c.length<=K),ue=typeof R=="function"?R(s):R;return r.useEffect(function(){t&&N.length>1&&x(function(g){return g.filter(function(I){return c.some(function(F){var z=F.key;return I===z})})})},[N,c,t]),r.useEffect(function(){var g;if(t&&v.current[(g=c[c.length-1])===null||g===void 0?void 0:g.key]){var I;M(v.current[(I=c[c.length-1])===null||I===void 0?void 0:I.key])}},[c,t]),G.createElement(Ee,$({key:s,className:q(u,"".concat(u,"-").concat(s),y==null?void 0:y.list,C,(l={},ee(l,"".concat(u,"-stack"),!!t),ee(l,"".concat(u,"-stack-expanded"),D),l)),style:p,keys:c,motionAppear:!0},ue,{onAllRemoved:function(){L(s)}}),function(g,I){var F=g.config,z=g.className,fe=g.style,ve=g.index,te=F,A=te.key,de=te.times,ne=F,me=ne.className,Ce=ne.style,B=c.findIndex(function(Q){return Q.key===A}),U={};if(t){var W=c.length-1-(B>-1?B:ve-1),oe=s==="top"||s==="bottom"?"-50%":"0";if(W>0){var J,V,X;U.height=D?(J=v.current[A])===null||J===void 0?void 0:J.offsetHeight:m==null?void 0:m.offsetHeight;for(var ae=0,Y=0;Y<W;Y++){var Z;ae+=((Z=v.current[c[c.length-1-Y].key])===null||Z===void 0?void 0:Z.offsetHeight)+w}var ye=(D?ae:W*S)*(s.startsWith("top")?1:-1),Ne=!D&&m!==null&&m!==void 0&&m.offsetWidth&&(V=v.current[A])!==null&&V!==void 0&&V.offsetWidth?((m==null?void 0:m.offsetWidth)-S*2*(W<3?W:3))/((X=v.current[A])===null||X===void 0?void 0:X.offsetWidth):1;U.transform="translate3d(".concat(oe,", ").concat(ye,"px, 0) scaleX(").concat(Ne,")")}else U.transform="translate3d(".concat(oe,", 0, 0)")}return G.createElement("div",{ref:I,className:q("".concat(u,"-notice-wrapper"),z),style:O(O(O({},fe),U),Ce),onMouseEnter:function(){return x(function(T){return T.includes(A)?T:[].concat(j(T),[A])})},onMouseLeave:function(){return x(function(T){return T.filter(function(ge){return ge!==A})})}},G.createElement(Re,$({},F,{ref:function(T){B>-1?v.current[A]=T:delete v.current[A]},prefixCls:u,className:q(me,y==null?void 0:y.notice),times:de,key:A,eventKey:A,onNoticeClose:_,hovering:t&&N.length>0})))})},pe=r.forwardRef(function(e,i){var l=e.prefixCls,f=l===void 0?"rc-notification":l,s=e.container,u=e.motion,C=e.maxCount,p=e.className,R=e.style,L=e.onAllRemoved,_=e.stack,P=e.renderNotifications,d=r.useState([]),y=H(d,2),v=y[0],b=y[1],h=function(n){var t,a=v.find(function(S){return S.key===n});a==null||(t=a.onClose)===null||t===void 0||t.call(a),b(function(S){return S.filter(function(K){return K.key!==n})})};r.useImperativeHandle(i,function(){return{open:function(n){b(function(t){var a=j(t),S=a.findIndex(function(D){return D.key===n.key}),K=O({},n);if(S>=0){var w;K.times=(((w=t[S])===null||w===void 0?void 0:w.times)||0)+1,a[S]=K}else K.times=0,a.push(K);return C>0&&a.length>C&&(a=a.slice(-C)),a})},close:function(n){h(n)},destroy:function(){b([])}}});var m=r.useState({}),M=H(m,2),E=M[0],k=M[1];r.useEffect(function(){var o={};v.forEach(function(n){var t=n.placement,a=t===void 0?"topRight":t;a&&(o[a]=o[a]||[],o[a].push(n))}),Object.keys(E).forEach(function(n){o[n]=o[n]||[]}),k(o)},[v]);var N=function(n){k(function(t){var a=O({},t),S=a[n]||[];return S.length||delete a[n],a})},x=r.useRef(!1);if(r.useEffect(function(){Object.keys(E).length>0?x.current=!0:x.current&&(L==null||L(),x.current=!1)},[E]),!s)return null;var c=Object.keys(E);return xe.createPortal(r.createElement(r.Fragment,null,c.map(function(o){var n=E[o],t=r.createElement(Le,{key:o,configList:n,placement:o,prefixCls:f,className:p==null?void 0:p(o),style:R==null?void 0:R(o),motion:u,onNoticeClose:h,onAllNoticeRemoved:N,stack:_});return P?P(t,{prefixCls:f,key:o}):t})),s)}),be=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Me=function(){return document.body},se=0;function _e(){for(var e={},i=arguments.length,l=new Array(i),f=0;f<i;f++)l[f]=arguments[f];return l.forEach(function(s){s&&Object.keys(s).forEach(function(u){var C=s[u];C!==void 0&&(e[u]=C)})}),e}function Fe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.getContainer,l=i===void 0?Me:i,f=e.motion,s=e.prefixCls,u=e.maxCount,C=e.className,p=e.style,R=e.onAllRemoved,L=e.stack,_=e.renderNotifications,P=ke(e,be),d=r.useState(),y=H(d,2),v=y[0],b=y[1],h=r.useRef(),m=r.createElement(pe,{container:v,ref:h,prefixCls:s,motion:f,maxCount:u,className:C,style:p,onAllRemoved:R,stack:L,renderNotifications:_}),M=r.useState([]),E=H(M,2),k=E[0],N=E[1],x=r.useMemo(function(){return{open:function(o){var n=_e(P,o);(n.key===null||n.key===void 0)&&(n.key="rc-notification-".concat(se),se+=1),N(function(t){return[].concat(j(t),[{type:"open",config:n}])})},close:function(o){N(function(n){return[].concat(j(n),[{type:"close",key:o}])})},destroy:function(){N(function(o){return[].concat(j(o),[{type:"destroy"}])})}}},[]);return r.useEffect(function(){b(l())}),r.useEffect(function(){h.current&&k.length&&(k.forEach(function(c){switch(c.type){case"open":h.current.open(c.config);break;case"close":h.current.close(c.key);break;case"destroy":h.current.destroy();break}}),N(function(c){return c.filter(function(o){return!k.includes(o)})}))},[k]),[x,m]}export{Re as N,we as a,Fe as u};

import{h as e,i as t,a as n,_ as r,k as o,e as i,d as a,c as u,b as l,g as s,f as c,j as f,o as d,p as h}from"./@babel.BGkJ1U9u.js";import{a as v,r as m}from"./react.DlfX74Oz.js";import{F as g}from"./@ant-design.BMCzSUv0.js";import{c as p}from"./classnames.BmZ8OyLm.js";import{d as y,e as E,c as b,u as w,f as C,a as N,r as x,s as M,h as R,i as k,j as S,k as A,l as P,g as F,m as I,n as O,o as L,p as D}from"./rc-util.DIscDwjl.js";import{r as z}from"./react-dom.tsMZo23m.js";import{R as _}from"./rc-resize-observer.onB48-vm.js";import{C as q}from"./rc-motion.BpKOU8X5.js";var T=["b"],B=["v"],H=function(e){return Math.round(Number(e||0))},V=function(){e(l,g);var u=t(l);function l(e){return n(this,l),u.call(this,function(e){if(e instanceof g)return e;if(e&&"object"===a(e)&&"h"in e&&"b"in e){var t=e,n=t.b,r=o(t,T);return i(i({},r),{},{v:n})}return"string"==typeof e&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e}(e))}return r(l,[{key:"toHsbString",value:function(){var e=this.toHsb(),t=H(100*e.s),n=H(100*e.b),r=H(e.h),o=e.a,i="hsb(".concat(r,", ").concat(t,"%, ").concat(n,"%)"),a="hsba(".concat(r,", ").concat(t,"%, ").concat(n,"%, ").concat(o.toFixed(0===o?0:2),")");return 1===o?i:a}},{key:"toHsb",value:function(){var e=this.toHsv(),t=e.v,n=o(e,B);return i(i({},n),{},{b:t,a:this.a})}}]),l}(),j=function(e){return e instanceof V?e:new V(e)},Y=j("#1677ff"),X=function(e){var t=e.offset,n=e.targetRef,r=e.containerRef,o=e.color,a=e.type,u=r.current.getBoundingClientRect(),l=u.width,s=u.height,c=n.current.getBoundingClientRect(),f=c.width/2,d=c.height/2,h=(t.x+f)/l,v=1-(t.y+d)/s,m=o.toHsb(),g=h,p=(t.x+f)/l*360;if(a)switch(a){case"hue":return j(i(i({},m),{},{h:p<=0?0:p}));case"alpha":return j(i(i({},m),{},{a:g<=0?0:g}))}return j({h:m.h,s:h<=0?0:h,b:v>=1?1:v,a:m.a})},U=function(e,t){var n=e.toHsb();switch(t){case"hue":return{x:n.h/360*100,y:50};case"alpha":return{x:100*e.a,y:50};default:return{x:100*n.s,y:100*(1-n.b)}}},W=function(e){var t=e.color,n=e.prefixCls,r=e.className,o=e.style,i=e.onClick,a="".concat(n,"-color-block");return v.createElement("div",{className:p(a,r),style:o,onClick:i},v.createElement("div",{className:"".concat(a,"-inner"),style:{background:t}}))};function G(e){var t=e.targetRef,n=e.containerRef,r=e.direction,o=e.onDragChange,i=e.onDragChangeComplete,a=e.calculate,l=e.color,s=e.disabledDrag,c=m.useState({x:0,y:0}),f=u(c,2),d=f[0],h=f[1],v=m.useRef(null),g=m.useRef(null);m.useEffect((function(){h(a())}),[l]),m.useEffect((function(){return function(){document.removeEventListener("mousemove",v.current),document.removeEventListener("mouseup",g.current),document.removeEventListener("touchmove",v.current),document.removeEventListener("touchend",g.current),v.current=null,g.current=null}}),[]);var p=function(e){var i=function(e){var t="touches"in e?e.touches[0]:e,n=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,r=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:t.pageX-n,pageY:t.pageY-r}}(e),a=i.pageX,u=i.pageY,l=n.current.getBoundingClientRect(),s=l.x,c=l.y,f=l.width,h=l.height,v=t.current.getBoundingClientRect(),m=v.width,g=v.height,p=m/2,y=g/2,E=Math.max(0,Math.min(a-s,f))-p,b=Math.max(0,Math.min(u-c,h))-y,w={x:E,y:"x"===r?d.y:b};if(0===m&&0===g||m!==g)return!1;null==o||o(w)},y=function(e){e.preventDefault(),p(e)},E=function(e){e.preventDefault(),document.removeEventListener("mousemove",v.current),document.removeEventListener("mouseup",g.current),document.removeEventListener("touchmove",v.current),document.removeEventListener("touchend",g.current),v.current=null,g.current=null,null==i||i()};return[d,function(e){document.removeEventListener("mousemove",v.current),document.removeEventListener("mouseup",g.current),s||(p(e),document.addEventListener("mousemove",y),document.addEventListener("mouseup",E),document.addEventListener("touchmove",y),document.addEventListener("touchend",E),v.current=y,g.current=E)}]}var $=function(e){var t=e.size,n=void 0===t?"default":t,r=e.color,o=e.prefixCls;return v.createElement("div",{className:p("".concat(o,"-handler"),l({},"".concat(o,"-handler-sm"),"small"===n)),style:{backgroundColor:r}})},J=function(e){var t=e.children,n=e.style,r=e.prefixCls;return v.createElement("div",{className:"".concat(r,"-palette"),style:i({position:"relative"},n)},t)},K=m.forwardRef((function(e,t){var n=e.children,r=e.x,o=e.y;return v.createElement("div",{ref:t,style:{position:"absolute",left:"".concat(r,"%"),top:"".concat(o,"%"),zIndex:1,transform:"translate(-50%, -50%)"}},n)})),Q=function(e){var t=e.color,n=e.onChange,r=e.prefixCls,o=e.onChangeComplete,i=e.disabled,a=m.useRef(),l=m.useRef(),s=m.useRef(t),c=y((function(e){var r=X({offset:e,targetRef:l,containerRef:a,color:t});s.current=r,n(r)})),f=G({color:t,containerRef:a,targetRef:l,calculate:function(){return U(t)},onDragChange:c,onDragChangeComplete:function(){return null==o?void 0:o(s.current)},disabledDrag:i}),d=u(f,2),h=d[0],g=d[1];return v.createElement("div",{ref:a,className:"".concat(r,"-select"),onMouseDown:g,onTouchStart:g},v.createElement(J,{prefixCls:r},v.createElement(K,{x:h.x,y:h.y,ref:l},v.createElement($,{color:t.toRgbString(),prefixCls:r})),v.createElement("div",{className:"".concat(r,"-saturation"),style:{backgroundColor:"hsl(".concat(t.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},Z=function(e){var t=e.colors,n=e.children,r=e.direction,o=void 0===r?"to right":r,i=e.type,a=e.prefixCls,u=m.useMemo((function(){return t.map((function(e,n){var r=j(e);return"alpha"===i&&n===t.length-1&&(r=new V(r.setA(1))),r.toRgbString()})).join(",")}),[t,i]);return v.createElement("div",{className:"".concat(a,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(o,", ").concat(u,")")}},n)},ee=function(e){var t=e.prefixCls,n=e.colors,r=e.disabled,o=e.onChange,i=e.onChangeComplete,a=e.color,l=e.type,s=m.useRef(),c=m.useRef(),f=m.useRef(a),d=function(e){return"hue"===l?e.getHue():100*e.a},h=y((function(e){var t=X({offset:e,targetRef:c,containerRef:s,color:a,type:l});f.current=t,o(d(t))})),g=G({color:a,targetRef:c,containerRef:s,calculate:function(){return U(a,l)},onDragChange:h,onDragChangeComplete:function(){i(d(f.current))},direction:"x",disabledDrag:r}),E=u(g,2),b=E[0],w=E[1],C=v.useMemo((function(){if("hue"===l){var e=a.toHsb();return e.s=1,e.b=1,e.a=1,new V(e)}return a}),[a,l]),N=v.useMemo((function(){return n.map((function(e){return"".concat(e.color," ").concat(e.percent,"%")}))}),[n]);return v.createElement("div",{ref:s,className:p("".concat(t,"-slider"),"".concat(t,"-slider-").concat(l)),onMouseDown:w,onTouchStart:w},v.createElement(J,{prefixCls:t},v.createElement(K,{x:b.x,y:b.y,ref:c},v.createElement($,{size:"small",color:C.toHexString(),prefixCls:t})),v.createElement(Z,{colors:N,type:l,prefixCls:t})))};var te=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],ne=m.forwardRef((function(e,t){var n=e.value,r=e.defaultValue,o=e.prefixCls,i=void 0===o?"rc-color-picker":o,a=e.onChange,c=e.onChangeComplete,f=e.className,d=e.style,h=e.panelRender,g=e.disabledAlpha,y=void 0!==g&&g,b=e.disabled,w=void 0!==b&&b,C=function(e){return m.useMemo((function(){return[(e||{}).slider||ee]}),[e])}(e.components),N=u(C,1)[0],x=function(e,t){var n=E(e,{value:t}),r=u(n,2),o=r[0],i=r[1];return[m.useMemo((function(){return j(o)}),[o]),i]}(r||Y,n),M=u(x,2),R=M[0],k=M[1],S=m.useMemo((function(){return R.setA(1).toRgbString()}),[R]),A=function(e,t){n||k(e),null==a||a(e,t)},P=function(e){return new V(R.setHue(e))},F=function(e){return new V(R.setA(e/100))},I=p("".concat(i,"-panel"),f,l({},"".concat(i,"-panel-disabled"),w)),O={prefixCls:i,disabled:w,color:R},L=v.createElement(v.Fragment,null,v.createElement(Q,s({onChange:A},O,{onChangeComplete:c})),v.createElement("div",{className:"".concat(i,"-slider-container")},v.createElement("div",{className:p("".concat(i,"-slider-group"),l({},"".concat(i,"-slider-group-disabled-alpha"),y))},v.createElement(N,s({},O,{type:"hue",colors:te,min:0,max:359,value:R.getHue(),onChange:function(e){A(P(e),{type:"hue",value:e})},onChangeComplete:function(e){c&&c(P(e))}})),!y&&v.createElement(N,s({},O,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:S}],min:0,max:100,value:100*R.a,onChange:function(e){A(F(e),{type:"alpha",value:e})},onChangeComplete:function(e){c&&c(F(e))}}))),v.createElement(W,{color:R.toRgbString(),prefixCls:i})));return v.createElement("div",{className:I,style:d,ref:t},"function"==typeof h?h(L):L)})),re=m.createContext(null),oe=[];var ie="rc-util-locker-".concat(Date.now()),ae=0;function ue(e){var t=!!e,n=m.useState((function(){return ae+=1,"".concat(ie,"_").concat(ae)})),r=u(n,1)[0];w((function(){if(t){var e=C(document.body).width,n=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;N("\nhtml body {\n  overflow-y: hidden;\n  ".concat(n?"width: calc(100% - ".concat(e,"px);"):"","\n}"),r)}else x(r);return function(){x(r)}}),[t,r])}var le=function(e){return!1!==e&&(b()&&e?"string"==typeof e?document.querySelector(e):"function"==typeof e?e():e:null)},se=m.forwardRef((function(e,t){var n=e.open,r=e.autoLock,o=e.getContainer;e.debug;var i=e.autoDestroy,a=void 0===i||i,l=e.children,s=m.useState(n),f=u(s,2),d=f[0],h=f[1],v=d||n;m.useEffect((function(){(a||n)&&h(n)}),[n,a]);var g=m.useState((function(){return le(o)})),p=u(g,2),y=p[0],E=p[1];m.useEffect((function(){var e=le(o);E(null!=e?e:null)}));var C=function(e){var t=m.useState((function(){return b()?document.createElement("div"):null})),n=u(t,1)[0],r=m.useRef(!1),o=m.useContext(re),i=m.useState(oe),a=u(i,2),l=a[0],s=a[1],f=o||(r.current?void 0:function(e){s((function(t){return[e].concat(c(t))}))});function d(){n.parentElement||document.body.appendChild(n),r.current=!0}function h(){var e;null===(e=n.parentElement)||void 0===e||e.removeChild(n),r.current=!1}return w((function(){return e?o?o(d):d():h(),h}),[e]),w((function(){l.length&&(l.forEach((function(e){return e()})),s(oe))}),[l]),[n,f]}(v&&!y),N=u(C,2),x=N[0],k=N[1],S=null!=y?y:x;ue(r&&n&&b()&&(S===x||S===document.body));var A=null;l&&M(l)&&t&&(A=l.ref);var P=R(A,t);if(!v||!b()||void 0===y)return null;var F=!1===S||!1,I=l;return t&&(I=m.cloneElement(l,{ref:P})),m.createElement(re.Provider,{value:k},F?I:z.createPortal(I,S))}));function ce(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var fe=ce(),de=/%[sdj%]/g,he=function(){};function ve(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function me(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i=n.length;return"function"==typeof e?e.apply(null,n):"string"==typeof e?e.replace(de,(function(e){if("%%"===e)return"%";if(o>=i)return e;switch(e){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch(t){return"[Circular]"}break;default:return e}})):e}function ge(e,t){return null==e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!=typeof e||e))}function pe(e,t,n){var r=0,o=e.length;!function i(a){if(a&&a.length)n(a);else{var u=r;r+=1,u<o?t(e[u],i):n([])}}([])}var ye=function(o){e(a,o);var i=t(a);function a(e,t){var r;return n(this,a),r=i.call(this,"Async Validation Error"),l(f(r),"errors",void 0),l(f(r),"fields",void 0),r.errors=e,r.fields=t,r}return r(a)}(d(Error));function Ee(e,t,n,r,o){if(t.first){var i=new Promise((function(t,i){var a=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,c(e[n]||[]))})),t}(e);pe(a,n,(function(e){return r(e),e.length?i(new ye(e,ve(e))):t(o)}))}));return i.catch((function(e){return e})),i}var a=!0===t.firstFields?Object.keys(e):t.firstFields||[],u=Object.keys(e),l=u.length,s=0,f=[],d=new Promise((function(t,i){var d=function(e){if(f.push.apply(f,e),++s===l)return r(f),f.length?i(new ye(f,ve(f))):t(o)};u.length||(r(f),t(o)),u.forEach((function(t){var r=e[t];-1!==a.indexOf(t)?pe(r,n,d):function(e,t,n){var r=[],o=0,i=e.length;function a(e){r.push.apply(r,c(e||[])),++o===i&&n(r)}e.forEach((function(e){t(e,a)}))}(r,n,d)}))}));return d.catch((function(e){return e})),d}function be(e,t){return function(n){var r,o;return r=e.fullFields?function(e,t){for(var n=e,r=0;r<t.length;r++){if(null==n)return n;n=n[t[r]]}return n}(t,e.fullFields):t[n.field||e.fullField],(o=n)&&void 0!==o.message?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:"function"==typeof n?n():n,fieldValue:r,field:n.field||e.fullField}}}function we(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===a(r)&&"object"===a(e[n])?e[n]=i(i({},e[n]),r):e[n]=r}return e}var Ce,Ne="enum",xe=function(e,t,n,r,o,i){!e.required||n.hasOwnProperty(e.field)&&!ge(t,i||e.type)||r.push(me(o.messages.required,e.fullField))};var Me=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,Re=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,ke={integer:function(e){return ke.number(e)&&parseInt(e,10)===e},float:function(e){return ke.number(e)&&!ke.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===a(e)&&!ke.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&e.length<=320&&!!e.match(Me)},url:function(e){return"string"==typeof e&&e.length<=2048&&!!e.match(function(){if(Ce)return Ce;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",o=["(?:".concat(r,":){7}(?:").concat(r,"|:)"),"(?:".concat(r,":){6}(?:").concat(n,"|:").concat(r,"|:)"),"(?:".concat(r,":){5}(?::").concat(n,"|(?::").concat(r,"){1,2}|:)"),"(?:".concat(r,":){4}(?:(?::").concat(r,"){0,1}:").concat(n,"|(?::").concat(r,"){1,3}|:)"),"(?:".concat(r,":){3}(?:(?::").concat(r,"){0,2}:").concat(n,"|(?::").concat(r,"){1,4}|:)"),"(?:".concat(r,":){2}(?:(?::").concat(r,"){0,3}:").concat(n,"|(?::").concat(r,"){1,5}|:)"),"(?:".concat(r,":){1}(?:(?::").concat(r,"){0,4}:").concat(n,"|(?::").concat(r,"){1,6}|:)"),"(?::(?:(?::".concat(r,"){0,5}:").concat(n,"|(?::").concat(r,"){1,7}|:))")],i="(?:".concat(o.join("|"),")").concat("(?:%[0-9a-zA-Z]{1,})?"),a=new RegExp("(?:^".concat(n,"$)|(?:^").concat(i,"$)")),u=new RegExp("^".concat(n,"$")),l=new RegExp("^".concat(i,"$")),s=function(e){return e&&e.exact?a:new RegExp("(?:".concat(t(e)).concat(n).concat(t(e),")|(?:").concat(t(e)).concat(i).concat(t(e),")"),"g")};s.v4=function(e){return e&&e.exact?u:new RegExp("".concat(t(e)).concat(n).concat(t(e)),"g")},s.v6=function(e){return e&&e.exact?l:new RegExp("".concat(t(e)).concat(i).concat(t(e)),"g")};var c=s.v4().source,f=s.v6().source,d="(?:".concat("(?:(?:[a-z]+:)?//)","|www\\.)").concat("(?:\\S+(?::\\S*)?@)?","(?:localhost|").concat(c,"|").concat(f,"|").concat("(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)").concat("(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*").concat("(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",")").concat("(?::\\d{2,5})?").concat('(?:[/?#][^\\s"]*)?');return Ce=new RegExp("(?:^".concat(d,"$)"),"i")}())},hex:function(e){return"string"==typeof e&&!!e.match(Re)}};const Se={required:xe,whitespace:function(e,t,n,r,o){(/^\s+$/.test(t)||""===t)&&r.push(me(o.messages.whitespace,e.fullField))},type:function(e,t,n,r,o){if(e.required&&void 0===t)xe(e,t,n,r,o);else{var i=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(i)>-1?ke[i](t)||r.push(me(o.messages.types[i],e.fullField,e.type)):i&&a(t)!==e.type&&r.push(me(o.messages.types[i],e.fullField,e.type))}},range:function(e,t,n,r,o){var i="number"==typeof e.len,a="number"==typeof e.min,u="number"==typeof e.max,l=t,s=null,c="number"==typeof t,f="string"==typeof t,d=Array.isArray(t);if(c?s="number":f?s="string":d&&(s="array"),!s)return!1;d&&(l=t.length),f&&(l=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?l!==e.len&&r.push(me(o.messages[s].len,e.fullField,e.len)):a&&!u&&l<e.min?r.push(me(o.messages[s].min,e.fullField,e.min)):u&&!a&&l>e.max?r.push(me(o.messages[s].max,e.fullField,e.max)):a&&u&&(l<e.min||l>e.max)&&r.push(me(o.messages[s].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,o){e[Ne]=Array.isArray(e[Ne])?e[Ne]:[],-1===e[Ne].indexOf(t)&&r.push(me(o.messages[Ne],e.fullField,e[Ne].join(", ")))},pattern:function(e,t,n,r,o){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(me(o.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(me(o.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};var Ae=function(e,t,n,r,o){var i=e.type,a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ge(t,i)&&!e.required)return n();Se.required(e,t,r,a,o,i),ge(t,i)||Se.type(e,t,r,a,o)}n(a)};const Pe={string:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ge(t,"string")&&!e.required)return n();Se.required(e,t,r,i,o,"string"),ge(t,"string")||(Se.type(e,t,r,i,o),Se.range(e,t,r,i,o),Se.pattern(e,t,r,i,o),!0===e.whitespace&&Se.whitespace(e,t,r,i,o))}n(i)},method:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ge(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&Se.type(e,t,r,i,o)}n(i)},number:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),ge(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&(Se.type(e,t,r,i,o),Se.range(e,t,r,i,o))}n(i)},boolean:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ge(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&Se.type(e,t,r,i,o)}n(i)},regexp:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ge(t)&&!e.required)return n();Se.required(e,t,r,i,o),ge(t)||Se.type(e,t,r,i,o)}n(i)},integer:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ge(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&(Se.type(e,t,r,i,o),Se.range(e,t,r,i,o))}n(i)},float:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ge(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&(Se.type(e,t,r,i,o),Se.range(e,t,r,i,o))}n(i)},array:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(null==t&&!e.required)return n();Se.required(e,t,r,i,o,"array"),null!=t&&(Se.type(e,t,r,i,o),Se.range(e,t,r,i,o))}n(i)},object:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ge(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&Se.type(e,t,r,i,o)}n(i)},enum:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ge(t)&&!e.required)return n();Se.required(e,t,r,i,o),void 0!==t&&Se.enum(e,t,r,i,o)}n(i)},pattern:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ge(t,"string")&&!e.required)return n();Se.required(e,t,r,i,o),ge(t,"string")||Se.pattern(e,t,r,i,o)}n(i)},date:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ge(t,"date")&&!e.required)return n();var a;if(Se.required(e,t,r,i,o),!ge(t,"date"))a=t instanceof Date?t:new Date(t),Se.type(e,a,r,i,o),a&&Se.range(e,a.getTime(),r,i,o)}n(i)},url:Ae,hex:Ae,email:Ae,required:function(e,t,n,r,o){var i=[],u=Array.isArray(t)?"array":a(t);Se.required(e,t,r,i,o,u),n(i)},any:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ge(t)&&!e.required)return n();Se.required(e,t,r,i,o)}n(i)}};var Fe=function(){function e(t){n(this,e),l(this,"rules",null),l(this,"_messages",fe),this.define(t)}return r(e,[{key:"define",value:function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==a(e)||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var r=e[n];t.rules[n]=Array.isArray(r)?r:[r]}))}},{key:"messages",value:function(e){return e&&(this._messages=we(ce(),e)),this._messages}},{key:"validate",value:function(t){var n=this,r=t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if("function"==typeof o&&(u=o,o={}),!this.rules||0===Object.keys(this.rules).length)return u&&u(null,r),Promise.resolve(r);if(o.messages){var l=this.messages();l===fe&&(l=ce()),we(l,o.messages),o.messages=l}else o.messages=this.messages();var s={};(o.keys||Object.keys(this.rules)).forEach((function(e){var o=n.rules[e],u=r[e];o.forEach((function(o){var l=o;"function"==typeof l.transform&&(r===t&&(r=i({},r)),null!=(u=r[e]=l.transform(u))&&(l.type=l.type||(Array.isArray(u)?"array":a(u)))),(l="function"==typeof l?{validator:l}:i({},l)).validator=n.getValidationMethod(l),l.validator&&(l.field=e,l.fullField=l.fullField||e,l.type=n.getType(l),s[e]=s[e]||[],s[e].push({rule:l,value:u,source:r,field:e}))}))}));var f={};return Ee(s,o,(function(t,n){var u,l=t.rule,s=!("object"!==l.type&&"array"!==l.type||"object"!==a(l.fields)&&"object"!==a(l.defaultField));function d(e,t){return i(i({},t),{},{fullField:"".concat(l.fullField,".").concat(e),fullFields:l.fullFields?[].concat(c(l.fullFields),[e]):[e]})}function h(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=Array.isArray(a)?a:[a];!o.suppressWarning&&u.length&&e.warning("async-validator:",u),u.length&&void 0!==l.message&&(u=[].concat(l.message));var h=u.map(be(l,r));if(o.first&&h.length)return f[l.field]=1,n(h);if(s){if(l.required&&!t.value)return void 0!==l.message?h=[].concat(l.message).map(be(l,r)):o.error&&(h=[o.error(l,me(o.messages.required,l.field))]),n(h);var v={};l.defaultField&&Object.keys(t.value).map((function(e){v[e]=l.defaultField})),v=i(i({},v),t.rule.fields);var m={};Object.keys(v).forEach((function(e){var t=v[e],n=Array.isArray(t)?t:[t];m[e]=n.map(d.bind(null,e))}));var g=new e(m);g.messages(o.messages),t.rule.options&&(t.rule.options.messages=o.messages,t.rule.options.error=o.error),g.validate(t.value,t.rule.options||o,(function(e){var t=[];h&&h.length&&t.push.apply(t,c(h)),e&&e.length&&t.push.apply(t,c(e)),n(t.length?t:null)}))}else n(h)}if(s=s&&(l.required||!l.required&&t.value),l.field=t.field,l.asyncValidator)u=l.asyncValidator(l,t.value,h,t.source,o);else if(l.validator){try{u=l.validator(l,t.value,h,t.source,o)}catch(g){var v,m;null===(v=(m=console).error)||void 0===v||v.call(m,g),o.suppressValidatorError||setTimeout((function(){throw g}),0),h(g.message)}!0===u?h():!1===u?h("function"==typeof l.message?l.message(l.fullField||l.field):l.message||"".concat(l.fullField||l.field," fails")):u instanceof Array?h(u):u instanceof Error&&h(u.message)}u&&u.then&&u.then((function(){return h()}),(function(e){return h(e)}))}),(function(e){!function(e){for(var t,n,o=[],i={},a=0;a<e.length;a++)t=e[a],n=void 0,Array.isArray(t)?o=(n=o).concat.apply(n,c(t)):o.push(t);o.length?(i=ve(o),u(o,i)):u(null,r)}(e)}),r)}},{key:"getType",value:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!Pe.hasOwnProperty(e.type))throw new Error(me("Unknown rule type %s",e.type));return e.type||"string"}},{key:"getValidationMethod",value:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?Pe.required:Pe[this.getType(e)]||void 0}}]),e}();function Ie(e){var t=e.prefixCls,n=e.align,r=e.arrow,o=e.arrowPos,i=r||{},a=i.className,u=i.content,l=o.x,s=void 0===l?0:l,c=o.y,f=void 0===c?0:c,d=m.useRef();if(!n||!n.points)return null;var h={position:"absolute"};if(!1!==n.autoArrow){var v=n.points[0],g=n.points[1],y=v[0],E=v[1],b=g[0],w=g[1];y!==b&&["t","b"].includes(y)?"t"===y?h.top=0:h.bottom=0:h.top=f,E!==w&&["l","r"].includes(E)?"l"===E?h.left=0:h.right=0:h.left=s}return m.createElement("div",{ref:d,className:p("".concat(t,"-arrow"),a),style:h},u)}function Oe(e){var t=e.prefixCls,n=e.open,r=e.zIndex,o=e.mask,i=e.motion;return o?m.createElement(q,s({},i,{motionAppear:!0,visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return m.createElement("div",{style:{zIndex:r},className:p("".concat(t,"-mask"),n)})})):null}l(Fe,"register",(function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");Pe[e]=t})),l(Fe,"warning",he),l(Fe,"messages",fe),l(Fe,"validators",Pe);var Le=m.memo((function(e){return e.children}),(function(e,t){return t.cache})),De=m.forwardRef((function(e,t){var n=e.popup,r=e.className,o=e.prefixCls,a=e.style,l=e.target,c=e.onVisibleChanged,f=e.open,d=e.keepDom,h=e.fresh,v=e.onClick,g=e.mask,y=e.arrow,E=e.arrowPos,b=e.align,C=e.motion,N=e.maskMotion,x=e.forceRender,M=e.getPopupContainer,R=e.autoDestroy,S=e.portal,A=e.zIndex,P=e.onMouseEnter,F=e.onMouseLeave,I=e.onPointerEnter,O=e.ready,L=e.offsetX,D=e.offsetY,z=e.offsetR,T=e.offsetB,B=e.onAlign,H=e.onPrepare,V=e.stretch,j=e.targetWidth,Y=e.targetHeight,X="function"==typeof n?n():n,U=f||d,W=(null==M?void 0:M.length)>0,G=m.useState(!M||!W),$=u(G,2),J=$[0],K=$[1];if(w((function(){!J&&W&&l&&K(!0)}),[J,W,l]),!J)return null;var Q="auto",Z={left:"-1000vw",top:"-1000vh",right:Q,bottom:Q};if(O||!f){var ee,te=b.points,ne=b.dynamicInset||(null===(ee=b._experimental)||void 0===ee?void 0:ee.dynamicInset),re=ne&&"r"===te[0][1],oe=ne&&"b"===te[0][0];re?(Z.right=z,Z.left=Q):(Z.left=L,Z.right=Q),oe?(Z.bottom=T,Z.top=Q):(Z.top=D,Z.bottom=Q)}var ie={};return V&&(V.includes("height")&&Y?ie.height=Y:V.includes("minHeight")&&Y&&(ie.minHeight=Y),V.includes("width")&&j?ie.width=j:V.includes("minWidth")&&j&&(ie.minWidth=j)),f||(ie.pointerEvents="none"),m.createElement(S,{open:x||U,getContainer:M&&function(){return M(l)},autoDestroy:R},m.createElement(Oe,{prefixCls:o,open:f,zIndex:A,mask:g,motion:N}),m.createElement(_,{onResize:B,disabled:!f},(function(e){return m.createElement(q,s({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:x,leavedClassName:"".concat(o,"-hidden")},C,{onAppearPrepare:H,onEnterPrepare:H,visible:f,onVisibleChanged:function(e){var t;null==C||null===(t=C.onVisibleChanged)||void 0===t||t.call(C,e),c(e)}}),(function(n,u){var l=n.className,s=n.style,c=p(o,l,r);return m.createElement("div",{ref:k(e,t,u),className:c,style:i(i(i(i({"--arrow-x":"".concat(E.x||0,"px"),"--arrow-y":"".concat(E.y||0,"px")},Z),ie),s),{},{boxSizing:"border-box",zIndex:A},a),onMouseEnter:P,onMouseLeave:F,onPointerEnter:I,onClick:v},y&&m.createElement(Ie,{prefixCls:o,arrow:y,arrowPos:E,align:b}),m.createElement(Le,{cache:!f&&!h},X))}))})))})),ze=m.forwardRef((function(e,t){var n=e.children,r=e.getTriggerDOMNode,o=M(n),i=m.useCallback((function(e){S(t,r?r(e):e)}),[r]),a=R(i,n.ref);return o?m.cloneElement(n,{ref:a}):n})),_e=m.createContext(null);function qe(e){return e?Array.isArray(e)?e:[e]:[]}function Te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Be(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function He(e){return e.ownerDocument.defaultView}function Ve(e){for(var t=[],n=null==e?void 0:e.parentElement,r=["hidden","scroll","clip","auto"];n;){var o=He(n).getComputedStyle(n);[o.overflowX,o.overflowY,o.overflow].some((function(e){return r.includes(e)}))&&t.push(n),n=n.parentElement}return t}function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(e)?t:e}function Ye(e){return je(parseFloat(e),0)}function Xe(e,t){var n=i({},e);return(t||[]).forEach((function(e){if(!(e instanceof HTMLBodyElement||e instanceof HTMLHtmlElement)){var t=He(e).getComputedStyle(e),r=t.overflow,o=t.overflowClipMargin,i=t.borderTopWidth,a=t.borderBottomWidth,u=t.borderLeftWidth,l=t.borderRightWidth,s=e.getBoundingClientRect(),c=e.offsetHeight,f=e.clientHeight,d=e.offsetWidth,h=e.clientWidth,v=Ye(i),m=Ye(a),g=Ye(u),p=Ye(l),y=je(Math.round(s.width/d*1e3)/1e3),E=je(Math.round(s.height/c*1e3)/1e3),b=(d-h-g-p)*y,w=(c-f-v-m)*E,C=v*E,N=m*E,x=g*y,M=p*y,R=0,k=0;if("clip"===r){var S=Ye(o);R=S*y,k=S*E}var A=s.x+x-R,P=s.y+C-k,F=A+s.width+2*R-x-M-b,I=P+s.height+2*k-C-N-w;n.left=Math.max(n.left,A),n.top=Math.max(n.top,P),n.right=Math.min(n.right,F),n.bottom=Math.min(n.bottom,I)}})),n}function Ue(e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=t.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(t)}function We(e,t){var n=u(t||[],2),r=n[0],o=n[1];return[Ue(e.width,r),Ue(e.height,o)]}function Ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[e[0],e[1]]}function $e(e,t){var n,r=t[0],o=t[1];return n="t"===r?e.y:"b"===r?e.y+e.height:e.y+e.height/2,{x:"l"===o?e.x:"r"===o?e.x+e.width:e.x+e.width/2,y:n}}function Je(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map((function(e,r){return r===t?n[e]||"c":e})).join("")}var Ke=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];const Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;return m.forwardRef((function(t,n){var r=t.prefixCls,a=void 0===r?"rc-trigger-popup":r,l=t.children,s=t.action,f=void 0===s?"hover":s,d=t.showAction,h=t.hideAction,v=t.popupVisible,g=t.defaultPopupVisible,E=t.onPopupVisibleChange,b=t.afterPopupVisibleChange,C=t.mouseEnterDelay,N=t.mouseLeaveDelay,x=void 0===N?.1:N,M=t.focusDelay,R=t.blurDelay,k=t.mask,S=t.maskClosable,L=void 0===S||S,D=t.getPopupContainer,z=t.forceRender,q=t.autoDestroy,T=t.destroyPopupOnHide,B=t.popup,H=t.popupClassName,V=t.popupStyle,j=t.popupPlacement,Y=t.builtinPlacements,X=void 0===Y?{}:Y,U=t.popupAlign,W=t.zIndex,G=t.stretch,$=t.getPopupClassNameFromAlign,J=t.fresh,K=t.alignPoint,Q=t.onPopupClick,Z=t.onPopupAlign,ee=t.arrow,te=t.popupMotion,ne=t.maskMotion,re=t.popupTransitionName,oe=t.popupAnimation,ie=t.maskTransitionName,ae=t.maskAnimation,ue=t.className,le=t.getTriggerDOMNode,se=o(t,Ke),ce=q||T||!1,fe=m.useState(!1),de=u(fe,2),he=de[0],ve=de[1];w((function(){ve(I())}),[]);var me=m.useRef({}),ge=m.useContext(_e),pe=m.useMemo((function(){return{registerSubPopup:function(e,t){me.current[e]=t,null==ge||ge.registerSubPopup(e,t)}}}),[ge]),ye=O(),Ee=m.useState(null),be=u(Ee,2),we=be[0],Ce=be[1],Ne=m.useRef(null),xe=y((function(e){Ne.current=e,A(e)&&we!==e&&Ce(e),null==ge||ge.registerSubPopup(ye,e)})),Me=m.useState(null),Re=u(Me,2),ke=Re[0],Se=Re[1],Ae=m.useRef(null),Pe=y((function(e){A(e)&&ke!==e&&(Se(e),Ae.current=e)})),Fe=m.Children.only(l),Ie=(null==Fe?void 0:Fe.props)||{},Oe={},Le=y((function(e){var t,n,r=ke;return(null==r?void 0:r.contains(e))||(null===(t=F(r))||void 0===t?void 0:t.host)===e||e===r||(null==we?void 0:we.contains(e))||(null===(n=F(we))||void 0===n?void 0:n.host)===e||e===we||Object.values(me.current).some((function(t){return(null==t?void 0:t.contains(e))||e===t}))})),Ye=Be(a,te,oe,re),Ue=Be(a,ne,ae,ie),Qe=m.useState(g||!1),Ze=u(Qe,2),et=Ze[0],tt=Ze[1],nt=null!=v?v:et,rt=y((function(e){void 0===v&&tt(e)}));w((function(){tt(v||!1)}),[v]);var ot=m.useRef(nt);ot.current=nt;var it=m.useRef([]);it.current=[];var at=y((function(e){var t;rt(e),(null!==(t=it.current[it.current.length-1])&&void 0!==t?t:nt)!==e&&(it.current.push(e),null==E||E(e))})),ut=m.useRef(),lt=function(){clearTimeout(ut.current)},st=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;lt(),0===t?at(e):ut.current=setTimeout((function(){at(e)}),1e3*t)};m.useEffect((function(){return lt}),[]);var ct=m.useState(!1),ft=u(ct,2),dt=ft[0],ht=ft[1];w((function(e){e&&!nt||ht(!0)}),[nt]);var vt=m.useState(null),mt=u(vt,2),gt=mt[0],pt=mt[1],yt=m.useState(null),Et=u(yt,2),bt=Et[0],wt=Et[1],Ct=function(e){wt([e.clientX,e.clientY])},Nt=function(e,t,n,r,o,a,l){var s=m.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[r]||{}}),c=u(s,2),f=c[0],d=c[1],h=m.useRef(0),v=m.useMemo((function(){return t?Ve(t):[]}),[t]),g=m.useRef({});e||(g.current={});var p=y((function(){if(t&&n&&e){let e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:te,r=D.x+e,o=D.y+t,i=r+Y,a=o+j,u=Math.max(r,n.left),l=Math.max(o,n.top),s=Math.min(i,n.right),c=Math.min(a,n.bottom);return Math.max(0,(s-u)*(c-l))},Mt=function(){ge=D.y+Ae,pe=ge+j,ye=D.x+Se,Ee=ye+Y};var s,c,f,h,m,p=t,y=p.ownerDocument,E=He(p).getComputedStyle(p),b=E.width,w=E.height,C=E.position,N=p.style.left,x=p.style.top,M=p.style.right,R=p.style.bottom,k=p.style.overflow,S=i(i({},o[r]),a),F=y.createElement("div");if(null===(s=p.parentElement)||void 0===s||s.appendChild(F),F.style.left="".concat(p.offsetLeft,"px"),F.style.top="".concat(p.offsetTop,"px"),F.style.position=C,F.style.height="".concat(p.offsetHeight,"px"),F.style.width="".concat(p.offsetWidth,"px"),p.style.left="0",p.style.top="0",p.style.right="auto",p.style.bottom="auto",p.style.overflow="hidden",Array.isArray(n))m={x:n[0],y:n[1],width:0,height:0};else{var I,O,L=n.getBoundingClientRect();L.x=null!==(I=L.x)&&void 0!==I?I:L.left,L.y=null!==(O=L.y)&&void 0!==O?O:L.top,m={x:L.x,y:L.y,width:L.width,height:L.height}}var D=p.getBoundingClientRect();D.x=null!==(c=D.x)&&void 0!==c?c:D.left,D.y=null!==(f=D.y)&&void 0!==f?f:D.top;var z=y.documentElement,_=z.clientWidth,q=z.clientHeight,T=z.scrollWidth,B=z.scrollHeight,H=z.scrollTop,V=z.scrollLeft,j=D.height,Y=D.width,X=m.height,U=m.width,W={left:0,top:0,right:_,bottom:q},G={left:-V,top:-H,right:T-V,bottom:B-H},$=S.htmlRegion,J="visible",K="visibleFirst";"scroll"!==$&&$!==K&&($=J);var Q=$===K,Z=Xe(G,v),ee=Xe(W,v),te=$===J?ee:Z,ne=Q?ee:te;p.style.left="auto",p.style.top="auto",p.style.right="0",p.style.bottom="0";var re=p.getBoundingClientRect();p.style.left=N,p.style.top=x,p.style.right=M,p.style.bottom=R,p.style.overflow=k,null===(h=p.parentElement)||void 0===h||h.removeChild(F);var oe=je(Math.round(Y/parseFloat(b)*1e3)/1e3),ie=je(Math.round(j/parseFloat(w)*1e3)/1e3);if(0===oe||0===ie||A(n)&&!P(n))return;var ae=S.offset,ue=S.targetOffset,le=We(D,ae),se=u(le,2),ce=se[0],fe=se[1],de=We(m,ue),he=u(de,2),ve=he[0],me=he[1];m.x-=ve,m.y-=me;var ge,pe,ye,Ee,be=S.points||[],we=u(be,2),Ce=we[0],Ne=Ge(we[1]),xe=Ge(Ce),Me=$e(m,Ne),Re=$e(D,xe),ke=i({},S),Se=Me.x-Re.x+ce,Ae=Me.y-Re.y+fe,Pe=e(Se,Ae),Fe=e(Se,Ae,ee),Ie=$e(m,["t","l"]),Oe=$e(D,["t","l"]),Le=$e(m,["b","r"]),De=$e(D,["b","r"]),ze=S.overflow||{},_e=ze.adjustX,qe=ze.adjustY,Te=ze.shiftX,Be=ze.shiftY,Ve=function(e){return"boolean"==typeof e?e:e>=0};Mt();var Ye=Ve(qe),Ue=xe[0]===Ne[0];if(Ye&&"t"===xe[0]&&(pe>ne.bottom||g.current.bt)){var Ke=Ae;Ue?Ke-=j-X:Ke=Ie.y-De.y-fe;var Qe=e(Se,Ke),Ze=e(Se,Ke,ee);Qe>Pe||Qe===Pe&&(!Q||Ze>=Fe)?(g.current.bt=!0,Ae=Ke,fe=-fe,ke.points=[Je(xe,0),Je(Ne,0)]):g.current.bt=!1}if(Ye&&"b"===xe[0]&&(ge<ne.top||g.current.tb)){var et=Ae;Ue?et+=j-X:et=Le.y-Oe.y-fe;var tt=e(Se,et),nt=e(Se,et,ee);tt>Pe||tt===Pe&&(!Q||nt>=Fe)?(g.current.tb=!0,Ae=et,fe=-fe,ke.points=[Je(xe,0),Je(Ne,0)]):g.current.tb=!1}var rt=Ve(_e),ot=xe[1]===Ne[1];if(rt&&"l"===xe[1]&&(Ee>ne.right||g.current.rl)){var it=Se;ot?it-=Y-U:it=Ie.x-De.x-ce;var at=e(it,Ae),ut=e(it,Ae,ee);at>Pe||at===Pe&&(!Q||ut>=Fe)?(g.current.rl=!0,Se=it,ce=-ce,ke.points=[Je(xe,1),Je(Ne,1)]):g.current.rl=!1}if(rt&&"r"===xe[1]&&(ye<ne.left||g.current.lr)){var lt=Se;ot?lt+=Y-U:lt=Le.x-Oe.x-ce;var st=e(lt,Ae),ct=e(lt,Ae,ee);st>Pe||st===Pe&&(!Q||ct>=Fe)?(g.current.lr=!0,Se=lt,ce=-ce,ke.points=[Je(xe,1),Je(Ne,1)]):g.current.lr=!1}Mt();var ft=!0===Te?0:Te;"number"==typeof ft&&(ye<ee.left&&(Se-=ye-ee.left-ce,m.x+U<ee.left+ft&&(Se+=m.x-ee.left+U-ft)),Ee>ee.right&&(Se-=Ee-ee.right-ce,m.x>ee.right-ft&&(Se+=m.x-ee.right+ft)));var dt=!0===Be?0:Be;"number"==typeof dt&&(ge<ee.top&&(Ae-=ge-ee.top-fe,m.y+X<ee.top+dt&&(Ae+=m.y-ee.top+X-dt)),pe>ee.bottom&&(Ae-=pe-ee.bottom-fe,m.y>ee.bottom-dt&&(Ae+=m.y-ee.bottom+dt)));var ht=D.x+Se,vt=ht+Y,mt=D.y+Ae,gt=mt+j,pt=m.x,yt=pt+U,Et=m.y,bt=Et+X,wt=(Math.max(ht,pt)+Math.min(vt,yt))/2-ht,Ct=(Math.max(mt,Et)+Math.min(gt,bt))/2-mt;null==l||l(t,ke);var Nt=re.right-D.x-(Se+D.width),xt=re.bottom-D.y-(Ae+D.height);1===oe&&(Se=Math.round(Se),Nt=Math.round(Nt)),1===ie&&(Ae=Math.round(Ae),xt=Math.round(xt)),d({ready:!0,offsetX:Se/oe,offsetY:Ae/ie,offsetR:Nt/oe,offsetB:xt/ie,arrowX:wt/oe,arrowY:Ct/ie,scaleX:oe,scaleY:ie,align:ke})}})),E=function(){d((function(e){return i(i({},e),{},{ready:!1})}))};return w(E,[r]),w((function(){e||E()}),[e]),[f.ready,f.offsetX,f.offsetY,f.offsetR,f.offsetB,f.arrowX,f.arrowY,f.scaleX,f.scaleY,f.align,function(){h.current+=1;var e=h.current;Promise.resolve().then((function(){h.current===e&&p()}))}]}(nt,we,K&&null!==bt?bt:ke,j,X,U,Z),xt=u(Nt,11),Mt=xt[0],Rt=xt[1],kt=xt[2],St=xt[3],At=xt[4],Pt=xt[5],Ft=xt[6],It=xt[7],Ot=xt[8],Lt=xt[9],Dt=xt[10],zt=function(e,t,n,r){return m.useMemo((function(){var o=qe(null!=n?n:t),i=qe(null!=r?r:t),a=new Set(o),u=new Set(i);return e&&(a.has("hover")&&(a.delete("hover"),a.add("click")),u.has("hover")&&(u.delete("hover"),u.add("click"))),[a,u]}),[e,t,n,r])}(he,f,d,h),_t=u(zt,2),qt=_t[0],Tt=_t[1],Bt=qt.has("click"),Ht=Tt.has("click")||Tt.has("contextMenu"),Vt=y((function(){dt||Dt()}));!function(e,t,n,r,o){w((function(){if(e&&t&&n){let e=function(){r(),o()};var i=n,a=Ve(t),u=Ve(i),l=He(i),s=new Set([l].concat(c(a),c(u)));return s.forEach((function(t){t.addEventListener("scroll",e,{passive:!0})})),l.addEventListener("resize",e,{passive:!0}),r(),function(){s.forEach((function(t){t.removeEventListener("scroll",e),l.removeEventListener("resize",e)}))}}}),[e,t,n])}(nt,ke,we,Vt,(function(){ot.current&&K&&Ht&&st(!1)})),w((function(){Vt()}),[bt,j]),w((function(){!nt||null!=X&&X[j]||Vt()}),[JSON.stringify(U)]);var jt=m.useMemo((function(){var e=function(e,t,n,r){for(var o=n.points,i=Object.keys(e),a=0;a<i.length;a+=1){var u,l=i[a];if(Te(null===(u=e[l])||void 0===u?void 0:u.points,o,r))return"".concat(t,"-placement-").concat(l)}return""}(X,a,Lt,K);return p(e,null==$?void 0:$(Lt))}),[Lt,$,X,a,K]);m.useImperativeHandle(n,(function(){return{nativeElement:Ae.current,popupElement:Ne.current,forceAlign:Vt}}));var Yt=m.useState(0),Xt=u(Yt,2),Ut=Xt[0],Wt=Xt[1],Gt=m.useState(0),$t=u(Gt,2),Jt=$t[0],Kt=$t[1],Qt=function(){if(G&&ke){var e=ke.getBoundingClientRect();Wt(e.width),Kt(e.height)}};function Zt(e,t,n,r){Oe[e]=function(o){var i;null==r||r(o),st(t,n);for(var a=arguments.length,u=new Array(a>1?a-1:0),l=1;l<a;l++)u[l-1]=arguments[l];null===(i=Ie[e])||void 0===i||i.call.apply(i,[Ie,o].concat(u))}}w((function(){gt&&(Dt(),gt(),pt(null))}),[gt]),(Bt||Ht)&&(Oe.onClick=function(e){var t;ot.current&&Ht?st(!1):!ot.current&&Bt&&(Ct(e),st(!0));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null===(t=Ie.onClick)||void 0===t||t.call.apply(t,[Ie,e].concat(r))}),function(e,t,n,r,o,i,a,u){var l=m.useRef(e);l.current=e,m.useEffect((function(){if(t&&r&&(!o||i)){var e=function(e){var t;l.current&&!a((null===(t=e.composedPath)||void 0===t||null===(t=t.call(e))||void 0===t?void 0:t[0])||e.target)&&u(!1)},s=He(r);s.addEventListener("mousedown",e,!0),s.addEventListener("contextmenu",e,!0);var c=F(n);return c&&(c.addEventListener("mousedown",e,!0),c.addEventListener("contextmenu",e,!0)),function(){s.removeEventListener("mousedown",e,!0),s.removeEventListener("contextmenu",e,!0),c&&(c.removeEventListener("mousedown",e,!0),c.removeEventListener("contextmenu",e,!0))}}}),[t,n,r,o,i])}(nt,Ht,ke,we,k,L,Le,st);var en,tn,nn=qt.has("hover"),rn=Tt.has("hover");nn&&(Zt("onMouseEnter",!0,C,(function(e){Ct(e)})),Zt("onPointerEnter",!0,C,(function(e){Ct(e)})),en=function(e){(nt||dt)&&null!=we&&we.contains(e.target)&&st(!0,C)},K&&(Oe.onMouseMove=function(e){var t;null===(t=Ie.onMouseMove)||void 0===t||t.call(Ie,e)})),rn&&(Zt("onMouseLeave",!1,x),Zt("onPointerLeave",!1,x),tn=function(){st(!1,x)}),qt.has("focus")&&Zt("onFocus",!0,M),Tt.has("focus")&&Zt("onBlur",!1,R),qt.has("contextMenu")&&(Oe.onContextMenu=function(e){var t;ot.current&&Tt.has("contextMenu")?st(!1):(Ct(e),st(!0)),e.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null===(t=Ie.onContextMenu)||void 0===t||t.call.apply(t,[Ie,e].concat(r))}),ue&&(Oe.className=p(Ie.className,ue));var on=i(i({},Ie),Oe),an={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(e){se[e]&&(an[e]=function(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null===(t=on[e])||void 0===t||t.call.apply(t,[on].concat(r)),se[e].apply(se,r)})}));var un=m.cloneElement(Fe,i(i({},on),an)),ln={x:Pt,y:Ft},sn=ee?i({},!0!==ee?ee:{}):null;return m.createElement(m.Fragment,null,m.createElement(_,{disabled:!nt,ref:Pe,onResize:function(){Qt(),Vt()}},m.createElement(ze,{getTriggerDOMNode:le},un)),m.createElement(_e.Provider,{value:pe},m.createElement(De,{portal:e,ref:xe,prefixCls:a,popup:B,className:p(H,jt),style:V,target:ke,onMouseEnter:en,onMouseLeave:tn,onPointerEnter:en,zIndex:W,open:nt,keepDom:dt,fresh:J,onClick:Q,mask:k,motion:Ye,maskMotion:Ue,onVisibleChanged:function(e){ht(!1),Dt(),null==b||b(e)},onPrepare:function(){return new Promise((function(e){Qt(),pt((function(){return e}))}))},forceRender:z,autoDestroy:ce,getPopupContainer:D,align:Lt,arrow:sn,arrowPos:ln,ready:Mt,offsetX:Rt,offsetY:kt,offsetR:St,offsetB:At,onAlign:Vt,stretch:G,targetWidth:Ut/It,targetHeight:Jt/Ot})))}))}(se);function Ze(){return"function"==typeof BigInt}function et(e){return!e&&0!==e&&!Number.isNaN(e)||!String(e).trim()}function tt(e){var t=e.trim(),n=t.startsWith("-");n&&(t=t.slice(1)),(t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,"")).startsWith(".")&&(t="0".concat(t));var r=t||"0",o=r.split("."),i=o[0]||"0",a=o[1]||"0";"0"===i&&"0"===a&&(n=!1);var u=n?"-":"";return{negative:n,negativeStr:u,trimStr:r,integerStr:i,decimalStr:a,fullStr:"".concat(u).concat(r)}}function nt(e){var t=String(e);return!Number.isNaN(Number(t))&&t.includes("e")}function rt(e){var t=String(e);if(nt(e)){var n=Number(t.slice(t.indexOf("e-")+2)),r=t.match(/\.(\d+)/);return null!=r&&r[1]&&(n+=r[1].length),n}return t.includes(".")&&it(t)?t.length-t.indexOf(".")-1:0}function ot(e){var t=String(e);if(nt(e)){if(e>Number.MAX_SAFE_INTEGER)return String(Ze()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(Ze()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);t=e.toFixed(rt(t))}return tt(t).fullStr}function it(e){return"number"==typeof e?!Number.isNaN(e):!!e&&(/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e))}var at,ut,lt=function(){function e(t){if(n(this,e),l(this,"origin",""),l(this,"negative",void 0),l(this,"integer",void 0),l(this,"decimal",void 0),l(this,"decimalLen",void 0),l(this,"empty",void 0),l(this,"nan",void 0),et(t))this.empty=!0;else if(this.origin=String(t),"-"===t||Number.isNaN(t))this.nan=!0;else{var r=t;if(nt(r)&&(r=Number(r)),it(r="string"==typeof r?r:ot(r))){var o=tt(r);this.negative=o.negative;var i=o.trimStr.split(".");this.integer=BigInt(i[0]);var a=i[1]||"0";this.decimal=BigInt(a),this.decimalLen=a.length}else this.nan=!0}}return r(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(e){var t="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(e,"0"));return BigInt(t)}},{key:"negate",value:function(){var t=new e(this.toString());return t.negative=!t.negative,t}},{key:"cal",value:function(t,n,r){var o=Math.max(this.getDecimalStr().length,t.getDecimalStr().length),i=n(this.alignDecimal(o),t.alignDecimal(o)).toString(),a=r(o),u=tt(i),l=u.negativeStr,s=u.trimStr,c="".concat(l).concat(s.padStart(a+1,"0"));return new e("".concat(c.slice(0,-a),".").concat(c.slice(-a)))}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var n=new e(t);return n.isInvalidate()?this:this.cal(n,(function(e,t){return e+t}),(function(e){return e}))}},{key:"multi",value:function(t){var n=new e(t);return this.isInvalidate()||n.isInvalidate()?new e(NaN):this.cal(n,(function(e,t){return e*t}),(function(e){return 2*e}))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toString()===(null==e?void 0:e.toString())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":tt("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e}(),st=function(){function e(t){n(this,e),l(this,"origin",""),l(this,"number",void 0),l(this,"empty",void 0),et(t)?this.empty=!0:(this.origin=String(t),this.number=Number(t))}return r(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new e(t);var n=Number(t);if(Number.isNaN(n))return this;var r=this.number+n;if(r>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var o=Math.max(rt(this.number),rt(n));return new e(r.toFixed(o))}},{key:"multi",value:function(t){var n=Number(t);if(this.isInvalidate()||Number.isNaN(n))return new e(NaN);var r=this.number*n;if(r>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var o=Math.max(rt(this.number),rt(n));return new e(r.toFixed(o))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toNumber()===(null==e?void 0:e.toNumber())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":ot(this.number):this.origin}}]),e}();function ct(e){return Ze()?new lt(e):new st(e)}function ft(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(""===e)return"";var o=tt(e),i=o.negativeStr,a=o.integerStr,u=o.decimalStr,l="".concat(t).concat(u),s="".concat(i).concat(a);if(n>=0){var c=Number(u[n]);return c>=5&&!r?ft(ct(e).add("".concat(i,"0.").concat("0".repeat(n)).concat(10-c)).toString(),t,n,r):0===n?s:"".concat(s).concat(t).concat(u.padEnd(n,"0").slice(0,n))}return".0"===l?s:"".concat(s).concat(l)}function dt(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(var r=t-1;r>=0;r--)n.push(e>>>r&1)}function ht(e,t){return!!(e>>>t&1)}function vt(e){if(!e)throw new Error("Assertion error")}var mt=function(){function e(t,r){n(this,e),l(this,"modeBits",void 0),l(this,"numBitsCharCount",void 0),this.modeBits=t,this.numBitsCharCount=r}return r(e,[{key:"numCharCountBits",value:function(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}}]),e}();l(mt,"NUMERIC",new(at=mt)(1,[10,12,14])),l(mt,"ALPHANUMERIC",new at(2,[9,11,13])),l(mt,"BYTE",new at(4,[8,16,16])),l(mt,"KANJI",new at(8,[8,10,12])),l(mt,"ECI",new at(7,[0,0,0]));var gt=r((function e(t,r){n(this,e),l(this,"ordinal",void 0),l(this,"formatBits",void 0),this.ordinal=t,this.formatBits=r}));l(gt,"LOW",new(ut=gt)(0,1)),l(gt,"MEDIUM",new ut(1,0)),l(gt,"QUARTILE",new ut(2,3)),l(gt,"HIGH",new ut(3,2));var pt=function(){function e(t,r,o){if(n(this,e),l(this,"mode",void 0),l(this,"numChars",void 0),l(this,"bitData",void 0),this.mode=t,this.numChars=r,this.bitData=o,r<0)throw new RangeError("Invalid argument");this.bitData=o.slice()}return r(e,[{key:"getData",value:function(){return this.bitData.slice()}}],[{key:"makeBytes",value:function(t){var n,r=[],o=h(t);try{for(o.s();!(n=o.n()).done;){dt(n.value,8,r)}}catch(i){o.e(i)}finally{o.f()}return new e(mt.BYTE,t.length,r)}},{key:"makeNumeric",value:function(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");for(var n=[],r=0;r<t.length;){var o=Math.min(t.length-r,3);dt(parseInt(t.substring(r,r+o),10),3*o+1,n),r+=o}return new e(mt.NUMERIC,t.length,n)}},{key:"makeAlphanumeric",value:function(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");var n,r=[];for(n=0;n+2<=t.length;n+=2){var o=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));dt(o+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),11,r)}return n<t.length&&dt(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6,r),new e(mt.ALPHANUMERIC,t.length,r)}},{key:"makeSegments",value:function(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}},{key:"makeEci",value:function(t){var n=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)dt(t,8,n);else if(t<16384)dt(2,2,n),dt(t,14,n);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");dt(6,3,n),dt(t,21,n)}return new e(mt.ECI,0,n)}},{key:"isNumeric",value:function(t){return e.NUMERIC_REGEX.test(t)}},{key:"isAlphanumeric",value:function(t){return e.ALPHANUMERIC_REGEX.test(t)}},{key:"getTotalBits",value:function(e,t){var n,r=0,o=h(e);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=i.mode.numCharCountBits(t);if(i.numChars>=1<<a)return 1/0;r+=4+a+i.bitData.length}}catch(u){o.e(u)}finally{o.f()}return r}},{key:"toUtf8ByteArray",value:function(e){for(var t=encodeURI(e),n=[],r=0;r<t.length;r++)"%"!=t.charAt(r)?n.push(t.charCodeAt(r)):(n.push(parseInt(t.substring(r+1,r+3),16)),r+=2);return n}}]),e}();l(pt,"NUMERIC_REGEX",/^[0-9]*$/),l(pt,"ALPHANUMERIC_REGEX",/^[A-Z0-9 $%*+.\/:-]*$/),l(pt,"ALPHANUMERIC_CHARSET","0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:");var yt=function(){function e(t,r,o,i){n(this,e),l(this,"size",void 0),l(this,"mask",void 0),l(this,"modules",[]),l(this,"isFunction",[]),l(this,"version",void 0),l(this,"errorCorrectionLevel",void 0);var a=i;if(this.version=t,this.errorCorrectionLevel=r,t<e.MIN_VERSION||t>e.MAX_VERSION)throw new RangeError("Version value out of range");if(a<-1||a>7)throw new RangeError("Mask value out of range");this.size=4*t+17;for(var u=[],s=0;s<this.size;s++)u.push(!1);for(var c=0;c<this.size;c++)this.modules.push(u.slice()),this.isFunction.push(u.slice());this.drawFunctionPatterns();var f=this.addEccAndInterleave(o);if(this.drawCodewords(f),-1==a)for(var d=1e9,h=0;h<8;h++){this.applyMask(h),this.drawFormatBits(h);var v=this.getPenaltyScore();v<d&&(a=h,d=v),this.applyMask(h)}vt(0<=a&&a<=7),this.mask=a,this.applyMask(a),this.drawFormatBits(a),this.isFunction=[]}return r(e,[{key:"getModule",value:function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}},{key:"getModules",value:function(){return this.modules}},{key:"drawFunctionPatterns",value:function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var t=this.getAlignmentPatternPositions(),n=t.length,r=0;r<n;r++)for(var o=0;o<n;o++)0==r&&0==o||0==r&&o==n-1||r==n-1&&0==o||this.drawAlignmentPattern(t[r],t[o]);this.drawFormatBits(0),this.drawVersion()}},{key:"drawFormatBits",value:function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,n=t,r=0;r<10;r++)n=n<<1^1335*(n>>>9);var o=21522^(t<<10|n);vt(o>>>15==0);for(var i=0;i<=5;i++)this.setFunctionModule(8,i,ht(o,i));this.setFunctionModule(8,7,ht(o,6)),this.setFunctionModule(8,8,ht(o,7)),this.setFunctionModule(7,8,ht(o,8));for(var a=9;a<15;a++)this.setFunctionModule(14-a,8,ht(o,a));for(var u=0;u<8;u++)this.setFunctionModule(this.size-1-u,8,ht(o,u));for(var l=8;l<15;l++)this.setFunctionModule(8,this.size-15+l,ht(o,l));this.setFunctionModule(8,this.size-8,!0)}},{key:"drawVersion",value:function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^7973*(e>>>11);var n=this.version<<12|e;vt(n>>>18==0);for(var r=0;r<18;r++){var o=ht(n,r),i=this.size-11+r%3,a=Math.floor(r/3);this.setFunctionModule(i,a,o),this.setFunctionModule(a,i,o)}}}},{key:"drawFinderPattern",value:function(e,t){for(var n=-4;n<=4;n++)for(var r=-4;r<=4;r++){var o=Math.max(Math.abs(r),Math.abs(n)),i=e+r,a=t+n;0<=i&&i<this.size&&0<=a&&a<this.size&&this.setFunctionModule(i,a,2!=o&&4!=o)}}},{key:"drawAlignmentPattern",value:function(e,t){for(var n=-2;n<=2;n++)for(var r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,1!=Math.max(Math.abs(r),Math.abs(n)))}},{key:"setFunctionModule",value:function(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}},{key:"addEccAndInterleave",value:function(t){var n=this.version,r=this.errorCorrectionLevel;if(t.length!=e.getNumDataCodewords(n,r))throw new RangeError("Invalid argument");for(var o=e.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][n],i=e.ECC_CODEWORDS_PER_BLOCK[r.ordinal][n],a=Math.floor(e.getNumRawDataModules(n)/8),u=o-a%o,l=Math.floor(a/o),s=[],c=e.reedSolomonComputeDivisor(i),f=0,d=0;f<o;f++){var h=t.slice(d,d+l-i+(f<u?0:1));d+=h.length;var v=e.reedSolomonComputeRemainder(h,c);f<u&&h.push(0),s.push(h.concat(v))}for(var m=[],g=function(e){s.forEach((function(t,n){(e!=l-i||n>=u)&&m.push(t[e])}))},p=0;p<s[0].length;p++)g(p);return vt(m.length==a),m}},{key:"drawCodewords",value:function(t){if(t.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var n=0,r=this.size-1;r>=1;r-=2){6==r&&(r=5);for(var o=0;o<this.size;o++)for(var i=0;i<2;i++){var a=r-i,u=!(r+1&2)?this.size-1-o:o;!this.isFunction[u][a]&&n<8*t.length&&(this.modules[u][a]=ht(t[n>>>3],7-(7&n)),n++)}}vt(n==8*t.length)}},{key:"applyMask",value:function(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(var t=0;t<this.size;t++)for(var n=0;n<this.size;n++){var r=void 0;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}},{key:"getPenaltyScore",value:function(){for(var t=0,n=0;n<this.size;n++){for(var r=!1,o=0,i=[0,0,0,0,0,0,0],a=0;a<this.size;a++)this.modules[n][a]==r?5==++o?t+=e.PENALTY_N1:o>5&&t++:(this.finderPenaltyAddHistory(o,i),r||(t+=this.finderPenaltyCountPatterns(i)*e.PENALTY_N3),r=this.modules[n][a],o=1);t+=this.finderPenaltyTerminateAndCount(r,o,i)*e.PENALTY_N3}for(var u=0;u<this.size;u++){for(var l=!1,s=0,c=[0,0,0,0,0,0,0],f=0;f<this.size;f++)this.modules[f][u]==l?5==++s?t+=e.PENALTY_N1:s>5&&t++:(this.finderPenaltyAddHistory(s,c),l||(t+=this.finderPenaltyCountPatterns(c)*e.PENALTY_N3),l=this.modules[f][u],s=1);t+=this.finderPenaltyTerminateAndCount(l,s,c)*e.PENALTY_N3}for(var d=0;d<this.size-1;d++)for(var v=0;v<this.size-1;v++){var m=this.modules[d][v];m==this.modules[d][v+1]&&m==this.modules[d+1][v]&&m==this.modules[d+1][v+1]&&(t+=e.PENALTY_N2)}var g,p=0,y=h(this.modules);try{for(y.s();!(g=y.n()).done;){p=g.value.reduce((function(e,t){return e+(t?1:0)}),p)}}catch(w){y.e(w)}finally{y.f()}var E=this.size*this.size,b=Math.ceil(Math.abs(20*p-10*E)/E)-1;return vt(0<=b&&b<=9),vt(0<=(t+=b*e.PENALTY_N4)&&t<=2568888),t}},{key:"getAlignmentPatternPositions",value:function(){if(1==this.version)return[];for(var e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2)),n=[6],r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}},{key:"finderPenaltyCountPatterns",value:function(e){var t=e[1];vt(t<=3*this.size);var n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}},{key:"finderPenaltyTerminateAndCount",value:function(e,t,n){var r=t;return e&&(this.finderPenaltyAddHistory(r,n),r=0),r+=this.size,this.finderPenaltyAddHistory(r,n),this.finderPenaltyCountPatterns(n)}},{key:"finderPenaltyAddHistory",value:function(e,t){var n=e;0==t[0]&&(n+=this.size),t.pop(),t.unshift(n)}}],[{key:"encodeText",value:function(t,n){var r=pt.makeSegments(t);return e.encodeSegments(r,n)}},{key:"encodeBinary",value:function(t,n){var r=pt.makeBytes(t);return e.encodeSegments([r],n)}},{key:"encodeSegments",value:function(t,n){var r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(e.MIN_VERSION<=i&&i<=a&&a<=e.MAX_VERSION)||u<-1||u>7)throw new RangeError("Invalid value");for(r=i;;r++){var s=8*e.getNumDataCodewords(r,n),c=pt.getTotalBits(t,r);if(c<=s){o=c;break}if(r>=a)throw new RangeError("Data too long")}for(var f=n,d=0,v=[gt.MEDIUM,gt.QUARTILE,gt.HIGH];d<v.length;d++){var m=v[d];l&&o<=8*e.getNumDataCodewords(r,m)&&(f=m)}var g,p=[],y=h(t);try{for(y.s();!(g=y.n()).done;){var E=g.value;dt(E.mode.modeBits,4,p),dt(E.numChars,E.mode.numCharCountBits(r),p);var b,w=h(E.getData());try{for(w.s();!(b=w.n()).done;){var C=b.value;p.push(C)}}catch(R){w.e(R)}finally{w.f()}}}catch(R){y.e(R)}finally{y.f()}vt(p.length==o);var N=8*e.getNumDataCodewords(r,f);vt(p.length<=N),dt(0,Math.min(4,N-p.length),p),dt(0,(8-p.length%8)%8,p),vt(p.length%8==0);for(var x=236;p.length<N;x^=253)dt(x,8,p);for(var M=[];8*M.length<p.length;)M.push(0);return p.forEach((function(e,t){return M[t>>>3]|=e<<7-(7&t)})),new e(r,f,M,u)}},{key:"getNumRawDataModules",value:function(t){if(t<e.MIN_VERSION||t>e.MAX_VERSION)throw new RangeError("Version number out of range");var n=(16*t+128)*t+64;if(t>=2){var r=Math.floor(t/7)+2;n-=(25*r-10)*r-55,t>=7&&(n-=36)}return vt(208<=n&&n<=29648),n}},{key:"getNumDataCodewords",value:function(t,n){return Math.floor(e.getNumRawDataModules(t)/8)-e.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t]*e.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t]}},{key:"reedSolomonComputeDivisor",value:function(t){if(t<1||t>255)throw new RangeError("Degree out of range");for(var n=[],r=0;r<t-1;r++)n.push(0);n.push(1);for(var o=1,i=0;i<t;i++){for(var a=0;a<n.length;a++)n[a]=e.reedSolomonMultiply(n[a],o),a+1<n.length&&(n[a]^=n[a+1]);o=e.reedSolomonMultiply(o,2)}return n}},{key:"reedSolomonComputeRemainder",value:function(t,n){var r,o=n.map((function(){return 0})),i=h(t);try{var a=function(){var t=r.value^o.shift();o.push(0),n.forEach((function(n,r){return o[r]^=e.reedSolomonMultiply(n,t)}))};for(i.s();!(r=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}return o}},{key:"reedSolomonMultiply",value:function(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");for(var n=0,r=7;r>=0;r--)n=n<<1^285*(n>>>7),n^=(t>>>r&1)*e;return vt(n>>>8==0),n}}]),e}();l(yt,"MIN_VERSION",1),l(yt,"MAX_VERSION",40),l(yt,"PENALTY_N1",3),l(yt,"PENALTY_N2",3),l(yt,"PENALTY_N3",40),l(yt,"PENALTY_N4",10),l(yt,"ECC_CODEWORDS_PER_BLOCK",[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]]),l(yt,"NUM_ERROR_CORRECTION_BLOCKS",[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]]);var Et={L:gt.LOW,M:gt.MEDIUM,Q:gt.QUARTILE,H:gt.HIGH},bt="#FFFFFF",wt="#000000",Ct=!1;function Nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];return e.forEach((function(e,r){var o=null;e.forEach((function(i,a){if(!i&&null!==o)return n.push("M".concat(o+t," ").concat(r+t,"h").concat(a-o,"v1H").concat(o+t,"z")),void(o=null);if(a!==e.length-1)i&&null===o&&(o=a);else{if(!i)return;null===o?n.push("M".concat(a+t,",").concat(r+t," h1v1H").concat(a+t,"z")):n.push("M".concat(o+t,",").concat(r+t," h").concat(a+1-o,"v1H").concat(o+t,"z"))}}))})),n.join("")}function xt(e,t){return e.slice().map((function(e,n){return n<t.y||n>=t.y+t.h?e:e.map((function(e,n){return(n<t.x||n>=t.x+t.w)&&e}))}))}var Mt=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}();function Rt(e){var t=e.value,n=e.level,r=e.minVersion,o=e.includeMargin,i=e.marginSize,a=e.imageSettings,u=e.size,l=m.useMemo((function(){var e=pt.makeSegments(t);return yt.encodeSegments(e,Et[n],r)}),[t,n,r]),s=m.useMemo((function(){var e=l.getModules(),t=function(e,t){return null!=t?Math.floor(t):e?4:0}(o,i),n=e.length+2*t,r=function(e,t,n,r){if(null==r)return null;var o=e.length+2*n,i=Math.floor(.1*t),a=o/t,u=(r.width||i)*a,l=(r.height||i)*a,s=null==r.x?e.length/2-u/2:r.x*a,c=null==r.y?e.length/2-l/2:r.y*a,f=null==r.opacity?1:r.opacity,d=null;if(r.excavate){var h=Math.floor(s),v=Math.floor(c);d={x:h,y:v,w:Math.ceil(u+s-h),h:Math.ceil(l+c-v)}}return{x:s,y:c,h:l,w:u,excavation:d,opacity:f,crossOrigin:r.crossOrigin}}(e,u,t,a);return{cells:e,margin:t,numCells:n,calculatedImageSettings:r}}),[l,u,a,o,i]),c=s.cells,f=s.margin,d=s.numCells,h=s.calculatedImageSettings;return{qrcode:l,margin:f,cells:c,numCells:d,calculatedImageSettings:h}}var kt=["value","size","level","bgColor","fgColor","includeMargin","minVersion","marginSize","style","imageSettings"],St=v.forwardRef((function(e,t){var n=e.value,r=e.size,a=void 0===r?128:r,l=e.level,c=void 0===l?"L":l,f=e.bgColor,d=void 0===f?bt:f,h=e.fgColor,g=void 0===h?wt:h,p=e.includeMargin,y=void 0===p?Ct:p,E=e.minVersion,b=void 0===E?1:E,w=e.marginSize,C=e.style,N=e.imageSettings,x=o(e,kt),M=null==N?void 0:N.src,R=m.useRef(null),k=m.useRef(null),S=m.useCallback((function(e){R.current=e,"function"==typeof t?t(e):t&&(t.current=e)}),[t]),A=m.useState(!1),P=u(A,2)[1],F=Rt({value:n,level:c,minVersion:b,includeMargin:y,marginSize:w,imageSettings:N,size:a}),I=F.margin,O=F.cells,L=F.numCells,D=F.calculatedImageSettings;m.useEffect((function(){if(null!=R.current){var e=R.current,t=e.getContext("2d");if(!t)return;var n=O,r=k.current,o=null!=D&&null!==r&&r.complete&&0!==r.naturalHeight&&0!==r.naturalWidth;o&&null!=D.excavation&&(n=xt(O,D.excavation));var i=window.devicePixelRatio||1;e.height=e.width=a*i;var u=a/L*i;t.scale(u,u),t.fillStyle=d,t.fillRect(0,0,L,L),t.fillStyle=g,Mt?t.fill(new Path2D(Nt(n,I))):O.forEach((function(e,n){e.forEach((function(e,r){e&&t.fillRect(r+I,n+I,1,1)}))})),D&&(t.globalAlpha=D.opacity),o&&t.drawImage(r,D.x+I,D.y+I,D.w,D.h)}})),m.useEffect((function(){P(!1)}),[M]);var z=i({height:a,width:a},C),_=null;return null!=M&&(_=v.createElement("img",{src:M,key:M,style:{display:"none"},onLoad:function(){P(!0)},ref:k,crossOrigin:null==D?void 0:D.crossOrigin})),v.createElement(v.Fragment,null,v.createElement("canvas",s({style:z,height:a,width:a,ref:S,role:"img"},x)),_)}));St.displayName="QRCodeCanvas";var At=["value","size","level","bgColor","fgColor","includeMargin","minVersion","title","marginSize","imageSettings"],Pt=v.forwardRef((function(e,t){var n=e.value,r=e.size,i=void 0===r?128:r,a=e.level,u=void 0===a?"L":a,l=e.bgColor,c=void 0===l?bt:l,f=e.fgColor,d=void 0===f?wt:f,h=e.includeMargin,m=void 0===h?Ct:h,g=e.minVersion,p=void 0===g?1:g,y=e.title,E=e.marginSize,b=e.imageSettings,w=o(e,At),C=Rt({value:n,level:u,minVersion:p,includeMargin:m,marginSize:E,imageSettings:b,size:i}),N=C.margin,x=C.cells,M=C.numCells,R=C.calculatedImageSettings,k=x,S=null;null!=b&&null!=R&&(null!=R.excavation&&(k=xt(x,R.excavation)),S=v.createElement("image",{href:b.src,height:R.h,width:R.w,x:R.x+N,y:R.y+N,preserveAspectRatio:"none",opacity:R.opacity,crossOrigin:R.crossOrigin}));var A=Nt(k,N);return v.createElement("svg",s({height:i,width:i,viewBox:"0 0 ".concat(M," ").concat(M),ref:t,role:"img"},w),!!y&&v.createElement("title",null,y),v.createElement("path",{fill:c,d:"M0,0 h".concat(M,"v").concat(M,"H0z"),shapeRendering:"crispEdges"}),v.createElement("path",{fill:d,d:A,shapeRendering:"crispEdges"}),S)}));function Ft(e){var t=m.createContext(void 0);return{Context:t,Provider:function(e){var n=e.value,r=e.children,o=m.useRef(n);o.current=n;var i=m.useState((function(){return{getValue:function(){return o.current},listeners:new Set}})),a=u(i,1)[0];return w((function(){z.unstable_batchedUpdates((function(){a.listeners.forEach((function(e){e(n)}))}))}),[n]),m.createElement(t.Provider,{value:a},r)},defaultValue:e}}function It(e,t){var n=y("function"==typeof t?t:function(e){if(void 0===t)return e;if(!Array.isArray(t))return e[t];var n={};return t.forEach((function(t){n[t]=e[t]})),n}),r=m.useContext(null==e?void 0:e.Context),o=r||{},i=o.listeners,a=o.getValue,l=m.useRef();l.current=n(r?a():null==e?void 0:e.defaultValue);var s=m.useState({}),c=u(s,2)[1];return w((function(){if(r)return i.add(e),function(){i.delete(e)};function e(e){var t=n(e);L(l.current,t,!0)||c({})}}),[r]),l.current}function Ot(){var e=m.createContext(null);function t(){return m.useContext(e)}return{makeImmutable:function(n,r){var o=M(n),i=function(i,a){var u=o?{ref:a}:{},l=m.useRef(0),c=m.useRef(i);return null!==t()?m.createElement(n,s({},i,u)):(r&&!r(c.current,i)||(l.current+=1),c.current=i,m.createElement(e.Provider,{value:l.current},m.createElement(n,s({},i,u))))};return o?m.forwardRef(i):i},responseImmutable:function(e,n){var r=M(e),o=function(n,o){var i=r?{ref:o}:{};return t(),m.createElement(e,s({},n,i))};return r?m.memo(m.forwardRef(o),n):m.memo(o,n)},useImmutableMark:t}}function Lt(e){return null!==e&&"object"===a(e)}function Dt(e,t,n){if(!1===e||!1===t&&(!Lt(e)||!e.closeIcon))return null;var r,o="boolean"!=typeof t?t:void 0;return Lt(e)?i(i({},e),{},{closeIcon:null!==(r=e.closeIcon)&&void 0!==r?r:o}):n||e||t?{closeIcon:o}:"empty"}function zt(e,t,n,r){var o=m.useState(void 0),i=u(o,2),a=i[0],l=i[1];w((function(){var t="function"==typeof e?e():e;l(t||null)}));var s=m.useState(null),c=u(s,2),f=c[0],d=c[1],h=y((function(){if(a){!function(e){var t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,r=e.getBoundingClientRect(),o=r.top,i=r.right,a=r.bottom,u=r.left;return o>=0&&u>=0&&i<=t&&a<=n}(a)&&t&&a.scrollIntoView(r);var e=a.getBoundingClientRect(),n={left:e.left,top:e.top,width:e.width,height:e.height,radius:0};d((function(e){return JSON.stringify(e)!==JSON.stringify(n)?n:e}))}else d(null)})),v=function(e){var t;return null!==(t=Array.isArray(null==n?void 0:n.offset)?null==n?void 0:n.offset[e]:null==n?void 0:n.offset)&&void 0!==t?t:6};return w((function(){return h(),window.addEventListener("resize",h),function(){window.removeEventListener("resize",h)}}),[a,t,h]),[m.useMemo((function(){if(!f)return f;var e,t=v(0),r=v(1),o="number"!=typeof(e=null==n?void 0:n.radius)||Number.isNaN(e)?2:null==n?void 0:n.radius;return{left:f.left-t,top:f.top-r,width:f.width+2*t,height:f.height+2*r,radius:o}}),[f,n]),a]}Pt.displayName="QRCodeSVG";var _t={fill:"transparent",pointerEvents:"auto"},qt=function(e){var t=e.prefixCls,n=e.rootClassName,r=e.pos,o=e.showMask,u=e.style,l=void 0===u?{}:u,c=e.fill,f=void 0===c?"rgba(0,0,0,0.5)":c,d=e.open,h=e.animated,m=e.zIndex,g=e.disabledInteraction,y=O(),E="".concat(t,"-mask-").concat(y),b="object"===a(h)?null==h?void 0:h.placeholder:h,w="undefined"!=typeof navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?{width:"100%",height:"100%"}:{width:"100vw",height:"100vh"};return v.createElement(se,{open:d,autoLock:!0},v.createElement("div",{className:p("".concat(t,"-mask"),n),style:i({position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:m,pointerEvents:r&&!g?"none":"auto"},l)},o?v.createElement("svg",{style:{width:"100%",height:"100%"}},v.createElement("defs",null,v.createElement("mask",{id:E},v.createElement("rect",s({x:"0",y:"0"},w,{fill:"white"})),r&&v.createElement("rect",{x:r.left,y:r.top,rx:r.radius,width:r.width,height:r.height,fill:"black",className:b?"".concat(t,"-placeholder-animated"):""}))),v.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:f,mask:"url(#".concat(E,")")}),r&&v.createElement(v.Fragment,null,v.createElement("rect",s({},_t,{x:"0",y:"0",width:"100%",height:r.top})),v.createElement("rect",s({},_t,{x:"0",y:"0",width:r.left,height:"100%"})),v.createElement("rect",s({},_t,{x:"0",y:r.top+r.height,width:"100%",height:"calc(100vh - ".concat(r.top+r.height,"px)")})),v.createElement("rect",s({},_t,{x:r.left+r.width,y:"0",width:"calc(100vw - ".concat(r.left+r.width,"px)"),height:"100%"})))):null))},Tt=[0,0],Bt={left:{points:["cr","cl"],offset:[-8,0]},right:{points:["cl","cr"],offset:[8,0]},top:{points:["bc","tc"],offset:[0,-8]},bottom:{points:["tc","bc"],offset:[0,8]},topLeft:{points:["bl","tl"],offset:[0,-8]},leftTop:{points:["tr","tl"],offset:[-8,0]},topRight:{points:["br","tr"],offset:[0,-8]},rightTop:{points:["tl","tr"],offset:[8,0]},bottomRight:{points:["tr","br"],offset:[0,8]},rightBottom:{points:["bl","br"],offset:[8,0]},bottomLeft:{points:["tl","bl"],offset:[0,8]},leftBottom:{points:["br","bl"],offset:[-8,0]}};function Ht(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={};return Object.keys(Bt).forEach((function(n){t[n]=i(i({},Bt[n]),{},{autoArrow:e,targetOffset:Tt})})),t}function Vt(e){var t,n=e.prefixCls,r=e.current,o=e.total,i=e.title,a=e.description,u=e.onClose,l=e.onPrev,f=e.onNext,d=e.onFinish,h=e.className,v=e.closable,g=D(v||{},!0),y=null!==(t=null==v?void 0:v.closeIcon)&&void 0!==t?t:m.createElement("span",{className:"".concat(n,"-close-x")},"×"),E=!!v;return m.createElement("div",{className:p("".concat(n,"-content"),h)},m.createElement("div",{className:"".concat(n,"-inner")},E&&m.createElement("button",s({type:"button",onClick:u,"aria-label":"Close"},g,{className:"".concat(n,"-close")}),y),m.createElement("div",{className:"".concat(n,"-header")},m.createElement("div",{className:"".concat(n,"-title")},i)),m.createElement("div",{className:"".concat(n,"-description")},a),m.createElement("div",{className:"".concat(n,"-footer")},m.createElement("div",{className:"".concat(n,"-sliders")},o>1?c(Array.from({length:o}).keys()).map((function(e,t){return m.createElement("span",{key:e,className:t===r?"active":""})})):null),m.createElement("div",{className:"".concat(n,"-buttons")},0!==r?m.createElement("button",{className:"".concat(n,"-prev-btn"),onClick:l},"Prev"):null,r===o-1?m.createElement("button",{className:"".concat(n,"-finish-btn"),onClick:d},"Finish"):m.createElement("button",{className:"".concat(n,"-next-btn"),onClick:f},"Next")))))}Ht();var jt=function(e){var t=e.current,n=e.renderPanel;return m.createElement(m.Fragment,null,"function"==typeof n?n(e,t):m.createElement(Vt,e))},Yt=["prefixCls","steps","defaultCurrent","current","onChange","onClose","onFinish","open","mask","arrow","rootClassName","placement","renderPanel","gap","animated","scrollIntoViewOptions","zIndex","closeIcon","closable","builtinPlacements","disabledInteraction"],Xt={left:"50%",top:"50%",width:1,height:1},Ut={block:"center",inline:"center"},Wt=function(e){var t=e.prefixCls,n=void 0===t?"rc-tour":t,r=e.steps,l=void 0===r?[]:r,c=e.defaultCurrent,f=e.current,d=e.onChange,h=e.onClose,v=e.onFinish,g=e.open,y=e.mask,b=void 0===y||y,C=e.arrow,N=void 0===C||C,x=e.rootClassName,M=e.placement,R=e.renderPanel,k=e.gap,S=e.animated,A=e.scrollIntoViewOptions,P=void 0===A?Ut:A,F=e.zIndex,I=void 0===F?1001:F,O=e.closeIcon,L=e.closable,D=e.builtinPlacements,z=e.disabledInteraction,_=o(e,Yt),q=m.useRef(),T=E(0,{value:f,defaultValue:c}),B=u(T,2),H=B[0],V=B[1],j=E(void 0,{value:g,postState:function(e){return!(H<0||H>=l.length)&&(null==e||e)}}),Y=u(j,2),X=Y[0],U=Y[1],W=m.useState(X),G=u(W,2),$=G[0],J=G[1],K=m.useRef(X);w((function(){X&&(K.current||V(0),J(!0)),K.current=X}),[X]);var Q=l[H]||{},Z=Q.target,ee=Q.placement,te=Q.style,ne=Q.arrow,re=Q.className,oe=Q.mask,ie=Q.scrollIntoViewOptions,ae=void 0===ie?Ut:ie,ue=Q.closeIcon,le=function(e,t,n,r){return m.useMemo((function(){var o=Dt(e,t,!1),i=Dt(n,r,!0);return"empty"!==o?o:i}),[n,r,e,t])}(Q.closable,ue,L,O),ce=X&&(null!=oe?oe:b),fe=zt(Z,g,k,null!=ae?ae:P),de=u(fe,2),he=de[0],ve=de[1],me=function(e,t,n){var r;return null!==(r=null!=n?n:t)&&void 0!==r?r:null===e?"center":"bottom"}(ve,M,ee),ge=!!ve&&(void 0===ne?N:ne),pe="object"===a(ge)&&ge.pointAtCenter;w((function(){var e;null===(e=q.current)||void 0===e||e.forceAlign()}),[pe,H]);var ye=function(e){V(e),null==d||d(e)},Ee=m.useMemo((function(){return D?"function"==typeof D?D({arrowPointAtCenter:pe}):D:Ht(pe)}),[D,pe]);if(void 0===ve||!$)return null;var be=function(){U(!1),null==h||h(H)},we="boolean"==typeof ce?ce:!!ce,Ce="boolean"==typeof ce?void 0:ce;return m.createElement(m.Fragment,null,m.createElement(qt,{zIndex:I,prefixCls:n,pos:he,showMask:we,style:null==Ce?void 0:Ce.style,fill:null==Ce?void 0:Ce.color,open:X,animated:S,rootClassName:x,disabledInteraction:z}),m.createElement(Qe,s({},_,{builtinPlacements:Ee,ref:q,popupStyle:te,popupPlacement:me,popupVisible:X,popupClassName:p(x,re),prefixCls:n,popup:function(){return m.createElement(jt,s({arrow:ge,key:"content",prefixCls:n,total:l.length,renderPanel:R,onPrev:function(){ye(H-1)},onNext:function(){ye(H+1)},onClose:be,current:H,onFinish:function(){be(),null==v||v()}},l[H],{closable:le}))},forceRender:!1,destroyPopupOnHide:!0,zIndex:I,getTriggerDOMNode:function(e){return e||ve||document.body},arrow:!!ge}),m.createElement(se,{open:X,autoLock:!0},m.createElement("div",{className:p(x,"".concat(n,"-target-placeholder")),style:i(i({},he||Xt),{},{position:"fixed",pointerEvents:"none"})}))))};v.Component;var Gt={subtree:!0,childList:!0,attributeFilter:["style","class"]};function $t(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gt;m.useEffect((function(){if(b()&&e){var r,o=Array.isArray(e)?e:[e];return"MutationObserver"in window&&(r=new MutationObserver(t),o.forEach((function(e){r.observe(e,n)}))),function(){var e,t;null===(e=r)||void 0===e||e.takeRecords(),null===(t=r)||void 0===t||t.disconnect()}}}),[n,e])}export{V as C,se as P,St as Q,Fe as S,Wt as T,W as a,ne as b,Pt as c,Qe as d,rt as e,ft as f,ct as g,Ot as h,Ft as i,It as j,ot as n,tt as t,$t as u,it as v};

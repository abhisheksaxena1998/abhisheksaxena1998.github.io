import{k as xe,g as I,c as se,e as c,b as de}from"./@babel.CqxtU2kl.js";import{P as Ne}from"./@rc-component.icrtlwR4.js";import{h as Se,p as ue,b as Ee,K as ie,u as fe}from"./rc-util.9PQy9ck0.js";import{r as a}from"./react.DPZx3FLm.js";import{c as p}from"./classnames.CIPFGIzL.js";import{C as ve}from"./rc-motion.cq0Hvde5.js";var me=a.createContext(null),ye=a.createContext({}),Me=["prefixCls","className","containerRef"],De=function(t){var f=t.prefixCls,C=t.className,v=t.containerRef,s=xe(t,Me),i=a.useContext(ye),d=i.panel,w=Se(d,v);return a.createElement("div",I({className:p("".concat(f,"-content"),C),role:"dialog",ref:w},ue(t,{aria:!0}),{"aria-modal":"true"},s))};function Ce(e){return typeof e=="string"&&String(Number(e))===e?(Ee(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var he={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function Pe(e,t){var f,C,v,s=e.prefixCls,i=e.open,d=e.placement,w=e.inline,S=e.push,L=e.forceRender,j=e.autoFocus,A=e.keyboard,u=e.classNames,$=e.rootClassName,F=e.rootStyle,E=e.zIndex,B=e.className,H=e.id,U=e.style,h=e.motion,V=e.width,W=e.height,X=e.children,Y=e.mask,q=e.maskClosable,G=e.maskMotion,J=e.maskClassName,z=e.maskStyle,M=e.afterOpenChange,b=e.onClose,D=e.onMouseEnter,Q=e.onMouseOver,Z=e.onMouseLeave,T=e.onClick,ee=e.onKeyDown,ae=e.onKeyUp,r=e.styles,P=e.drawerRender,m=a.useRef(),O=a.useRef(),K=a.useRef();a.useImperativeHandle(t,function(){return m.current});var te=function(l){var R=l.keyCode,x=l.shiftKey;switch(R){case ie.TAB:{if(R===ie.TAB){if(!x&&document.activeElement===K.current){var N;(N=O.current)===null||N===void 0||N.focus({preventScroll:!0})}else if(x&&document.activeElement===O.current){var le;(le=K.current)===null||le===void 0||le.focus({preventScroll:!0})}}break}case ie.ESC:{b&&A&&(l.stopPropagation(),b(l));break}}};a.useEffect(function(){if(i&&j){var n;(n=m.current)===null||n===void 0||n.focus({preventScroll:!0})}},[i]);var ne=a.useState(!1),oe=se(ne,2),_=oe[0],g=oe[1],o=a.useContext(me),re;typeof S=="boolean"?re=S?{}:{distance:0}:re=S||{};var y=(f=(C=(v=re)===null||v===void 0?void 0:v.distance)!==null&&C!==void 0?C:o==null?void 0:o.pushDistance)!==null&&f!==void 0?f:180,ke=a.useMemo(function(){return{pushDistance:y,push:function(){g(!0)},pull:function(){g(!1)}}},[y]);a.useEffect(function(){if(i){var n;o==null||(n=o.push)===null||n===void 0||n.call(o)}else{var l;o==null||(l=o.pull)===null||l===void 0||l.call(o)}},[i]),a.useEffect(function(){return function(){var n;o==null||(n=o.pull)===null||n===void 0||n.call(o)}},[]);var we=Y&&a.createElement(ve,I({key:"mask"},G,{visible:i}),function(n,l){var R=n.className,x=n.style;return a.createElement("div",{className:p("".concat(s,"-mask"),R,u==null?void 0:u.mask,J),style:c(c(c({},x),z),r==null?void 0:r.mask),onClick:q&&i?b:void 0,ref:l})}),be=typeof h=="function"?h(d):h,k={};if(_&&y)switch(d){case"top":k.transform="translateY(".concat(y,"px)");break;case"bottom":k.transform="translateY(".concat(-y,"px)");break;case"left":k.transform="translateX(".concat(y,"px)");break;default:k.transform="translateX(".concat(-y,"px)");break}d==="left"||d==="right"?k.width=Ce(V):k.height=Ce(W);var ge={onMouseEnter:D,onMouseOver:Q,onMouseLeave:Z,onClick:T,onKeyDown:ee,onKeyUp:ae},Re=a.createElement(ve,I({key:"panel"},be,{visible:i,forceRender:L,onVisibleChanged:function(l){M==null||M(l)},removeOnLeave:!1,leavedClassName:"".concat(s,"-content-wrapper-hidden")}),function(n,l){var R=n.className,x=n.style,N=a.createElement(De,I({id:H,containerRef:l,prefixCls:s,className:p(B,u==null?void 0:u.content),style:c(c({},U),r==null?void 0:r.content)},ue(e,{aria:!0}),ge),X);return a.createElement("div",I({className:p("".concat(s,"-content-wrapper"),u==null?void 0:u.wrapper,R),style:c(c(c({},k),x),r==null?void 0:r.wrapper)},ue(e,{data:!0})),P?P(N):N)}),ce=c({},F);return E&&(ce.zIndex=E),a.createElement(me.Provider,{value:ke},a.createElement("div",{className:p(s,"".concat(s,"-").concat(d),$,de(de({},"".concat(s,"-open"),i),"".concat(s,"-inline"),w)),style:ce,tabIndex:-1,ref:m,onKeyDown:te},we,a.createElement("div",{tabIndex:0,ref:O,style:he,"aria-hidden":"true","data-sentinel":"start"}),Re,a.createElement("div",{tabIndex:0,ref:K,style:he,"aria-hidden":"true","data-sentinel":"end"})))}var Oe=a.forwardRef(Pe),$e=function(t){var f=t.open,C=f===void 0?!1:f,v=t.prefixCls,s=v===void 0?"rc-drawer":v,i=t.placement,d=i===void 0?"right":i,w=t.autoFocus,S=w===void 0?!0:w,L=t.keyboard,j=L===void 0?!0:L,A=t.width,u=A===void 0?378:A,$=t.mask,F=$===void 0?!0:$,E=t.maskClosable,B=E===void 0?!0:E,H=t.getContainer,U=t.forceRender,h=t.afterOpenChange,V=t.destroyOnClose,W=t.onMouseEnter,X=t.onMouseOver,Y=t.onMouseLeave,q=t.onClick,G=t.onKeyDown,J=t.onKeyUp,z=t.panelRef,M=a.useState(!1),b=se(M,2),D=b[0],Q=b[1],Z=a.useState(!1),T=se(Z,2),ee=T[0],ae=T[1];fe(function(){ae(!0)},[]);var r=ee?C:!1,P=a.useRef(),m=a.useRef();fe(function(){r&&(m.current=document.activeElement)},[r]);var O=function(_){var g;if(Q(_),h==null||h(_),!_&&m.current&&!((g=P.current)!==null&&g!==void 0&&g.contains(m.current))){var o;(o=m.current)===null||o===void 0||o.focus({preventScroll:!0})}},K=a.useMemo(function(){return{panel:z}},[z]);if(!U&&!D&&!r&&V)return null;var te={onMouseEnter:W,onMouseOver:X,onMouseLeave:Y,onClick:q,onKeyDown:G,onKeyUp:J},ne=c(c({},t),{},{open:r,prefixCls:s,placement:d,autoFocus:S,keyboard:j,width:u,mask:F,maskClosable:B,inline:H===!1,afterOpenChange:O,ref:P},te);return a.createElement(ye.Provider,{value:K},a.createElement(Ne,{open:r||U||D,autoDestroy:!1,getContainer:H,autoLock:F&&(r||D)},a.createElement(Oe,ne)))};export{$e as D};

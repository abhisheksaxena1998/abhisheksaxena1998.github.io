import{K as oe,p as Ie,i as be}from"./rc-util-fvOsdOwp.js";import{f as Z,e as ae,b as W,d as $e,c as Y,g as Ae,h as fn}from"./@babel-lqQsMmn5.js";import{u as hn,b as pn,B as gn}from"./rc-select-xkYq3pjc.js";import{r as o}from"./react-jw9l9ZC3.js";import{c as mn,a as Le}from"./rc-tree-xjdhpdXH.js";import{c as ke}from"./classnames-96-Rrpk_.js";var ge=o.createContext(null),fe="__rc_cascader_search_mark__",Cn=function(a,n,t){var r=t.label;return n.some(function(i){return String(i[r]).toLowerCase().includes(a.toLowerCase())})},Sn=function(a,n,t,r){return n.map(function(i){return i[r.label]}).join(" / ")};const bn=function(e,a,n,t,r,i){var c=r.filter,l=c===void 0?Cn:c,s=r.render,d=s===void 0?Sn:s,C=r.limit,v=C===void 0?50:C,h=r.sort;return o.useMemo(function(){var S=[];if(!e)return[];function f(m,k){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;m.forEach(function(g){if(!(!h&&v!==!1&&v>0&&S.length>=v)){var D=[].concat(Z(k),[g]),R=g[n.children],K=w||g.disabled;if((!R||R.length===0||i)&&l(e,D,{label:n.label})){var y;S.push(ae(ae({},g),{},(y={disabled:K},W(y,n.label,d(e,D,t,n)),W(y,fe,D),W(y,n.children,void 0),y)))}R&&f(g[n.children],D,K)}})}return f(a,[]),h&&S.sort(function(m,k){return h(m[fe],k[fe],e,n)}),v!==!1&&v>0?S.slice(0,v):S},[e,a,n,t,d,i,l,h,v])};var De="__RC_CASCADER_SPLIT__",He="SHOW_PARENT",We="SHOW_CHILD";function ee(e){return e.join(De)}function he(e){return e.map(ee)}function yn(e){return e.split(De)}function Fe(e){var a=e||{},n=a.label,t=a.value,r=a.children,i=t||"value";return{label:n||"label",value:i,key:i,children:r||"children"}}function Se(e,a){var n,t;return(n=e.isLeaf)!==null&&n!==void 0?n:!((t=e[a.children])!==null&&t!==void 0&&t.length)}function kn(e){var a=e.parentElement;if(a){var n=e.offsetTop-a.offsetTop;n-a.scrollTop<0?a.scrollTo({top:n}):n+e.offsetHeight-a.scrollTop>a.offsetHeight&&a.scrollTo({top:n+e.offsetHeight-a.offsetHeight})}}function Be(e,a){return e.map(function(n){var t;return(t=n[fe])===null||t===void 0?void 0:t.map(function(r){return r[a.value]})})}function xn(e){return Array.isArray(e)&&Array.isArray(e[0])}function ye(e){return e?xn(e)?e:(e.length===0?[]:[e]).map(function(a){return Array.isArray(a)?a:[a]}):[]}function Ue(e,a,n){var t=new Set(e),r=a();return e.filter(function(i){var c=r[i],l=c?c.parent:null,s=c?c.children:null;return c&&c.node.disabled?!0:n===We?!(s&&s.some(function(d){return d.key&&t.has(d.key)})):!(l&&!l.node.disabled&&t.has(l.key))})}function pe(e,a,n){for(var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=a,i=[],c=function(){var d,C,v,h=e[l],S=(d=r)===null||d===void 0?void 0:d.findIndex(function(m){var k=m[n.value];return t?String(k)===String(h):k===h}),f=S!==-1?(C=r)===null||C===void 0?void 0:C[S]:null;i.push({value:(v=f==null?void 0:f[n.value])!==null&&v!==void 0?v:h,index:S,option:f}),r=f==null?void 0:f[n.children]},l=0;l<e.length;l+=1)c();return i}const Vn=function(e,a,n,t,r){return o.useMemo(function(){var i=r||function(c){var l=t?c.slice(-1):c,s=" / ";return l.every(function(d){return["string","number"].includes($e(d))})?l.join(s):l.reduce(function(d,C,v){var h=o.isValidElement(C)?o.cloneElement(C,{key:v}):C;return v===0?[h]:[].concat(Z(d),[s,h])},[])};return e.map(function(c){var l,s=pe(c,a,n),d=i(s.map(function(v){var h,S=v.option,f=v.value;return(h=S==null?void 0:S[n.label])!==null&&h!==void 0?h:f}),s.map(function(v){var h=v.option;return h})),C=ee(c);return{label:d,value:C,key:C,valueCells:c,disabled:(l=s[s.length-1])===null||l===void 0||(l=l.option)===null||l===void 0?void 0:l.disabled}})},[e,a,n,r,t])};function je(e,a){return o.useCallback(function(n){var t=[],r=[];return n.forEach(function(i){var c=pe(i,e,a);c.every(function(l){return l.option})?r.push(i):t.push(i)}),[r,t]},[e,a])}const _n=function(e,a){var n=o.useRef({options:null,info:null}),t=o.useCallback(function(){return n.current.options!==e&&(n.current.options=e,n.current.info=mn(e,{fieldNames:a,initWrapper:function(i){return ae(ae({},i),{},{pathKeyEntities:{}})},processEntity:function(i,c){var l=i.nodes.map(function(s){return s[a.value]}).join(De);c.pathKeyEntities[l]=i,i.key=l}})),n.current.info.pathKeyEntities},[a,e]);return t};function Je(e,a){var n=o.useMemo(function(){return a||[]},[a]),t=_n(n,e),r=o.useCallback(function(i){var c=t();return i.map(function(l){var s=c[l].nodes;return s.map(function(d){return d[e.value]})})},[t,e]);return[n,t,r]}function On(e){return o.useMemo(function(){if(!e)return[!1,{}];var a={matchInputWidth:!0,limit:50};return e&&$e(e)==="object"&&(a=ae(ae({},a),e)),a.limit<=0&&delete a.limit,[!0,a]},[e])}function Xe(e,a,n,t,r,i,c,l){return function(s){if(!e)a(s);else{var d=ee(s),C=he(n),v=he(t),h=C.includes(d),S=r.some(function(y){return ee(y)===d}),f=n,m=r;if(S&&!h)m=r.filter(function(y){return ee(y)!==d});else{var k=h?C.filter(function(y){return y!==d}):[].concat(Z(C),[d]),w=i(),g;if(h){var D=Le(k,{checked:!1,halfCheckedKeys:v},w);g=D.checkedKeys}else{var R=Le(k,!0,w);g=R.checkedKeys}var K=Ue(g,i,l);f=c(K)}a([].concat(Z(m),Z(f)))}}}function qe(e,a,n,t,r){return o.useMemo(function(){var i=r(a),c=Y(i,2),l=c[0],s=c[1];if(!e||!a.length)return[l,[],s];var d=he(l),C=n(),v=Le(d,!0,C),h=v.checkedKeys,S=v.halfCheckedKeys;return[t(h),t(S),s]},[e,a,n,t,r])}var Pn=o.memo(function(e){var a=e.children;return a},function(e,a){return!a.open});function En(e){var a,n=e.prefixCls,t=e.checked,r=e.halfChecked,i=e.disabled,c=e.onClick,l=e.disableCheckbox,s=o.useContext(ge),d=s.checkable,C=typeof d!="boolean"?d:null;return o.createElement("span",{className:ke("".concat(n),(a={},W(a,"".concat(n,"-checked"),t),W(a,"".concat(n,"-indeterminate"),!t&&r),W(a,"".concat(n,"-disabled"),i||l),a)),onClick:c},C)}var Ge="__cascader_fix_label__";function wn(e){var a=e.prefixCls,n=e.multiple,t=e.options,r=e.activeValue,i=e.prevValuePath,c=e.onToggleOpen,l=e.onSelect,s=e.onActive,d=e.checkedSet,C=e.halfCheckedSet,v=e.loadingKeys,h=e.isSelectable,S=e.searchValue,f="".concat(a,"-menu"),m="".concat(a,"-menu-item"),k=o.useContext(ge),w=k.fieldNames,g=k.changeOnSelect,D=k.expandTrigger,R=k.expandIcon,K=k.loadingIcon,y=k.dropdownMenuColumnStyle,b=D==="hover",M=o.useMemo(function(){return t.map(function(u){var x,V=u.disabled,O=u.disableCheckbox,$=u[fe],I=(x=u[Ge])!==null&&x!==void 0?x:u[w.label],L=u[w.value],q=Se(u,w),U=$?$.map(function(j){return j[w.value]}):[].concat(Z(i),[L]),N=ee(U),A=v.includes(N),F=d.has(N),B=C.has(N);return{disabled:V,label:I,value:L,isLeaf:q,isLoading:A,checked:F,halfChecked:B,option:u,disableCheckbox:O,fullPath:U,fullPathKey:N}})},[t,d,w,C,v,i]);return o.createElement("ul",{className:f,role:"menu"},M.map(function(u){var x,V=u.disabled,O=u.label,$=u.value,I=u.isLeaf,L=u.isLoading,q=u.checked,U=u.halfChecked,N=u.option,A=u.fullPath,F=u.fullPathKey,B=u.disableCheckbox,j=function(){if(!(V||S)){var G=Z(A);b&&I&&G.pop(),s(G)}},te=function(){h(N)&&l(A,I)},z;return typeof N.title=="string"?z=N.title:typeof O=="string"&&(z=O),o.createElement("li",{key:F,className:ke(m,(x={},W(x,"".concat(m,"-expand"),!I),W(x,"".concat(m,"-active"),r===$||r===F),W(x,"".concat(m,"-disabled"),V),W(x,"".concat(m,"-loading"),L),x)),style:y,role:"menuitemcheckbox",title:z,"aria-checked":q,"data-path-key":F,onClick:function(){j(),!B&&(!n||I)&&te()},onDoubleClick:function(){g&&c(!1)},onMouseEnter:function(){b&&j()},onMouseDown:function(G){G.preventDefault()}},n&&o.createElement(En,{prefixCls:"".concat(a,"-checkbox"),checked:q,halfChecked:U,disabled:V||B,disableCheckbox:B,onClick:function(G){B||(G.stopPropagation(),te())}}),o.createElement("div",{className:"".concat(m,"-content")},O),!L&&R&&!I&&o.createElement("div",{className:"".concat(m,"-expand-icon")},R),L&&K&&o.createElement("div",{className:"".concat(m,"-loading-icon")},K))}))}const Mn=function(e,a){var n=o.useContext(ge),t=n.values,r=o.useState([]),i=Y(r,2),c=i[0],l=i[1];return o.useEffect(function(){if(a&&!e){var s=t[0];l(s||[])}},[a]),[c,l]},In=function(e,a,n,t,r,i,c){var l=c.direction,s=c.searchValue,d=c.toggleOpen,C=c.open,v=l==="rtl",h=o.useMemo(function(){for(var y=-1,b=a,M=[],u=[],x=t.length,V=Be(a,n),O=function(U){var N=b.findIndex(function(A,F){return(V[F]?ee(V[F]):A[n.value])===t[U]});if(N===-1)return 1;y=N,M.push(y),u.push(t[U]),b=b[y][n.children]},$=0;$<x&&b&&!O($);$+=1);for(var I=a,L=0;L<M.length-1;L+=1)I=I[M[L]][n.children];return[u,y,I,V]},[t,n,a]),S=Y(h,4),f=S[0],m=S[1],k=S[2],w=S[3],g=function(b){r(b)},D=function(b){var M=k.length,u=m;u===-1&&b<0&&(u=M);for(var x=0;x<M;x+=1){u=(u+b+M)%M;var V=k[u];if(V&&!V.disabled){var O=f.slice(0,-1).concat(w[u]?ee(w[u]):V[n.value]);g(O);return}}},R=function(){if(f.length>1){var b=f.slice(0,-1);g(b)}else d(!1)},K=function(){var b,M=((b=k[m])===null||b===void 0?void 0:b[n.children])||[],u=M.find(function(V){return!V.disabled});if(u){var x=[].concat(Z(f),[u[n.value]]);g(x)}};o.useImperativeHandle(e,function(){return{onKeyDown:function(b){var M=b.which;switch(M){case oe.UP:case oe.DOWN:{var u=0;M===oe.UP?u=-1:M===oe.DOWN&&(u=1),u!==0&&D(u);break}case oe.LEFT:{if(s)break;v?K():R();break}case oe.RIGHT:{if(s)break;v?R():K();break}case oe.BACKSPACE:{s||R();break}case oe.ENTER:{if(f.length){var x=k[m],V=(x==null?void 0:x[fe])||[];V.length?i(V.map(function(O){return O[n.value]}),V[V.length-1]):i(f,k[m])}break}case oe.ESC:d(!1),C&&b.stopPropagation()}},onKeyUp:function(){}}})};var Ye=o.forwardRef(function(e,a){var n,t,r,i=e.prefixCls,c=e.multiple,l=e.searchValue,s=e.toggleOpen,d=e.notFoundContent,C=e.direction,v=e.open,h=o.useRef(),S=C==="rtl",f=o.useContext(ge),m=f.options,k=f.values,w=f.halfValues,g=f.fieldNames,D=f.changeOnSelect,R=f.onSelect,K=f.searchOptions,y=f.dropdownPrefixCls,b=f.loadData,M=f.expandTrigger,u=y||i,x=o.useState([]),V=Y(x,2),O=V[0],$=V[1],I=function(p){if(!(!b||l)){var _=pe(p,m,g),P=_.map(function(ne){var ie=ne.option;return ie}),H=P[P.length-1];if(H&&!Se(H,g)){var re=ee(p);$(function(ne){return[].concat(Z(ne),[re])}),b(P)}}};o.useEffect(function(){O.length&&O.forEach(function(E){var p=yn(E),_=pe(p,m,g,!0).map(function(H){var re=H.option;return re}),P=_[_.length-1];(!P||P[g.children]||Se(P,g))&&$(function(H){return H.filter(function(re){return re!==E})})})},[m,O,g]);var L=o.useMemo(function(){return new Set(he(k))},[k]),q=o.useMemo(function(){return new Set(he(w))},[w]),U=Mn(c,v),N=Y(U,2),A=N[0],F=N[1],B=function(p){F(p),I(p)},j=function(p){var _=p.disabled,P=Se(p,g);return!_&&(P||D||c)},te=function(p,_){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;R(p),!c&&(_||D&&(M==="hover"||P))&&s(!1)},z=o.useMemo(function(){return l?K:m},[l,K,m]),T=o.useMemo(function(){for(var E=[{options:z}],p=z,_=Be(p,g),P=function(){var ne=A[H],ie=p.find(function(xe,me){return(_[me]?ee(_[me]):xe[g.value])===ne}),se=ie==null?void 0:ie[g.children];if(!(se!=null&&se.length))return 1;p=se,E.push({options:se})},H=0;H<A.length&&!P();H+=1);return E},[z,A,g]),G=function(p,_){j(_)&&te(p,Se(_,g),!0)};In(a,z,g,A,B,G,{direction:C,searchValue:l,toggleOpen:s,open:v}),o.useEffect(function(){for(var E=0;E<A.length;E+=1){var p,_=A.slice(0,E+1),P=ee(_),H=(p=h.current)===null||p===void 0?void 0:p.querySelector('li[data-path-key="'.concat(P.replace(/\\{0,2}"/g,'\\"'),'"]'));H&&kn(H)}},[A]);var le=!((n=T[0])!==null&&n!==void 0&&(n=n.options)!==null&&n!==void 0&&n.length),ue=[(t={},W(t,g.value,"__EMPTY__"),W(t,Ge,d),W(t,"disabled",!0),t)],ve=ae(ae({},e),{},{multiple:!le&&c,onSelect:te,onActive:B,onToggleOpen:s,checkedSet:L,halfCheckedSet:q,loadingKeys:O,isSelectable:j}),J=le?[{options:ue}]:T,ce=J.map(function(E,p){var _=A.slice(0,p),P=A[p];return o.createElement(wn,Ae({key:p},ve,{searchValue:l,prefixCls:u,options:E.options,prevValuePath:_,activeValue:P}))});return o.createElement(Pn,{open:v},o.createElement("div",{className:ke("".concat(u,"-menus"),(r={},W(r,"".concat(u,"-menu-empty"),le),W(r,"".concat(u,"-rtl"),S),r)),ref:h},ce))}),Ln=o.forwardRef(function(e,a){var n=hn();return o.createElement(Ye,Ae({},e,n,{ref:a}))});function An(){}function Dn(e){var a,n=e,t=n.prefixCls,r=t===void 0?"rc-cascader":t,i=n.style,c=n.className,l=n.options,s=n.checkable,d=n.defaultValue,C=n.value,v=n.fieldNames,h=n.changeOnSelect,S=n.onChange,f=n.showCheckedStrategy,m=n.loadData,k=n.expandTrigger,w=n.expandIcon,g=w===void 0?">":w,D=n.loadingIcon,R=n.direction,K=n.notFoundContent,y=K===void 0?"Not Found":K,b=!!s,M=Ie(d,{value:C,postState:ye}),u=Y(M,2),x=u[0],V=u[1],O=o.useMemo(function(){return Fe(v)},[JSON.stringify(v)]),$=Je(O,l),I=Y($,3),L=I[0],q=I[1],U=I[2],N=je(L,O),A=qe(b,x,q,U,N),F=Y(A,3),B=F[0],j=F[1],te=F[2],z=be(function(J){if(V(J),S){var ce=ye(J),E=ce.map(function(P){return pe(P,L,O).map(function(H){return H.option})}),p=b?ce:ce[0],_=b?E:E[0];S(p,_)}}),T=Xe(b,z,B,j,te,q,U,f),G=be(function(J){T(J)}),le=o.useMemo(function(){return{options:L,fieldNames:O,values:B,halfValues:j,changeOnSelect:h,onSelect:G,checkable:s,searchOptions:[],dropdownPrefixCls:null,loadData:m,expandTrigger:k,expandIcon:g,loadingIcon:D,dropdownMenuColumnStyle:null}},[L,O,B,j,h,G,s,m,k,g,D]),ue="".concat(r,"-panel"),ve=!L.length;return o.createElement(ge.Provider,{value:le},o.createElement("div",{className:ke(ue,(a={},W(a,"".concat(ue,"-rtl"),R==="rtl"),W(a,"".concat(ue,"-empty"),ve),a),c),style:i},ve?y:o.createElement(Ye,{prefixCls:r,searchValue:null,multiple:b,toggleOpen:An,open:!0,direction:R})))}var Rn=["id","prefixCls","fieldNames","defaultValue","value","changeOnSelect","onChange","displayRender","checkable","autoClearSearchValue","searchValue","onSearch","showSearch","expandTrigger","options","dropdownPrefixCls","loadData","popupVisible","open","popupClassName","dropdownClassName","dropdownMenuColumnStyle","dropdownStyle","popupPlacement","placement","onDropdownVisibleChange","onPopupVisibleChange","expandIcon","loadingIcon","children","dropdownMatchSelectWidth","showCheckedStrategy"],Re=o.forwardRef(function(e,a){var n=e.id,t=e.prefixCls,r=t===void 0?"rc-cascader":t,i=e.fieldNames,c=e.defaultValue,l=e.value,s=e.changeOnSelect,d=e.onChange,C=e.displayRender,v=e.checkable,h=e.autoClearSearchValue,S=h===void 0?!0:h,f=e.searchValue,m=e.onSearch,k=e.showSearch,w=e.expandTrigger,g=e.options,D=e.dropdownPrefixCls,R=e.loadData,K=e.popupVisible,y=e.open,b=e.popupClassName,M=e.dropdownClassName,u=e.dropdownMenuColumnStyle,x=e.dropdownStyle,V=e.popupPlacement,O=e.placement,$=e.onDropdownVisibleChange,I=e.onPopupVisibleChange,L=e.expandIcon,q=L===void 0?">":L,U=e.loadingIcon,N=e.children,A=e.dropdownMatchSelectWidth,F=A===void 0?!1:A,B=e.showCheckedStrategy,j=B===void 0?He:B,te=fn(e,Rn),z=pn(n),T=!!v,G=Ie(c,{value:l,postState:ye}),le=Y(G,2),ue=le[0],ve=le[1],J=o.useMemo(function(){return Fe(i)},[JSON.stringify(i)]),ce=Je(J,g),E=Y(ce,3),p=E[0],_=E[1],P=E[2],H=Ie("",{value:f,postState:function(X){return X||""}}),re=Y(H,2),ne=re[0],ie=re[1],se=function(X,de){ie(X),de.source!=="blur"&&m&&m(X)},xe=On(k),me=Y(xe,2),ze=me[0],Te=me[1],Ve=bn(ne,p,J,D||r,Te,s),Qe=je(p,J),Ze=qe(T,ue,_,P,Qe),_e=Y(Ze,3),Ce=_e[0],Oe=_e[1],Pe=_e[2],en=o.useMemo(function(){var Q=he(Ce),X=Ue(Q,_,j);return[].concat(Z(Pe),Z(P(X)))},[Ce,_,P,Pe,j]),nn=Vn(en,p,J,T,C),Ke=be(function(Q){if(ve(Q),d){var X=ye(Q),de=X.map(function(dn){return pe(dn,p,J).map(function(vn){return vn.option})}),we=T?X:X[0],Me=T?de:de[0];d(we,Me)}}),an=Xe(T,Ke,Ce,Oe,Pe,_,P,j),Ee=be(function(Q){(!T||S)&&ie(""),an(Q)}),tn=function(X,de){if(de.type==="clear"){Ke([]);return}var we=de.values[0],Me=we.valueCells;Ee(Me)},rn=y!==void 0?y:K,on=M||b,ln=O||V,un=function(X){$==null||$(X),I==null||I(X)},cn=o.useMemo(function(){return{options:p,fieldNames:J,values:Ce,halfValues:Oe,changeOnSelect:s,onSelect:Ee,checkable:v,searchOptions:Ve,dropdownPrefixCls:D,loadData:R,expandTrigger:w,expandIcon:q,loadingIcon:U,dropdownMenuColumnStyle:u}},[p,J,Ce,Oe,s,Ee,v,Ve,D,R,w,q,U,u]),Ne=!(ne?Ve:p).length,sn=ne&&Te.matchInputWidth||Ne?{}:{minWidth:"auto"};return o.createElement(ge.Provider,{value:cn},o.createElement(gn,Ae({},te,{ref:a,id:z,prefixCls:r,autoClearSearchValue:S,dropdownMatchSelectWidth:F,dropdownStyle:ae(ae({},sn),x),displayValues:nn,onDisplayValuesChange:tn,mode:T?"multiple":void 0,searchValue:ne,onSearch:se,showSearch:ze,OptionList:Ln,emptyOptions:Ne,open:rn,dropdownClassName:on,placement:ln,onDropdownVisibleChange:un,getRawInputElement:function(){return N}})))});Re.SHOW_PARENT=He;Re.SHOW_CHILD=We;Re.Panel=Dn;export{Re as C,Dn as P};

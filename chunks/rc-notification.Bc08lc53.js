import{c as e,d as n,g as t,b as o,k as r,e as c,f as a}from"./@babel.BGkJ1U9u.js";import{r as s,a as i}from"./react.DlfX74Oz.js";import{r as l}from"./react-dom.tsMZo23m.js";import{c as u}from"./classnames.BmZ8OyLm.js";import{a as f}from"./rc-motion.BpKOU8X5.js";import{p as m,K as v}from"./rc-util.DIscDwjl.js";var d=s.forwardRef((function(r,c){var a=r.prefixCls,i=r.style,l=r.className,f=r.duration,d=void 0===f?4.5:f,p=r.showProgress,y=r.pauseOnHover,h=void 0===y||y,k=r.eventKey,g=r.content,N=r.closable,E=r.closeIcon,C=void 0===E?"x":E,x=r.props,b=r.onClick,R=r.onNoticeClose,j=r.times,w=r.hovering,A=s.useState(!1),S=e(A,2),M=S[0],I=S[1],H=s.useState(0),L=e(H,2),O=L[0],W=L[1],D=s.useState(0),F=e(D,2),K=F[0],P=F[1],T=w||M,q=d>0&&p,X=function(){R(k)};s.useEffect((function(){if(!T&&d>0){var e=Date.now()-K,n=setTimeout((function(){X()}),1e3*d-K);return function(){h&&clearTimeout(n),P(Date.now()-e)}}}),[d,T,j]),s.useEffect((function(){if(!T&&q&&(h||0===K)){var e,n=performance.now();return function t(){cancelAnimationFrame(e),e=requestAnimationFrame((function(e){var o=e+K-n,r=Math.min(o/(1e3*d),1);W(100*r),r<1&&t()}))}(),function(){h&&cancelAnimationFrame(e)}}}),[d,K,T,q,j]);var z=s.useMemo((function(){return"object"===n(N)&&null!==N?N:N?{closeIcon:C}:{}}),[N,C]),B=m(z,!0),G=100-(!O||O<0?0:O>100?100:O),J="".concat(a,"-notice");return s.createElement("div",t({},x,{ref:c,className:u(J,l,o({},"".concat(J,"-closable"),N)),style:i,onMouseEnter:function(e){var n;I(!0),null==x||null===(n=x.onMouseEnter)||void 0===n||n.call(x,e)},onMouseLeave:function(e){var n;I(!1),null==x||null===(n=x.onMouseLeave)||void 0===n||n.call(x,e)},onClick:b}),s.createElement("div",{className:"".concat(J,"-content")},g),N&&s.createElement("a",t({tabIndex:0,className:"".concat(J,"-close"),onKeyDown:function(e){"Enter"!==e.key&&"Enter"!==e.code&&e.keyCode!==v.ENTER||X()},"aria-label":"Close"},B,{onClick:function(e){e.preventDefault(),e.stopPropagation(),X()}}),z.closeIcon),q&&s.createElement("progress",{className:"".concat(J,"-progress"),max:"100",value:G},G+"%"))})),p=i.createContext({}),y=function(e){var n=e.children,t=e.classNames;return i.createElement(p.Provider,{value:{classNames:t}},n)},h=["className","style","classNames","styles"],k=function(l){var m,v,y,k,g,N=l.configList,E=l.placement,C=l.prefixCls,x=l.className,b=l.style,R=l.motion,j=l.onAllNoticeRemoved,w=l.onNoticeClose,A=l.stack,S=s.useContext(p).classNames,M=s.useRef({}),I=s.useState(null),H=e(I,2),L=H[0],O=H[1],W=s.useState([]),D=e(W,2),F=D[0],K=D[1],P=N.map((function(e){return{config:e,key:String(e.key)}})),T=(g={offset:8,threshold:3,gap:16},(m=A)&&"object"===n(m)&&(g.offset=null!==(v=m.offset)&&void 0!==v?v:8,g.threshold=null!==(y=m.threshold)&&void 0!==y?y:3,g.gap=null!==(k=m.gap)&&void 0!==k?k:16),[!!m,g]),q=e(T,2),X=q[0],z=q[1],B=z.offset,G=z.threshold,J=z.gap,Q=X&&(F.length>0||P.length<=G),U="function"==typeof R?R(E):R;return s.useEffect((function(){X&&F.length>1&&K((function(e){return e.filter((function(e){return P.some((function(n){var t=n.key;return e===t}))}))}))}),[F,P,X]),s.useEffect((function(){var e,n;X&&M.current[null===(e=P[P.length-1])||void 0===e?void 0:e.key]&&O(M.current[null===(n=P[P.length-1])||void 0===n?void 0:n.key])}),[P,X]),i.createElement(f,t({key:E,className:u(C,"".concat(C,"-").concat(E),null==S?void 0:S.list,x,o(o({},"".concat(C,"-stack"),!!X),"".concat(C,"-stack-expanded"),Q)),style:b,keys:P,motionAppear:!0},U,{onAllRemoved:function(){j(E)}}),(function(e,n){var o=e.config,s=e.className,l=e.style,f=e.index,m=o,v=m.key,p=m.times,y=String(v),k=o,g=k.className,N=k.style,x=k.classNames,b=k.styles,R=r(k,h),j=P.findIndex((function(e){return e.key===y})),A={};if(X){var I=P.length-1-(j>-1?j:f-1),H="top"===E||"bottom"===E?"-50%":"0";if(I>0){var O,W,D;A.height=Q?null===(O=M.current[y])||void 0===O?void 0:O.offsetHeight:null==L?void 0:L.offsetHeight;for(var T=0,q=0;q<I;q++){var z;T+=(null===(z=M.current[P[P.length-1-q].key])||void 0===z?void 0:z.offsetHeight)+J}var G=(Q?T:I*B)*(E.startsWith("top")?1:-1),U=!Q&&null!=L&&L.offsetWidth&&null!==(W=M.current[y])&&void 0!==W&&W.offsetWidth?((null==L?void 0:L.offsetWidth)-2*B*(I<3?I:3))/(null===(D=M.current[y])||void 0===D?void 0:D.offsetWidth):1;A.transform="translate3d(".concat(H,", ").concat(G,"px, 0) scaleX(").concat(U,")")}else A.transform="translate3d(".concat(H,", 0, 0)")}return i.createElement("div",{ref:n,className:u("".concat(C,"-notice-wrapper"),s,null==x?void 0:x.wrapper),style:c(c(c({},l),A),null==b?void 0:b.wrapper),onMouseEnter:function(){return K((function(e){return e.includes(y)?e:[].concat(a(e),[y])}))},onMouseLeave:function(){return K((function(e){return e.filter((function(e){return e!==y}))}))}},i.createElement(d,t({},R,{ref:function(e){j>-1?M.current[y]=e:delete M.current[y]},prefixCls:C,classNames:x,styles:b,className:u(g,null==S?void 0:S.notice),style:N,times:p,key:v,eventKey:v,onNoticeClose:w,hovering:X&&F.length>0})))}))},g=s.forwardRef((function(n,t){var o=n.prefixCls,r=void 0===o?"rc-notification":o,i=n.container,u=n.motion,f=n.maxCount,m=n.className,v=n.style,d=n.onAllRemoved,p=n.stack,y=n.renderNotifications,h=s.useState([]),g=e(h,2),N=g[0],E=g[1],C=function(e){var n,t=N.find((function(n){return n.key===e}));null==t||null===(n=t.onClose)||void 0===n||n.call(t),E((function(n){return n.filter((function(n){return n.key!==e}))}))};s.useImperativeHandle(t,(function(){return{open:function(e){E((function(n){var t,o=a(n),r=o.findIndex((function(n){return n.key===e.key})),s=c({},e);r>=0?(s.times=((null===(t=n[r])||void 0===t?void 0:t.times)||0)+1,o[r]=s):(s.times=0,o.push(s));return f>0&&o.length>f&&(o=o.slice(-f)),o}))},close:function(e){C(e)},destroy:function(){E([])}}}));var x=s.useState({}),b=e(x,2),R=b[0],j=b[1];s.useEffect((function(){var e={};N.forEach((function(n){var t=n.placement,o=void 0===t?"topRight":t;o&&(e[o]=e[o]||[],e[o].push(n))})),Object.keys(R).forEach((function(n){e[n]=e[n]||[]})),j(e)}),[N]);var w=function(e){j((function(n){var t=c({},n);return(t[e]||[]).length||delete t[e],t}))},A=s.useRef(!1);if(s.useEffect((function(){Object.keys(R).length>0?A.current=!0:A.current&&(null==d||d(),A.current=!1)}),[R]),!i)return null;var S=Object.keys(R);return l.createPortal(s.createElement(s.Fragment,null,S.map((function(e){var n=R[e],t=s.createElement(k,{key:e,configList:n,placement:e,prefixCls:r,className:null==m?void 0:m(e),style:null==v?void 0:v(e),motion:u,onNoticeClose:C,onAllNoticeRemoved:w,stack:p});return y?y(t,{prefixCls:r,key:e}):t}))),i)})),N=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],E=function(){return document.body},C=0;function x(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.getContainer,o=void 0===t?E:t,c=n.motion,i=n.prefixCls,l=n.maxCount,u=n.className,f=n.style,m=n.onAllRemoved,v=n.stack,d=n.renderNotifications,p=r(n,N),y=s.useState(),h=e(y,2),k=h[0],x=h[1],b=s.useRef(),R=s.createElement(g,{container:k,ref:b,prefixCls:i,motion:c,maxCount:l,className:u,style:f,onAllRemoved:m,stack:v,renderNotifications:d}),j=s.useState([]),w=e(j,2),A=w[0],S=w[1],M=s.useMemo((function(){return{open:function(e){var n=function(){for(var e={},n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return t.forEach((function(n){n&&Object.keys(n).forEach((function(t){var o=n[t];void 0!==o&&(e[t]=o)}))})),e}(p,e);null!==n.key&&void 0!==n.key||(n.key="rc-notification-".concat(C),C+=1),S((function(e){return[].concat(a(e),[{type:"open",config:n}])}))},close:function(e){S((function(n){return[].concat(a(n),[{type:"close",key:e}])}))},destroy:function(){S((function(e){return[].concat(a(e),[{type:"destroy"}])}))}}}),[]);return s.useEffect((function(){x(o())})),s.useEffect((function(){b.current&&A.length&&(A.forEach((function(e){switch(e.type){case"open":b.current.open(e.config);break;case"close":b.current.close(e.key);break;case"destroy":b.current.destroy()}})),S((function(e){return e.filter((function(e){return!A.includes(e)}))})))}),[A]),[M,R]}export{d as N,y as a,x as u};

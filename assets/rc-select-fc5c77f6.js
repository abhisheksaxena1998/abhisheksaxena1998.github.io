import{r as t,a as hn}from"./react-d998b26c.js";import"./react-is-e8e5dbb3.js";import{w as ut,k as lt,x as cn,K as E,b as ct,m as st,e as dt,a as ft,p as Sn,c as vt,A as mt,q as pt,v as gt}from"./rc-util-6fbd7337.js";import{c as Be}from"./classnames-325479d5.js";import{d as sn,c as ae,e as q,b as oe,g as Fe,h as Je,n as ht,f as Ee}from"./@babel-43e769cc.js";import{F as bt}from"./rc-overflow-309b0131.js";import{c as St}from"./@rc-component-93a12345.js";import{L as wt}from"./rc-virtual-list-87e0183e.js";var dn=function(e){var a=e.className,o=e.customizeIcon,i=e.customizeIconProps,r=e.onMouseDown,c=e.onClick,d=e.children,f;return typeof o=="function"?f=o(i):f=o,t.createElement("span",{className:a,onMouseDown:function(b){b.preventDefault(),r&&r(b)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:c,"aria-hidden":!0},f!==void 0?f:t.createElement("span",{className:Be(a.split(/\s+/).map(function(g){return"".concat(g,"-icon")}))},d))};function Ct(n,e,a,o,i){var r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,c=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0,f=hn.useMemo(function(){if(sn(o)==="object")return o.clearIcon;if(i)return i},[o,i]),g=hn.useMemo(function(){return!!(!r&&o&&(a.length||c)&&!(d==="combobox"&&c===""))},[o,r,a.length,c,d]);return{allowClear:g,clearIcon:hn.createElement(dn,{className:"".concat(n,"-clear"),onMouseDown:e,customizeIcon:f},"×")}}var An=t.createContext(null);function yt(){return t.useContext(An)}function It(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=t.useState(!1),a=ae(e,2),o=a[0],i=a[1],r=t.useRef(null),c=function(){window.clearTimeout(r.current)};t.useEffect(function(){return c},[]);var d=function(g,b){c(),r.current=window.setTimeout(function(){i(g),b&&b()},n)};return[o,d,c]}function Fn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=t.useRef(null),a=t.useRef(null);t.useEffect(function(){return function(){window.clearTimeout(a.current)}},[]);function o(i){(i||e.current===null)&&(e.current=i),window.clearTimeout(a.current),a.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},o]}function Et(n,e,a,o){var i=t.useRef(null);i.current={open:e,triggerOpen:a,customizedTrigger:o},t.useEffect(function(){function r(c){var d;if(!((d=i.current)!==null&&d!==void 0&&d.customizedTrigger)){var f=c.target;f.shadowRoot&&c.composed&&(f=c.composedPath()[0]||f),i.current.open&&n().filter(function(g){return g}).every(function(g){return!g.contains(f)&&g!==f})&&i.current.triggerOpen(!1)}}return window.addEventListener("mousedown",r),function(){return window.removeEventListener("mousedown",r)}},[])}var Dt=function(e,a){var o,i,r=e.prefixCls,c=e.id,d=e.inputElement,f=e.disabled,g=e.tabIndex,b=e.autoFocus,s=e.autoComplete,C=e.editable,l=e.activeDescendantId,S=e.value,P=e.maxLength,Y=e.onKeyDown,N=e.onMouseDown,T=e.onChange,_=e.onPaste,Z=e.onCompositionStart,z=e.onCompositionEnd,X=e.open,ie=e.attrs,K=d||t.createElement("input",null),j=K,$=j.ref,W=j.props,J=W.onKeyDown,ee=W.onChange,V=W.onMouseDown,ne=W.onCompositionStart,L=W.onCompositionEnd,y=W.style;return ut(!("maxLength"in K.props)),K=t.cloneElement(K,q(q(q({type:"search"},W),{},{id:c,ref:lt(a,$),disabled:f,tabIndex:g,autoComplete:s||"off",autoFocus:b,className:Be("".concat(r,"-selection-search-input"),(o=K)===null||o===void 0||(i=o.props)===null||i===void 0?void 0:i.className),role:"combobox","aria-label":"Search","aria-expanded":X||!1,"aria-haspopup":"listbox","aria-owns":"".concat(c,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(c,"_list"),"aria-activedescendant":X?l:void 0},ie),{},{value:C?S:"",maxLength:P,readOnly:!C,unselectable:C?null:"on",style:q(q({},y),{},{opacity:C?null:0}),onKeyDown:function(x){Y(x),J&&J(x)},onMouseDown:function(x){N(x),V&&V(x)},onChange:function(x){T(x),ee&&ee(x)},onCompositionStart:function(x){Z(x),ne&&ne(x)},onCompositionEnd:function(x){z(x),L&&L(x)},onPaste:_})),K},yn=t.forwardRef(Dt);yn.displayName="Input";function kn(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var Rt=typeof window<"u"&&window.document&&window.document.documentElement,Ot=Rt;function Mt(n){return n!=null}function xt(n){return!n&&n!==0}function Pn(n){return["string","number"].includes(sn(n))}function Kn(n){var e=void 0;return n&&(Pn(n.title)?e=n.title.toString():Pn(n.label)&&(e=n.label.toString())),e}function Pt(n,e){Ot?t.useLayoutEffect(n,e):t.useEffect(n,e)}function Nt(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var Nn=function(e){e.preventDefault(),e.stopPropagation()},Vt=function(e){var a=e.id,o=e.prefixCls,i=e.values,r=e.open,c=e.searchValue,d=e.autoClearSearchValue,f=e.inputRef,g=e.placeholder,b=e.disabled,s=e.mode,C=e.showSearch,l=e.autoFocus,S=e.autoComplete,P=e.activeDescendantId,Y=e.tabIndex,N=e.removeIcon,T=e.maxTagCount,_=e.maxTagTextLength,Z=e.maxTagPlaceholder,z=Z===void 0?function(R){return"+ ".concat(R.length," ...")}:Z,X=e.tagRender,ie=e.onToggleOpen,K=e.onRemove,j=e.onInputChange,$=e.onInputPaste,W=e.onInputKeyDown,J=e.onInputMouseDown,ee=e.onInputCompositionStart,V=e.onInputCompositionEnd,ne=t.useRef(null),L=t.useState(0),y=ae(L,2),M=y[0],x=y[1],De=t.useState(!1),fe=ae(De,2),le=fe[0],Pe=fe[1],F="".concat(o,"-selection"),ye=r||s==="multiple"&&d===!1||s==="tags"?c:"",Ne=s==="tags"||s==="multiple"&&d===!1||C&&(r||le);Pt(function(){x(ne.current.scrollWidth)},[ye]);function I(R,G,re,ce,pe){return t.createElement("span",{className:Be("".concat(F,"-item"),oe({},"".concat(F,"-item-disabled"),re)),title:Kn(R)},t.createElement("span",{className:"".concat(F,"-item-content")},G),ce&&t.createElement(dn,{className:"".concat(F,"-item-remove"),onMouseDown:Nn,onClick:pe,customizeIcon:N},"×"))}function v(R,G,re,ce,pe){var ve=function(me){Nn(me),ie(!r)};return t.createElement("span",{onMouseDown:ve},X({label:G,value:R,disabled:re,closable:ce,onClose:pe}))}function D(R){var G=R.disabled,re=R.label,ce=R.value,pe=!b&&!G,ve=re;if(typeof _=="number"&&(typeof re=="string"||typeof re=="number")){var se=String(ve);se.length>_&&(ve="".concat(se.slice(0,_),"..."))}var me=function(Ve){Ve&&Ve.stopPropagation(),K(R)};return typeof X=="function"?v(ce,ve,G,pe,me):I(R,ve,G,pe,me)}function k(R){var G=typeof z=="function"?z(R):z;return I({title:G},G,!1)}var A=t.createElement("div",{className:"".concat(F,"-search"),style:{width:M},onFocus:function(){Pe(!0)},onBlur:function(){Pe(!1)}},t.createElement(yn,{ref:f,open:r,prefixCls:o,id:a,inputElement:null,disabled:b,autoFocus:l,autoComplete:S,editable:Ne,activeDescendantId:P,value:ye,onKeyDown:W,onMouseDown:J,onChange:j,onPaste:$,onCompositionStart:ee,onCompositionEnd:V,tabIndex:Y,attrs:cn(e,!0)}),t.createElement("span",{ref:ne,className:"".concat(F,"-search-mirror"),"aria-hidden":!0},ye," ")),B=t.createElement(bt,{prefixCls:"".concat(F,"-overflow"),data:i,renderItem:D,renderRest:k,suffix:A,itemKey:Nt,maxCount:T});return t.createElement(t.Fragment,null,B,!i.length&&!ye&&t.createElement("span",{className:"".concat(F,"-placeholder")},g))},Tt=function(e){var a=e.inputElement,o=e.prefixCls,i=e.id,r=e.inputRef,c=e.disabled,d=e.autoFocus,f=e.autoComplete,g=e.activeDescendantId,b=e.mode,s=e.open,C=e.values,l=e.placeholder,S=e.tabIndex,P=e.showSearch,Y=e.searchValue,N=e.activeValue,T=e.maxLength,_=e.onInputKeyDown,Z=e.onInputMouseDown,z=e.onInputChange,X=e.onInputPaste,ie=e.onInputCompositionStart,K=e.onInputCompositionEnd,j=e.title,$=t.useState(!1),W=ae($,2),J=W[0],ee=W[1],V=b==="combobox",ne=V||P,L=C[0],y=Y||"";V&&N&&!J&&(y=N),t.useEffect(function(){V&&ee(!1)},[V,N]);var M=b!=="combobox"&&!s&&!P?!1:!!y,x=j===void 0?Kn(L):j,De=function(){if(L)return null;var le=M?{visibility:"hidden"}:void 0;return t.createElement("span",{className:"".concat(o,"-selection-placeholder"),style:le},l)};return t.createElement(t.Fragment,null,t.createElement("span",{className:"".concat(o,"-selection-search")},t.createElement(yn,{ref:r,prefixCls:o,id:i,open:s,inputElement:a,disabled:c,autoFocus:d,autoComplete:f,editable:ne,activeDescendantId:g,value:y,onKeyDown:_,onMouseDown:Z,onChange:function(le){ee(!0),z(le)},onPaste:X,onCompositionStart:ie,onCompositionEnd:K,tabIndex:S,attrs:cn(e,!0),maxLength:V?T:void 0})),!V&&L?t.createElement("span",{className:"".concat(o,"-selection-item"),title:x,style:M?{visibility:"hidden"}:void 0},L.label):null,De())};function Lt(n){return![E.ESC,E.SHIFT,E.BACKSPACE,E.TAB,E.WIN_KEY,E.ALT,E.META,E.WIN_KEY_RIGHT,E.CTRL,E.SEMICOLON,E.EQUALS,E.CAPS_LOCK,E.CONTEXT_MENU,E.F1,E.F2,E.F3,E.F4,E.F5,E.F6,E.F7,E.F8,E.F9,E.F10,E.F11,E.F12].includes(n)}var _t=function(e,a){var o=t.useRef(null),i=t.useRef(!1),r=e.prefixCls,c=e.open,d=e.mode,f=e.showSearch,g=e.tokenWithEnter,b=e.autoClearSearchValue,s=e.onSearch,C=e.onSearchSubmit,l=e.onToggleOpen,S=e.onInputKeyDown,P=e.domRef;t.useImperativeHandle(a,function(){return{focus:function(){o.current.focus()},blur:function(){o.current.blur()}}});var Y=Fn(0),N=ae(Y,2),T=N[0],_=N[1],Z=function(y){var M=y.which;(M===E.UP||M===E.DOWN)&&y.preventDefault(),S&&S(y),M===E.ENTER&&d==="tags"&&!i.current&&!c&&(C==null||C(y.target.value)),Lt(M)&&l(!0)},z=function(){_(!0)},X=t.useRef(null),ie=function(y){s(y,!0,i.current)!==!1&&l(!0)},K=function(){i.current=!0},j=function(y){i.current=!1,d!=="combobox"&&ie(y.target.value)},$=function(y){var M=y.target.value;if(g&&X.current&&/[\r\n]/.test(X.current)){var x=X.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");M=M.replace(x,X.current)}X.current=null,ie(M)},W=function(y){var M=y.clipboardData,x=M.getData("text");X.current=x},J=function(y){var M=y.target;if(M!==o.current){var x=document.body.style.msTouchAction!==void 0;x?setTimeout(function(){o.current.focus()}):o.current.focus()}},ee=function(y){var M=T();y.target!==o.current&&!M&&d!=="combobox"&&y.preventDefault(),(d!=="combobox"&&(!f||!M)||!c)&&(c&&b!==!1&&s("",!0,!1),l())},V={inputRef:o,onInputKeyDown:Z,onInputMouseDown:z,onInputChange:$,onInputPaste:W,onInputCompositionStart:K,onInputCompositionEnd:j},ne=d==="multiple"||d==="tags"?t.createElement(Vt,Fe({},e,V)):t.createElement(Tt,Fe({},e,V));return t.createElement("div",{ref:P,className:"".concat(r,"-selector"),onClick:J,onMouseDown:ee},ne)},$n=t.forwardRef(_t);$n.displayName="Selector";var At=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Ft=function(e){var a=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"}}},kt=function(e,a){var o=e.prefixCls;e.disabled;var i=e.visible,r=e.children,c=e.popupElement,d=e.animation,f=e.transitionName,g=e.dropdownStyle,b=e.dropdownClassName,s=e.direction,C=s===void 0?"ltr":s,l=e.placement,S=e.builtinPlacements,P=e.dropdownMatchSelectWidth,Y=e.dropdownRender,N=e.dropdownAlign,T=e.getPopupContainer,_=e.empty,Z=e.getTriggerDOMNode,z=e.onPopupVisibleChange,X=e.onPopupMouseEnter,ie=Je(e,At),K="".concat(o,"-dropdown"),j=c;Y&&(j=Y(c));var $=t.useMemo(function(){return S||Ft(P)},[S,P]),W=d?"".concat(K,"-").concat(d):f,J=typeof P=="number",ee=t.useMemo(function(){return J?null:P===!1?"minWidth":"width"},[P,J]),V=g;J&&(V=q(q({},V),{},{width:P}));var ne=t.useRef(null);return t.useImperativeHandle(a,function(){return{getPopupElement:function(){return ne.current}}}),t.createElement(St,Fe({},ie,{showAction:z?["click"]:[],hideAction:z?["click"]:[],popupPlacement:l||(C==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:$,prefixCls:K,popupTransitionName:W,popup:t.createElement("div",{ref:ne,onMouseEnter:X},j),stretch:ee,popupAlign:N,popupVisible:i,getPopupContainer:T,popupClassName:Be(b,oe({},"".concat(K,"-empty"),_)),popupStyle:V,getTriggerDOMNode:Z,onPopupVisibleChange:z}),r)},Wn=t.forwardRef(kt);Wn.displayName="SelectTrigger";function Vn(n,e){var a=n.key,o;return"value"in n&&(o=n.value),a??(o!==void 0?o:"rc-index-key-".concat(e))}function Bn(n,e){var a=n||{},o=a.label,i=a.value,r=a.options,c=a.groupLabel,d=o||(e?"children":"label");return{label:d,value:i||"value",options:r||"options",groupLabel:c||d}}function Kt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.fieldNames,o=e.childrenAsData,i=[],r=Bn(a,!1),c=r.label,d=r.value,f=r.options,g=r.groupLabel;function b(s,C){s.forEach(function(l){if(C||!(f in l)){var S=l[d];i.push({key:Vn(l,i.length),groupOption:C,data:l,label:l[c],value:S})}else{var P=l[g];P===void 0&&o&&(P=l.label),i.push({key:Vn(l,i.length),group:!0,data:l,label:P}),b(l[f],!0)}})}return b(n,!1),i}function wn(n){var e=q({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return ct(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}function $t(n,e){if(!e||!e.length)return null;var a=!1;function o(r,c){var d=ht(c),f=d[0],g=d.slice(1);if(!f)return[r];var b=r.split(f);return a=a||b.length>1,b.reduce(function(s,C){return[].concat(Ee(s),Ee(o(C,g)))},[]).filter(function(s){return s})}var i=o(n,e);return a?i:null}var Wt=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Bt=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function Cn(n){return n==="tags"||n==="multiple"}var Ht=t.forwardRef(function(n,e){var a,o,i=n.id,r=n.prefixCls,c=n.className,d=n.showSearch,f=n.tagRender,g=n.direction,b=n.omitDomProps,s=n.displayValues,C=n.onDisplayValuesChange,l=n.emptyOptions,S=n.notFoundContent,P=S===void 0?"Not Found":S,Y=n.onClear,N=n.mode,T=n.disabled,_=n.loading,Z=n.getInputElement,z=n.getRawInputElement,X=n.open,ie=n.defaultOpen,K=n.onDropdownVisibleChange,j=n.activeValue,$=n.onActiveValueChange,W=n.activeDescendantId,J=n.searchValue,ee=n.autoClearSearchValue,V=n.onSearch,ne=n.onSearchSplit,L=n.tokenSeparators,y=n.allowClear,M=n.suffixIcon,x=n.clearIcon,De=n.OptionList,fe=n.animation,le=n.transitionName,Pe=n.dropdownStyle,F=n.dropdownClassName,ye=n.dropdownMatchSelectWidth,Ne=n.dropdownRender,I=n.dropdownAlign,v=n.placement,D=n.builtinPlacements,k=n.getPopupContainer,A=n.showAction,B=A===void 0?[]:A,R=n.onFocus,G=n.onBlur,re=n.onKeyUp,ce=n.onKeyDown,pe=n.onMouseDown,ve=Je(n,Wt),se=Cn(N),me=(d!==void 0?d:se)||N==="combobox",Q=q({},ve);Bt.forEach(function(O){delete Q[O]}),b==null||b.forEach(function(O){delete Q[O]});var Ve=t.useState(!1),Ue=ae(Ve,2),be=Ue[0],Se=Ue[1];t.useEffect(function(){Se(st())},[]);var ze=t.useRef(null),ge=t.useRef(null),Te=t.useRef(null),Ie=t.useRef(null),we=t.useRef(null),Le=It(),Qe=ae(Le,3),je=Qe[0],Ze=Qe[1],Ge=Qe[2];t.useImperativeHandle(e,function(){var O,w;return{focus:(O=Ie.current)===null||O===void 0?void 0:O.focus,blur:(w=Ie.current)===null||w===void 0?void 0:w.blur,scrollTo:function(he){var te;return(te=we.current)===null||te===void 0?void 0:te.scrollTo(he)}}});var Oe=t.useMemo(function(){var O;if(N!=="combobox")return J;var w=(O=s[0])===null||O===void 0?void 0:O.value;return typeof w=="string"||typeof w=="number"?String(w):""},[J,N,s]),en=N==="combobox"&&typeof Z=="function"&&Z()||null,Me=typeof z=="function"&&z(),fn=dt(ge,Me==null||(a=Me.props)===null||a===void 0?void 0:a.ref),an=t.useState(!1),nn=ae(an,2),Xe=nn[0],rn=nn[1];ft(function(){rn(!0)},[]);var vn=Sn(!1,{defaultValue:ie,value:X}),un=ae(vn,2),ln=un[0],tn=un[1],u=Xe?ln:!1,h=!P&&l;(T||h&&u&&N==="combobox")&&(u=!1);var m=h?!1:u,p=t.useCallback(function(O){var w=O!==void 0?O:!u;T||(tn(w),u!==w&&(K==null||K(w)))},[T,u,tn,K]),H=t.useMemo(function(){return(L||[]).some(function(O){return[`
`,`\r
`].includes(O)})},[L]),U=function(w,de,he){var te=!0,Ce=w;$==null||$(null);var Re=he?null:$t(w,L);return N!=="combobox"&&Re&&(Ce="",ne==null||ne(Re),p(!1),te=!1),V&&Oe!==Ce&&V(Ce,{source:de?"typing":"effect"}),te},_e=function(w){!w||!w.trim()||V(w,{source:"submit"})};t.useEffect(function(){!u&&!se&&N!=="combobox"&&U("",!1,!1)},[u]),t.useEffect(function(){ln&&T&&tn(!1),T&&Ze(!1)},[T]);var xe=Fn(),ke=ae(xe,2),ue=ke[0],Ke=ke[1],mn=function(w){var de=ue(),he=w.which;if(he===E.ENTER&&(N!=="combobox"&&w.preventDefault(),u||p(!0)),Ke(!!Oe),he===E.BACKSPACE&&!de&&se&&!Oe&&s.length){for(var te=Ee(s),Ce=null,Re=te.length-1;Re>=0;Re-=1){var on=te[Re];if(!on.disabled){te.splice(Re,1),Ce=on;break}}Ce&&C(te,{type:"remove",values:[Ce]})}for(var $e=arguments.length,qe=new Array($e>1?$e-1:0),We=1;We<$e;We++)qe[We-1]=arguments[We];if(u&&we.current){var xn;(xn=we.current).onKeyDown.apply(xn,[w].concat(qe))}ce==null||ce.apply(void 0,[w].concat(qe))},pn=function(w){for(var de=arguments.length,he=new Array(de>1?de-1:0),te=1;te<de;te++)he[te-1]=arguments[te];if(u&&we.current){var Ce;(Ce=we.current).onKeyUp.apply(Ce,[w].concat(he))}re==null||re.apply(void 0,[w].concat(he))},In=function(w){var de=s.filter(function(he){return he!==w});C(de,{type:"remove",values:[w]})},He=t.useRef(!1),Ae=function(){Ze(!0),T||(R&&!He.current&&R.apply(void 0,arguments),B.includes("focus")&&p(!0)),He.current=!0},Yn=function(){Ze(!1,function(){He.current=!1,p(!1)}),!T&&(Oe&&(N==="tags"?V(Oe,{source:"submit"}):N==="multiple"&&V("",{source:"blur"})),G&&G.apply(void 0,arguments))},Ye=[];t.useEffect(function(){return function(){Ye.forEach(function(O){return clearTimeout(O)}),Ye.splice(0,Ye.length)}},[]);var qn=function(w){var de,he=w.target,te=(de=Te.current)===null||de===void 0?void 0:de.getPopupElement();if(te&&te.contains(he)){var Ce=setTimeout(function(){var qe=Ye.indexOf(Ce);if(qe!==-1&&Ye.splice(qe,1),Ge(),!be&&!te.contains(document.activeElement)){var We;(We=Ie.current)===null||We===void 0||We.focus()}});Ye.push(Ce)}for(var Re=arguments.length,on=new Array(Re>1?Re-1:0),$e=1;$e<Re;$e++)on[$e-1]=arguments[$e];pe==null||pe.apply(void 0,[w].concat(on))},Jn=t.useState({}),Qn=ae(Jn,2),Zn=Qn[1];function et(){Zn({})}var En;Me&&(En=function(w){p(w)}),Et(function(){var O;return[ze.current,(O=Te.current)===null||O===void 0?void 0:O.getPopupElement()]},m,p,!!Me);var nt=t.useMemo(function(){return q(q({},n),{},{notFoundContent:P,open:u,triggerOpen:m,id:i,showSearch:me,multiple:se,toggleOpen:p})},[n,P,m,u,i,me,se,p]),Dn=!!M||_,Rn;Dn&&(Rn=t.createElement(dn,{className:Be("".concat(r,"-arrow"),oe({},"".concat(r,"-arrow-loading"),_)),customizeIcon:M,customizeIconProps:{loading:_,searchValue:Oe,open:u,focused:je,showSearch:me}}));var tt=function(){var w;Y==null||Y(),(w=Ie.current)===null||w===void 0||w.focus(),C([],{type:"clear",values:s}),U("",!1,!1)},On=Ct(r,tt,s,y,x,T,Oe,N),ot=On.allowClear,at=On.clearIcon,rt=t.createElement(De,{ref:we}),it=Be(r,c,(o={},oe(o,"".concat(r,"-focused"),je),oe(o,"".concat(r,"-multiple"),se),oe(o,"".concat(r,"-single"),!se),oe(o,"".concat(r,"-allow-clear"),y),oe(o,"".concat(r,"-show-arrow"),Dn),oe(o,"".concat(r,"-disabled"),T),oe(o,"".concat(r,"-loading"),_),oe(o,"".concat(r,"-open"),u),oe(o,"".concat(r,"-customize-input"),en),oe(o,"".concat(r,"-show-search"),me),o)),Mn=t.createElement(Wn,{ref:Te,disabled:T,prefixCls:r,visible:m,popupElement:rt,animation:fe,transitionName:le,dropdownStyle:Pe,dropdownClassName:F,direction:g,dropdownMatchSelectWidth:ye,dropdownRender:Ne,dropdownAlign:I,placement:v,builtinPlacements:D,getPopupContainer:k,empty:l,getTriggerDOMNode:function(){return ge.current},onPopupVisibleChange:En,onPopupMouseEnter:et},Me?t.cloneElement(Me,{ref:fn}):t.createElement($n,Fe({},n,{domRef:ge,prefixCls:r,inputElement:en,ref:Ie,id:i,showSearch:me,autoClearSearchValue:ee,mode:N,activeDescendantId:W,tagRender:f,values:s,open:u,onToggleOpen:p,activeValue:j,searchValue:Oe,onSearch:U,onSearchSubmit:_e,onRemove:In,tokenWithEnter:H}))),gn;return Me?gn=Mn:gn=t.createElement("div",Fe({className:it},Q,{ref:ze,onMouseDown:qn,onKeyDown:mn,onKeyUp:pn,onFocus:Ae,onBlur:Yn}),je&&!u&&t.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(s.map(function(O){var w=O.label,de=O.value;return["number","string"].includes(sn(w))?w:de}).join(", "))),Mn,Rn,ot&&at),t.createElement(An.Provider,{value:nt},gn)});const Ut=function(n,e){var a=t.useRef({values:new Map,options:new Map}),o=t.useMemo(function(){var r=a.current,c=r.values,d=r.options,f=n.map(function(s){if(s.label===void 0){var C;return q(q({},s),{},{label:(C=c.get(s.value))===null||C===void 0?void 0:C.label})}return s}),g=new Map,b=new Map;return f.forEach(function(s){g.set(s.value,s),b.set(s.value,e.get(s.value)||d.get(s.value))}),a.current.values=g,a.current.options=b,f},[n,e]),i=t.useCallback(function(r){return e.get(r)||a.current.options.get(r)},[e]);return[o,i]};function bn(n,e){return kn(n).join("").toUpperCase().includes(e)}const zt=function(n,e,a,o,i){return t.useMemo(function(){if(!a||o===!1)return n;var r=e.options,c=e.label,d=e.value,f=[],g=typeof o=="function",b=a.toUpperCase(),s=g?o:function(l,S){return i?bn(S[i],b):S[r]?bn(S[c!=="children"?c:"label"],b):bn(S[d],b)},C=g?function(l){return wn(l)}:function(l){return l};return n.forEach(function(l){if(l[r]){var S=s(a,C(l));if(S)f.push(l);else{var P=l[r].filter(function(Y){return s(a,C(Y))});P.length&&f.push(q(q({},l),{},oe({},r,P)))}return}s(a,C(l))&&f.push(l)}),f},[n,o,i,a,e])};var Tn=0,jt=vt();function Gt(){var n;return jt?(n=Tn,Tn+=1):n="TEST_OR_SSR",n}function Xt(n){var e=t.useState(),a=ae(e,2),o=a[0],i=a[1];return t.useEffect(function(){i("rc_select_".concat(Gt()))},[]),n||o}var Yt=["children","value"],qt=["children"];function Jt(n){var e=n,a=e.key,o=e.props,i=o.children,r=o.value,c=Je(o,Yt);return q({key:a,value:r!==void 0?r:a,children:i},c)}function Hn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return mt(n).map(function(a,o){if(!t.isValidElement(a)||!a.type)return null;var i=a,r=i.type.isSelectOptGroup,c=i.key,d=i.props,f=d.children,g=Je(d,qt);return e||!r?Jt(a):q(q({key:"__RC_SELECT_GRP__".concat(c===null?o:c,"__"),label:c},g),{},{options:Hn(f)})}).filter(function(a){return a})}function Qt(n,e,a,o,i){return t.useMemo(function(){var r=n,c=!n;c&&(r=Hn(e));var d=new Map,f=new Map,g=function(C,l,S){S&&typeof S=="string"&&C.set(l[S],l)};function b(s){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=0;l<s.length;l+=1){var S=s[l];!S[a.options]||C?(d.set(S[a.value],S),g(f,S,a.label),g(f,S,o),g(f,S,i)):b(S[a.options],!0)}}return b(r),{options:r,valueOptions:d,labelOptions:f}},[n,e,a,o,i])}function Ln(n){var e=t.useRef();e.current=n;var a=t.useCallback(function(){return e.current.apply(e,arguments)},[]);return a}var Un=function(){return null};Un.isSelectOptGroup=!0;var zn=function(){return null};zn.isSelectOption=!0;var jn=t.createContext(null);function Zt(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var eo=["disabled","title","children","style","className"];function _n(n){return typeof n=="string"||typeof n=="number"}var no=function(e,a){var o=yt(),i=o.prefixCls,r=o.id,c=o.open,d=o.multiple,f=o.mode,g=o.searchValue,b=o.toggleOpen,s=o.notFoundContent,C=o.onPopupScroll,l=t.useContext(jn),S=l.flattenOptions,P=l.onActiveValue,Y=l.defaultActiveFirstOption,N=l.onSelect,T=l.menuItemSelectedIcon,_=l.rawValues,Z=l.fieldNames,z=l.virtual,X=l.direction,ie=l.listHeight,K=l.listItemHeight,j="".concat(i,"-item"),$=pt(function(){return S},[c,S],function(I,v){return v[0]&&I[1]!==v[1]}),W=t.useRef(null),J=function(v){v.preventDefault()},ee=function(v){W.current&&W.current.scrollTo(typeof v=="number"?{index:v}:v)},V=function(v){for(var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,k=$.length,A=0;A<k;A+=1){var B=(v+A*D+k)%k,R=$[B],G=R.group,re=R.data;if(!G&&!re.disabled)return B}return-1},ne=t.useState(function(){return V(0)}),L=ae(ne,2),y=L[0],M=L[1],x=function(v){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;M(v);var k={source:D?"keyboard":"mouse"},A=$[v];if(!A){P(null,-1,k);return}P(A.value,v,k)};t.useEffect(function(){x(Y!==!1?V(0):-1)},[$.length,g]);var De=t.useCallback(function(I){return _.has(I)&&f!=="combobox"},[f,Ee(_).toString(),_.size]);t.useEffect(function(){var I=setTimeout(function(){if(!d&&c&&_.size===1){var D=Array.from(_)[0],k=$.findIndex(function(A){var B=A.data;return B.value===D});k!==-1&&(x(k),ee(k))}});if(c){var v;(v=W.current)===null||v===void 0||v.scrollTo(void 0)}return function(){return clearTimeout(I)}},[c,g,S.length]);var fe=function(v){v!==void 0&&N(v,{selected:!_.has(v)}),d||b(!1)};if(t.useImperativeHandle(a,function(){return{onKeyDown:function(v){var D=v.which,k=v.ctrlKey;switch(D){case E.N:case E.P:case E.UP:case E.DOWN:{var A=0;if(D===E.UP?A=-1:D===E.DOWN?A=1:Zt()&&k&&(D===E.N?A=1:D===E.P&&(A=-1)),A!==0){var B=V(y+A,A);ee(B),x(B,!0)}break}case E.ENTER:{var R=$[y];R&&!R.data.disabled?fe(R.value):fe(void 0),c&&v.preventDefault();break}case E.ESC:b(!1),c&&v.stopPropagation()}},onKeyUp:function(){},scrollTo:function(v){ee(v)}}}),$.length===0)return t.createElement("div",{role:"listbox",id:"".concat(r,"_list"),className:"".concat(j,"-empty"),onMouseDown:J},s);var le=Object.keys(Z).map(function(I){return Z[I]}),Pe=function(v){return v.label};function F(I,v){var D=I.group;return{role:D?"presentation":"option",id:"".concat(r,"_list_").concat(v)}}var ye=function(v){var D=$[v];if(!D)return null;var k=D.data||{},A=k.value,B=D.group,R=cn(k,!0),G=Pe(D);return D?t.createElement("div",Fe({"aria-label":typeof G=="string"&&!B?G:null},R,{key:v},F(D,v),{"aria-selected":De(A)}),A):null},Ne={role:"listbox",id:"".concat(r,"_list")};return t.createElement(t.Fragment,null,z&&t.createElement("div",Fe({},Ne,{style:{height:0,width:0,overflow:"hidden"}}),ye(y-1),ye(y),ye(y+1)),t.createElement(wt,{itemKey:"key",ref:W,data:$,height:ie,itemHeight:K,fullHeight:!1,onMouseDown:J,onScroll:C,virtual:z,direction:X,innerProps:z?null:Ne},function(I,v){var D,k=I.group,A=I.groupOption,B=I.data,R=I.label,G=I.value,re=B.key;if(k){var ce,pe=(ce=B.title)!==null&&ce!==void 0?ce:_n(R)?R.toString():void 0;return t.createElement("div",{className:Be(j,"".concat(j,"-group")),title:pe},R!==void 0?R:re)}var ve=B.disabled,se=B.title;B.children;var me=B.style,Q=B.className,Ve=Je(B,eo),Ue=gt(Ve,le),be=De(G),Se="".concat(j,"-option"),ze=Be(j,Se,Q,(D={},oe(D,"".concat(Se,"-grouped"),A),oe(D,"".concat(Se,"-active"),y===v&&!ve),oe(D,"".concat(Se,"-disabled"),ve),oe(D,"".concat(Se,"-selected"),be),D)),ge=Pe(I),Te=!T||typeof T=="function"||be,Ie=typeof ge=="number"?ge:ge||G,we=_n(Ie)?Ie.toString():void 0;return se!==void 0&&(we=se),t.createElement("div",Fe({},cn(Ue),z?{}:F(I,v),{"aria-selected":be,className:ze,title:we,onMouseMove:function(){y===v||ve||x(v)},onClick:function(){ve||fe(G)},style:me}),t.createElement("div",{className:"".concat(Se,"-content")},Ie),t.isValidElement(T)||be,Te&&t.createElement(dn,{className:"".concat(j,"-option-state"),customizeIcon:T,customizeIconProps:{isSelected:be}},be?"✓":null))}))},Gn=t.forwardRef(no);Gn.displayName="OptionList";var to=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],oo=["inputValue"];function ao(n){return!n||sn(n)!=="object"}var ro=t.forwardRef(function(n,e){var a=n.id,o=n.mode,i=n.prefixCls,r=i===void 0?"rc-select":i,c=n.backfill,d=n.fieldNames,f=n.inputValue,g=n.searchValue,b=n.onSearch,s=n.autoClearSearchValue,C=s===void 0?!0:s,l=n.onSelect,S=n.onDeselect,P=n.dropdownMatchSelectWidth,Y=P===void 0?!0:P,N=n.filterOption,T=n.filterSort,_=n.optionFilterProp,Z=n.optionLabelProp,z=n.options,X=n.children,ie=n.defaultActiveFirstOption,K=n.menuItemSelectedIcon,j=n.virtual,$=n.direction,W=n.listHeight,J=W===void 0?200:W,ee=n.listItemHeight,V=ee===void 0?20:ee,ne=n.value,L=n.defaultValue,y=n.labelInValue,M=n.onChange,x=Je(n,to),De=Xt(a),fe=Cn(o),le=!!(!z&&X),Pe=t.useMemo(function(){return N===void 0&&o==="combobox"?!1:N},[N,o]),F=t.useMemo(function(){return Bn(d,le)},[JSON.stringify(d),le]),ye=Sn("",{value:g!==void 0?g:f,postState:function(h){return h||""}}),Ne=ae(ye,2),I=Ne[0],v=Ne[1],D=Qt(z,X,F,_,Z),k=D.valueOptions,A=D.labelOptions,B=D.options,R=t.useCallback(function(u){var h=kn(u);return h.map(function(m){var p,H,U,_e,xe;if(ao(m))p=m;else{var ke;U=m.key,H=m.label,p=(ke=m.value)!==null&&ke!==void 0?ke:U}var ue=k.get(p);if(ue){var Ke;H===void 0&&(H=ue==null?void 0:ue[Z||F.label]),U===void 0&&(U=(Ke=ue==null?void 0:ue.key)!==null&&Ke!==void 0?Ke:p),_e=ue==null?void 0:ue.disabled,xe=ue==null?void 0:ue.title}return{label:H,value:p,key:U,disabled:_e,title:xe}})},[F,Z,k]),G=Sn(L,{value:ne}),re=ae(G,2),ce=re[0],pe=re[1],ve=t.useMemo(function(){var u,h=R(ce);return o==="combobox"&&xt((u=h[0])===null||u===void 0?void 0:u.value)?[]:h},[ce,R,o]),se=Ut(ve,k),me=ae(se,2),Q=me[0],Ve=me[1],Ue=t.useMemo(function(){if(!o&&Q.length===1){var u=Q[0];if(u.value===null&&(u.label===null||u.label===void 0))return[]}return Q.map(function(h){var m;return q(q({},h),{},{label:(m=h.label)!==null&&m!==void 0?m:h.value})})},[o,Q]),be=t.useMemo(function(){return new Set(Q.map(function(u){return u.value}))},[Q]);t.useEffect(function(){if(o==="combobox"){var u,h=(u=Q[0])===null||u===void 0?void 0:u.value;v(Mt(h)?String(h):"")}},[Q]);var Se=Ln(function(u,h){var m,p=h??u;return m={},oe(m,F.value,u),oe(m,F.label,p),m}),ze=t.useMemo(function(){if(o!=="tags")return B;var u=Ee(B),h=function(p){return k.has(p)};return Ee(Q).sort(function(m,p){return m.value<p.value?-1:1}).forEach(function(m){var p=m.value;h(p)||u.push(Se(p,m.label))}),u},[Se,B,k,Q,o]),ge=zt(ze,F,I,Pe,_),Te=t.useMemo(function(){return o!=="tags"||!I||ge.some(function(u){return u[_||"value"]===I})||ge.some(function(u){return u[F.value]===I})?ge:[Se(I)].concat(Ee(ge))},[Se,_,o,ge,I,F]),Ie=t.useMemo(function(){return T?Ee(Te).sort(function(u,h){return T(u,h)}):Te},[Te,T]),we=t.useMemo(function(){return Kt(Ie,{fieldNames:F,childrenAsData:le})},[Ie,F,le]),Le=function(h){var m=R(h);if(pe(m),M&&(m.length!==Q.length||m.some(function(U,_e){var xe;return((xe=Q[_e])===null||xe===void 0?void 0:xe.value)!==(U==null?void 0:U.value)}))){var p=y?m:m.map(function(U){return U.value}),H=m.map(function(U){return wn(Ve(U.value))});M(fe?p:p[0],fe?H:H[0])}},Qe=t.useState(null),je=ae(Qe,2),Ze=je[0],Ge=je[1],Oe=t.useState(0),en=ae(Oe,2),Me=en[0],fn=en[1],an=ie!==void 0?ie:o!=="combobox",nn=t.useCallback(function(u,h){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},p=m.source,H=p===void 0?"keyboard":p;fn(h),c&&o==="combobox"&&u!==null&&H==="keyboard"&&Ge(String(u))},[c,o]),Xe=function(h,m,p){var H=function(){var He,Ae=Ve(h);return[y?{label:Ae==null?void 0:Ae[F.label],value:h,key:(He=Ae==null?void 0:Ae.key)!==null&&He!==void 0?He:h}:h,wn(Ae)]};if(m&&l){var U=H(),_e=ae(U,2),xe=_e[0],ke=_e[1];l(xe,ke)}else if(!m&&S&&p!=="clear"){var ue=H(),Ke=ae(ue,2),mn=Ke[0],pn=Ke[1];S(mn,pn)}},rn=Ln(function(u,h){var m,p=fe?h.selected:!0;p?m=fe?[].concat(Ee(Q),[u]):[u]:m=Q.filter(function(H){return H.value!==u}),Le(m),Xe(u,p),o==="combobox"?Ge(""):(!Cn||C)&&(v(""),Ge(""))}),vn=function(h,m){Le(h);var p=m.type,H=m.values;(p==="remove"||p==="clear")&&H.forEach(function(U){Xe(U.value,!1,p)})},un=function(h,m){if(v(h),Ge(null),m.source==="submit"){var p=(h||"").trim();if(p){var H=Array.from(new Set([].concat(Ee(be),[p])));Le(H),Xe(p,!0),v("")}return}m.source!=="blur"&&(o==="combobox"&&Le(h),b==null||b(h))},ln=function(h){var m=h;o!=="tags"&&(m=h.map(function(H){var U=A.get(H);return U==null?void 0:U.value}).filter(function(H){return H!==void 0}));var p=Array.from(new Set([].concat(Ee(be),Ee(m))));Le(p),p.forEach(function(H){Xe(H,!0)})},tn=t.useMemo(function(){var u=j!==!1&&Y!==!1;return q(q({},D),{},{flattenOptions:we,onActiveValue:nn,defaultActiveFirstOption:an,onSelect:rn,menuItemSelectedIcon:K,rawValues:be,fieldNames:F,virtual:u,direction:$,listHeight:J,listItemHeight:V,childrenAsData:le})},[D,we,nn,an,rn,K,be,F,j,Y,J,V,le]);return t.createElement(jn.Provider,{value:tn},t.createElement(Ht,Fe({},x,{id:De,prefixCls:r,ref:e,omitDomProps:oo,mode:o,displayValues:Ue,onDisplayValuesChange:vn,direction:$,searchValue:I,onSearch:un,autoClearSearchValue:C,onSearchSplit:ln,dropdownMatchSelectWidth:Y,OptionList:Gn,emptyOptions:!we.length,activeValue:Ze,activeDescendantId:"".concat(De,"_list_").concat(Me)})))}),Xn=ro;Xn.Option=zn;Xn.OptGroup=Un;export{Ht as B,zn as O,Xn as T,Un as a,Xt as b,yt as u};

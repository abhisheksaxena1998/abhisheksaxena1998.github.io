import{e,b as t,g as r,c as n,d as o,_ as i,a as u,k as a}from"./@babel.BGkJ1U9u.js";import{c}from"./classnames.BmZ8OyLm.js";import{R as l}from"./rc-resize-observer.onB48-vm.js";import{q as s,R as f,u as v,d}from"./rc-util.DIscDwjl.js";import{r as h}from"./react.DlfX74Oz.js";import{r as m}from"./react-dom.tsMZo23m.js";var g=h.forwardRef((function(n,o){var i=n.height,u=n.offsetY,a=n.offsetX,s=n.children,f=n.prefixCls,v=n.onInnerResize,d=n.innerProps,m=n.rtl,g=n.extra,p={},M={display:"flex",flexDirection:"column"};return void 0!==u&&(p={height:i,position:"relative",overflow:"hidden"},M=e(e({},M),{},t(t(t(t(t({transform:"translateY(".concat(u,"px)")},m?"marginRight":"marginLeft",-a),"position","absolute"),"left",0),"right",0),"top",0))),h.createElement("div",{style:p},h.createElement(l,{onResize:function(e){e.offsetHeight&&v&&v()}},h.createElement("div",r({style:M,className:c(t({},"".concat(f,"-holder-inner"),f)),ref:o},d),s,g)))}));function p(e){var t=e.children,r=e.setRef,n=h.useCallback((function(e){r(e)}),[]);return h.cloneElement(t,{ref:n})}function M(e,t,r){var o=h.useState(e),i=n(o,2),u=i[0],a=i[1],c=h.useState(null),l=n(c,2),s=l[0],f=l[1];return h.useEffect((function(){var r=function(e,t,r){var n,o,i=e.length,u=t.length;if(0===i&&0===u)return null;i<u?(n=e,o=t):(n=t,o=e);var a={__EMPTY_ITEM__:!0};function c(e){return void 0!==e?r(e):a}for(var l=null,s=1!==Math.abs(i-u),f=0;f<o.length;f+=1){var v=c(n[f]);if(v!==c(o[f])){l=f,s=s||v!==c(o[f+1]);break}}return null===l?null:{index:l,multiple:s}}(u||[],e||[],t);void 0!==(null==r?void 0:r.index)&&f(e[r.index]),a(e)}),[e]),[s]}g.displayName="Filler";var R="object"===("undefined"==typeof navigator?"undefined":o(navigator))&&/Firefox/i.test(navigator.userAgent);const b=function(e,t,r,n){var o=h.useRef(!1),i=h.useRef(null);var u=h.useRef({top:e,bottom:t,left:r,right:n});return u.current.top=e,u.current.bottom=t,u.current.left=r,u.current.right=n,function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e?t<0&&u.current.left||t>0&&u.current.right:t<0&&u.current.top||t>0&&u.current.bottom;return r&&n?(clearTimeout(i.current),o.current=!1):n&&!o.current||(clearTimeout(i.current),o.current=!0,i.current=setTimeout((function(){o.current=!1}),50)),!o.current&&n}};function E(e,t,r,n,o,i,u){var a=h.useRef(0),c=h.useRef(null),l=h.useRef(null),f=h.useRef(!1),v=b(t,r,n,o);var d=h.useRef(null),m=h.useRef(null);return[function(t){if(e){s.cancel(m.current),m.current=s((function(){d.current=null}),2);var r=t.deltaX,n=t.deltaY,o=t.shiftKey,h=r,g=n;("sx"===d.current||!d.current&&o&&n&&!r)&&(h=n,g=0,d.current="sx");var p=Math.abs(h),M=Math.abs(g);null===d.current&&(d.current=i&&p>M?"x":"y"),"y"===d.current?function(e,t){if(s.cancel(c.current),!v(!1,t)){var r=e;r._virtualHandled||(r._virtualHandled=!0,a.current+=t,l.current=t,R||r.preventDefault(),c.current=s((function(){var e=f.current?10:1;u(a.current*e,!1),a.current=0})))}}(t,g):function(e,t){u(t,!0),R||e.preventDefault()}(t,h)}},function(t){e&&(f.current=t.detail===l.current)}]}var S=function(){function e(){u(this,e),t(this,"maps",void 0),t(this,"id",0),this.maps=Object.create(null)}return i(e,[{key:"set",value:function(e,t){this.maps[e]=t,this.id+=1}},{key:"get",value:function(e){return this.maps[e]}}]),e}();var w=14/15;function y(e,t){return("touches"in e?e.touches[0]:e)[t?"pageX":"pageY"]}var x=h.forwardRef((function(r,o){var i=r.prefixCls,u=r.rtl,a=r.scrollOffset,l=r.scrollRange,f=r.onStartMove,v=r.onStopMove,d=r.onScroll,m=r.horizontal,g=r.spinSize,p=r.containerSize,M=r.style,R=r.thumbStyle,b=h.useState(!1),E=n(b,2),S=E[0],w=E[1],x=h.useState(null),L=n(x,2),H=L[0],T=L[1],z=h.useState(null),Y=n(z,2),k=Y[0],N=Y[1],D=!u,C=h.useRef(),j=h.useRef(),I=h.useState(!1),P=n(I,2),X=P[0],_=P[1],O=h.useRef(),A=function(){clearTimeout(O.current),_(!0),O.current=setTimeout((function(){_(!1)}),3e3)},B=l-p||0,K=p-g||0,V=h.useMemo((function(){return 0===a||0===B?0:a/B*K}),[a,B,K]),W=h.useRef({top:V,dragging:S,pageY:H,startTop:k});W.current={top:V,dragging:S,pageY:H,startTop:k};var F=function(e){w(!0),T(y(e,m)),N(W.current.top),f(),e.stopPropagation(),e.preventDefault()};h.useEffect((function(){var e=function(e){e.preventDefault()},t=C.current,r=j.current;return t.addEventListener("touchstart",e,{passive:!1}),r.addEventListener("touchstart",F,{passive:!1}),function(){t.removeEventListener("touchstart",e),r.removeEventListener("touchstart",F)}}),[]);var q=h.useRef();q.current=B;var G=h.useRef();G.current=K,h.useEffect((function(){if(S){var e,t=function(t){var r=W.current,n=r.dragging,o=r.pageY,i=r.startTop;s.cancel(e);var u=C.current.getBoundingClientRect(),a=p/(m?u.width:u.height);if(n){var c=(y(t,m)-o)*a,l=i;!D&&m?l-=c:l+=c;var f=q.current,v=G.current,h=v?l/v:0,g=Math.ceil(h*f);g=Math.max(g,0),g=Math.min(g,f),e=s((function(){d(g,m)}))}},r=function(){w(!1),v()};return window.addEventListener("mousemove",t,{passive:!0}),window.addEventListener("touchmove",t,{passive:!0}),window.addEventListener("mouseup",r,{passive:!0}),window.addEventListener("touchend",r,{passive:!0}),function(){window.removeEventListener("mousemove",t),window.removeEventListener("touchmove",t),window.removeEventListener("mouseup",r),window.removeEventListener("touchend",r),s.cancel(e)}}}),[S]),h.useEffect((function(){return A(),function(){clearTimeout(O.current)}}),[a]),h.useImperativeHandle(o,(function(){return{delayHidden:A}}));var J="".concat(i,"-scrollbar"),Q={position:"absolute",visibility:X?null:"hidden"},U={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return m?(Q.height=8,Q.left=0,Q.right=0,Q.bottom=0,U.height="100%",U.width=g,D?U.left=V:U.right=V):(Q.width=8,Q.top=0,Q.bottom=0,D?Q.right=0:Q.left=0,U.width="100%",U.height=g,U.top=V),h.createElement("div",{ref:C,className:c(J,t(t(t({},"".concat(J,"-horizontal"),m),"".concat(J,"-vertical"),!m),"".concat(J,"-visible"),X)),style:e(e({},Q),M),onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},onMouseMove:A},h.createElement("div",{ref:j,className:c("".concat(J,"-thumb"),t({},"".concat(J,"-thumb-moving"),S)),style:e(e({},U),R),onMouseDown:F}))}));function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e/(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)*e;return isNaN(t)&&(t=0),t=Math.max(t,20),Math.floor(t)}var H=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],T=[],z={overflowY:"auto",overflowAnchor:"none"};function Y(i,u){var R=i.prefixCls,y=void 0===R?"rc-virtual-list":R,Y=i.className,k=i.height,N=i.itemHeight,D=i.fullHeight,C=void 0===D||D,j=i.style,I=i.data,P=i.children,X=i.itemKey,_=i.virtual,O=i.direction,A=i.scrollWidth,B=i.component,K=void 0===B?"div":B,V=i.onScroll,W=i.onVirtualScroll,F=i.onVisibleChange,q=i.innerProps,G=i.extraRender,J=i.styles,Q=a(i,H),U=h.useCallback((function(e){return"function"==typeof X?X(e):null==e?void 0:e[X]}),[X]),Z=function(e){var t=h.useState(0),r=n(t,2),o=r[0],i=r[1],u=h.useRef(new Map),a=h.useRef(new S),c=h.useRef();function l(){s.cancel(c.current)}function v(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];l();var t=function(){u.current.forEach((function(e,t){if(e&&e.offsetParent){var r=f(e),n=r.offsetHeight;a.current.get(t)!==n&&a.current.set(t,r.offsetHeight)}})),i((function(e){return e+1}))};e?t():c.current=s(t)}return h.useEffect((function(){return l}),[]),[function(t,r){var n=e(t);u.current.get(n),r?(u.current.set(n,r),v()):u.current.delete(n)},v,a.current,o]}(U),$=n(Z,4),ee=$[0],te=$[1],re=$[2],ne=$[3],oe=!(!1===_||!k||!N),ie=h.useMemo((function(){return Object.values(re.maps).reduce((function(e,t){return e+t}),0)}),[re.id,re.maps]),ue=oe&&I&&(Math.max(N*I.length,ie)>k||!!A),ae="rtl"===O,ce=c(y,t({},"".concat(y,"-rtl"),ae),Y),le=I||T,se=h.useRef(),fe=h.useRef(),ve=h.useRef(),de=h.useState(0),he=n(de,2),me=he[0],ge=he[1],pe=h.useState(0),Me=n(pe,2),Re=Me[0],be=Me[1],Ee=h.useState(!1),Se=n(Ee,2),we=Se[0],ye=Se[1],xe=function(){ye(!0)},Le=function(){ye(!1)},He={getKey:U};function Te(e){ge((function(t){var r=function(e){var t=e;Number.isNaN(qe.current)||(t=Math.min(t,qe.current));return t=Math.max(t,0),t}("function"==typeof e?e(t):e);return se.current.scrollTop=r,r}))}var ze=h.useRef({start:0,end:le.length}),Ye=h.useRef(),ke=M(le,U),Ne=n(ke,1)[0];Ye.current=Ne;var De=h.useMemo((function(){if(!oe)return{scrollHeight:void 0,start:0,end:le.length-1,offset:void 0};var e;if(!ue)return{scrollHeight:(null===(e=fe.current)||void 0===e?void 0:e.offsetHeight)||0,start:0,end:le.length-1,offset:void 0};for(var t,r,n,o=0,i=le.length,u=0;u<i;u+=1){var a=le[u],c=U(a),l=re.get(c),s=o+(void 0===l?N:l);s>=me&&void 0===t&&(t=u,r=o),s>me+k&&void 0===n&&(n=u),o=s}return void 0===t&&(t=0,r=0,n=Math.ceil(k/N)),void 0===n&&(n=le.length-1),{scrollHeight:o,start:t,end:n=Math.min(n+1,le.length-1),offset:r}}),[ue,oe,me,le,ne,k]),Ce=De.scrollHeight,je=De.start,Ie=De.end,Pe=De.offset;ze.current.start=je,ze.current.end=Ie;var Xe=h.useState({width:0,height:k}),_e=n(Xe,2),Oe=_e[0],Ae=_e[1],Be=h.useRef(),Ke=h.useRef(),Ve=h.useMemo((function(){return L(Oe.width,A)}),[Oe.width,A]),We=h.useMemo((function(){return L(Oe.height,Ce)}),[Oe.height,Ce]),Fe=Ce-k,qe=h.useRef(Fe);qe.current=Fe;var Ge=me<=0,Je=me>=Fe,Qe=Re<=0,Ue=Re>=A,Ze=b(Ge,Je,Qe,Ue),$e=function(){return{x:ae?-Re:Re,y:me}},et=h.useRef($e()),tt=d((function(t){if(W){var r=e(e({},$e()),t);et.current.x===r.x&&et.current.y===r.y||(W(r),et.current=r)}}));function rt(e,t){var r=e;t?(m.flushSync((function(){be(r)})),tt()):Te(r)}var nt=function(e){var t=e,r=A?A-Oe.width:0;return t=Math.max(t,0),t=Math.min(t,r)},ot=d((function(e,t){t?(m.flushSync((function(){be((function(t){return nt(t+(ae?-e:e))}))})),tt()):Te((function(t){return t+e}))})),it=E(oe,Ge,Je,Qe,Ue,!!A,ot),ut=n(it,2),at=ut[0],ct=ut[1];!function(e,t,r){var n,o=h.useRef(!1),i=h.useRef(0),u=h.useRef(0),a=h.useRef(null),c=h.useRef(null),l=function(e){if(o.current){var t=Math.ceil(e.touches[0].pageX),n=Math.ceil(e.touches[0].pageY),a=i.current-t,l=u.current-n,s=Math.abs(a)>Math.abs(l);s?i.current=t:u.current=n;var f=r(s,s?a:l,!1,e);f&&e.preventDefault(),clearInterval(c.current),f&&(c.current=setInterval((function(){s?a*=w:l*=w;var e=Math.floor(s?a:l);(!r(s,e,!0)||Math.abs(e)<=.1)&&clearInterval(c.current)}),16))}},s=function(){o.current=!1,n()},f=function(e){n(),1!==e.touches.length||o.current||(o.current=!0,i.current=Math.ceil(e.touches[0].pageX),u.current=Math.ceil(e.touches[0].pageY),a.current=e.target,a.current.addEventListener("touchmove",l,{passive:!1}),a.current.addEventListener("touchend",s,{passive:!0}))};n=function(){a.current&&(a.current.removeEventListener("touchmove",l),a.current.removeEventListener("touchend",s))},v((function(){return e&&t.current.addEventListener("touchstart",f,{passive:!0}),function(){var e;null===(e=t.current)||void 0===e||e.removeEventListener("touchstart",f),n(),clearInterval(c.current)}}),[e])}(oe,se,(function(e,t,r,n){var o=n;return!Ze(e,t,r)&&((!o||!o._virtualHandled)&&(o&&(o._virtualHandled=!0),at({preventDefault:function(){},deltaX:e?t:0,deltaY:e?0:t}),!0))})),v((function(){function e(e){var t=Ge&&e.detail<0,r=Je&&e.detail>0;!oe||t||r||e.preventDefault()}var t=se.current;return t.addEventListener("wheel",at,{passive:!1}),t.addEventListener("DOMMouseScroll",ct,{passive:!0}),t.addEventListener("MozMousePixelScroll",e,{passive:!1}),function(){t.removeEventListener("wheel",at),t.removeEventListener("DOMMouseScroll",ct),t.removeEventListener("MozMousePixelScroll",e)}}),[oe,Ge,Je]),v((function(){if(A){var e=nt(Re);be(e),tt({x:e})}}),[Oe.width,A]);var lt=function(){var e,t;null===(e=Be.current)||void 0===e||e.delayHidden(),null===(t=Ke.current)||void 0===t||t.delayHidden()},st=function(t,r,i,u,a,c,l,f){var d=h.useRef(),m=h.useState(null),g=n(m,2),p=g[0],M=g[1];return v((function(){if(p&&p.times<10){if(!t.current)return void M((function(t){return e({},t)}));c();var n=p.targetAlign,o=p.originAlign,s=p.index,f=p.offset,v=t.current.clientHeight,d=!1,h=n,m=null;if(v){for(var g=n||o,R=0,b=0,E=0,S=Math.min(r.length-1,s),w=0;w<=S;w+=1){var y=a(r[w]);b=R;var x=i.get(y);R=E=b+(void 0===x?u:x)}for(var L="top"===g?f:v-f,H=S;H>=0;H-=1){var T=a(r[H]),z=i.get(T);if(void 0===z){d=!0;break}if((L-=z)<=0)break}switch(g){case"top":m=b-f;break;case"bottom":m=E-v+f;break;default:var Y=t.current.scrollTop;b<Y?h="top":E>Y+v&&(h="bottom")}null!==m&&l(m),m!==p.lastTop&&(d=!0)}d&&M(e(e({},p),{},{times:p.times+1,targetAlign:h,lastTop:m}))}}),[p,t.current]),function(e){if(null!=e){if(s.cancel(d.current),"number"==typeof e)l(e);else if(e&&"object"===o(e)){var t,n=e.align;t="index"in e?e.index:r.findIndex((function(t){return a(t)===e.key}));var i=e.offset;M({times:0,index:t,offset:void 0===i?0:i,originAlign:n})}}else f()}}(se,le,re,N,U,(function(){return te(!0)}),Te,lt);h.useImperativeHandle(u,(function(){return{nativeElement:ve.current,getScrollInfo:$e,scrollTo:function(e){var t;(t=e)&&"object"===o(t)&&("left"in t||"top"in t)?(void 0!==e.left&&be(nt(e.left)),st(e.top)):st(e)}}})),v((function(){if(F){var e=le.slice(je,Ie+1);F(e,le)}}),[je,Ie,le]);var ft=function(e,t,r,o){var i=h.useMemo((function(){return[new Map,[]]}),[e,r.id,o]),u=n(i,2),a=u[0],c=u[1];return function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,u=a.get(n),l=a.get(i);if(void 0===u||void 0===l)for(var s=e.length,f=c.length;f<s;f+=1){var v,d=e[f],h=t(d);a.set(h,f);var m=null!==(v=r.get(h))&&void 0!==v?v:o;if(c[f]=(c[f-1]||0)+m,h===n&&(u=f),h===i&&(l=f),void 0!==u&&void 0!==l)break}return{top:c[u-1]||0,bottom:c[l]}}}(le,U,re,N),vt=null==G?void 0:G({start:je,end:Ie,virtual:ue,offsetX:Re,offsetY:Pe,rtl:ae,getSize:ft}),dt=function(e,t,r,n,o,i,u,a){var c=a.getKey;return e.slice(t,r+1).map((function(e,r){var a=u(e,t+r,{style:{width:n},offsetX:o}),l=c(e);return h.createElement(p,{key:l,setRef:function(t){return i(e,t)}},a)}))}(le,je,Ie,A,Re,ee,P,He),ht=null;k&&(ht=e(t({},C?"height":"maxHeight",k),z),oe&&(ht.overflowY="hidden",A&&(ht.overflowX="hidden"),we&&(ht.pointerEvents="none")));var mt={};return ae&&(mt.dir="rtl"),h.createElement("div",r({ref:ve,style:e(e({},j),{},{position:"relative"}),className:ce},mt,Q),h.createElement(l,{onResize:function(e){Ae({width:e.offsetWidth,height:e.offsetHeight})}},h.createElement(K,{className:"".concat(y,"-holder"),style:ht,ref:se,onScroll:function(e){var t=e.currentTarget.scrollTop;t!==me&&Te(t),null==V||V(e),tt()},onMouseEnter:lt},h.createElement(g,{prefixCls:y,height:Ce,offsetX:Re,offsetY:Pe,scrollWidth:A,onInnerResize:te,ref:fe,innerProps:q,rtl:ae,extra:vt},dt))),ue&&Ce>k&&h.createElement(x,{ref:Be,prefixCls:y,scrollOffset:me,scrollRange:Ce,rtl:ae,onScroll:rt,onStartMove:xe,onStopMove:Le,spinSize:We,containerSize:Oe.height,style:null==J?void 0:J.verticalScrollBar,thumbStyle:null==J?void 0:J.verticalScrollBarThumb}),ue&&A>Oe.width&&h.createElement(x,{ref:Ke,prefixCls:y,scrollOffset:Re,scrollRange:A,rtl:ae,onScroll:rt,onStartMove:xe,onStopMove:Le,spinSize:Ve,containerSize:Oe.width,horizontal:!0,style:null==J?void 0:J.horizontalScrollBar,thumbStyle:null==J?void 0:J.horizontalScrollBarThumb}))}var k=h.forwardRef(Y);k.displayName="List";export{k as L};

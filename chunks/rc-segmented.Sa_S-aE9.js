import{c as t,e,k as n,g as i,b as a,d as l}from"./@babel.BGkJ1U9u.js";import{c as o}from"./classnames.BmZ8OyLm.js";import{u as r,i as u,e as c,x as s}from"./rc-util.DIscDwjl.js";import{r as d}from"./react.DlfX74Oz.js";import{C as m}from"./rc-motion.BpKOU8X5.js";var v=function(t,e){if(!t)return null;var n={left:t.offsetLeft,right:t.parentElement.clientWidth-t.clientWidth-t.offsetLeft,width:t.clientWidth,top:t.offsetTop,bottom:t.parentElement.clientHeight-t.clientHeight-t.offsetTop,height:t.clientHeight};return e?{left:0,right:0,width:0,top:n.top,bottom:n.bottom,height:n.height}:{left:n.left,right:n.right,width:n.width,top:0,bottom:0,height:0}},f=function(t){return void 0!==t?"".concat(t,"px"):void 0};function h(n){var i=n.prefixCls,a=n.containerRef,l=n.value,c=n.getValueIndex,s=n.motionName,h=n.onMotionStart,b=n.onMotionEnd,p=n.direction,g=n.vertical,N=void 0!==g&&g,w=d.useRef(null),x=d.useState(l),C=t(x,2),E=C[0],S=C[1],j=function(t){var e,n=c(t),l=null===(e=a.current)||void 0===e?void 0:e.querySelectorAll(".".concat(i,"-item"))[n];return(null==l?void 0:l.offsetParent)&&l},M=d.useState(null),V=t(M,2),k=V[0],y=V[1],A=d.useState(null),R=t(A,2),H=R[0],I=R[1];r((function(){if(E!==l){var t=j(E),e=j(l),n=v(t,N),i=v(e,N);S(l),y(n),I(i),t&&e?h():b()}}),[l]);var T=d.useMemo((function(){var t;return f(N?null!==(t=null==k?void 0:k.top)&&void 0!==t?t:0:"rtl"===p?-(null==k?void 0:k.right):null==k?void 0:k.left)}),[N,p,k]),W=d.useMemo((function(){var t;return f(N?null!==(t=null==H?void 0:H.top)&&void 0!==t?t:0:"rtl"===p?-(null==H?void 0:H.right):null==H?void 0:H.left)}),[N,p,H]);return k&&H?d.createElement(m,{visible:!0,motionName:s,motionAppear:!0,onAppearStart:function(){return N?{transform:"translateY(var(--thumb-start-top))",height:"var(--thumb-start-height)"}:{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},onAppearActive:function(){return N?{transform:"translateY(var(--thumb-active-top))",height:"var(--thumb-active-height)"}:{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},onVisibleChanged:function(){y(null),I(null),b()}},(function(t,n){var a=t.className,l=t.style,r=e(e({},l),{},{"--thumb-start-left":T,"--thumb-start-width":f(null==k?void 0:k.width),"--thumb-active-left":W,"--thumb-active-width":f(null==H?void 0:H.width),"--thumb-start-top":T,"--thumb-start-height":f(null==k?void 0:k.height),"--thumb-active-top":W,"--thumb-active-height":f(null==H?void 0:H.height)}),c={ref:u(w,n),style:r,className:o("".concat(i,"-thumb"),a)};return d.createElement("div",c)})):null}var b=["prefixCls","direction","vertical","options","disabled","defaultValue","value","onChange","className","motionName"];function p(t){return t.map((function(t){if("object"===l(t)&&null!==t){var n=function(t){return void 0!==t.title?t.title:"object"!==l(t.label)?null===(e=t.label)||void 0===e?void 0:e.toString():void 0;var e}(t);return e(e({},t),{},{title:n})}return{label:null==t?void 0:t.toString(),title:null==t?void 0:t.toString(),value:t}}))}var g=function(t){var e=t.prefixCls,n=t.className,i=t.disabled,l=t.checked,r=t.label,u=t.title,c=t.value,s=t.onChange;return d.createElement("label",{className:o(n,a({},"".concat(e,"-item-disabled"),i))},d.createElement("input",{className:"".concat(e,"-item-input"),type:"radio",disabled:i,checked:l,onChange:function(t){i||s(t,c)}}),d.createElement("div",{className:"".concat(e,"-item-label"),title:u,role:"option","aria-selected":l},r))},N=d.forwardRef((function(e,l){var r,m,v=e.prefixCls,f=void 0===v?"rc-segmented":v,N=e.direction,w=e.vertical,x=e.options,C=void 0===x?[]:x,E=e.disabled,S=e.defaultValue,j=e.value,M=e.onChange,V=e.className,k=void 0===V?"":V,y=e.motionName,A=void 0===y?"thumb-motion":y,R=n(e,b),H=d.useRef(null),I=d.useMemo((function(){return u(H,l)}),[H,l]),T=d.useMemo((function(){return p(C)}),[C]),W=c(null===(r=T[0])||void 0===r?void 0:r.value,{value:j,defaultValue:S}),L=t(W,2),X=L[0],Y=L[1],q=d.useState(!1),P=t(q,2),z=P[0],B=P[1],D=function(t,e){E||(Y(e),null==M||M(e))},F=s(R,["children"]);return d.createElement("div",i({role:"listbox","aria-label":"segmented control"},F,{className:o(f,(m={},a(m,"".concat(f,"-rtl"),"rtl"===N),a(m,"".concat(f,"-disabled"),E),a(m,"".concat(f,"-vertical"),w),m),k),ref:I}),d.createElement("div",{className:"".concat(f,"-group")},d.createElement(h,{vertical:w,prefixCls:f,value:X,containerRef:H,motionName:"".concat(f,"-").concat(A),direction:N,getValueIndex:function(t){return T.findIndex((function(e){return e.value===t}))},onMotionStart:function(){B(!0)},onMotionEnd:function(){B(!1)}}),T.map((function(t){return d.createElement(g,i({},t,{key:t.value,prefixCls:f,className:o(t.className,"".concat(f,"-item"),a({},"".concat(f,"-item-selected"),t.value===X&&!z)),checked:t.value===X,onChange:D,disabled:!!E||!!t.disabled}))}))))}));export{N as T};

import{e as u,g as I,c as F}from"./@babel-DbNJHz-F.js";import{P as fe}from"./@rc-component-wjd-prsF.js";import{r as n,a as f}from"./react-gY946ZKh.js";import{c as x}from"./classnames-uKr76nPM.js";import{e as de,n as me,x as ve,E as J,K as Q}from"./rc-util-I-T2_Oqq.js";import{C as te}from"./rc-motion-0ib2B0_b.js";var ae=n.createContext({});function Z(e,a,t){var o=a;return!o&&t&&(o="".concat(e,"-").concat(t)),o}function p(e,a){var t=e["page".concat(a?"Y":"X","Offset")],o="scroll".concat(a?"Top":"Left");if(typeof t!="number"){var l=e.document;t=l.documentElement[o],typeof t!="number"&&(t=l.body[o])}return t}function Ce(e){var a=e.getBoundingClientRect(),t={left:a.left,top:a.top},o=e.ownerDocument,l=o.defaultView||o.parentWindow;return t.left+=p(l),t.top+=p(l,!0),t}const ye=n.memo(function(e){var a=e.children;return a},function(e,a){var t=a.shouldUpdate;return!t});var ee={width:0,height:0,overflow:"hidden",outline:"none"},be=f.forwardRef(function(e,a){var t=e.prefixCls,o=e.className,l=e.style,i=e.title,m=e.ariaId,d=e.footer,v=e.closable,R=e.closeIcon,y=e.onClose,h=e.children,b=e.bodyStyle,N=e.bodyProps,E=e.modalRender,w=e.onMouseDown,O=e.onMouseUp,V=e.holderRef,P=e.visible,M=e.forceRender,C=e.width,_=e.height,s=e.classNames,c=e.styles,L=f.useContext(ae),B=L.panel,j=de(V,B),$=n.useRef(),U=n.useRef();f.useImperativeHandle(a,function(){return{focus:function(){var S;(S=$.current)===null||S===void 0||S.focus()},changeActive:function(S){var W=document,K=W.activeElement;S&&K===U.current?$.current.focus():!S&&K===$.current&&U.current.focus()}}});var g={};C!==void 0&&(g.width=C),_!==void 0&&(g.height=_);var k;d&&(k=f.createElement("div",{className:x("".concat(t,"-footer"),s==null?void 0:s.footer),style:u({},c==null?void 0:c.footer)},d));var A;i&&(A=f.createElement("div",{className:x("".concat(t,"-header"),s==null?void 0:s.header),style:u({},c==null?void 0:c.header)},f.createElement("div",{className:"".concat(t,"-title"),id:m},i)));var D;v&&(D=f.createElement("button",{type:"button",onClick:y,"aria-label":"Close",className:"".concat(t,"-close")},R||f.createElement("span",{className:"".concat(t,"-close-x")})));var T=f.createElement("div",{className:x("".concat(t,"-content"),s==null?void 0:s.content),style:c==null?void 0:c.content},D,A,f.createElement("div",I({className:x("".concat(t,"-body"),s==null?void 0:s.body),style:u(u({},b),c==null?void 0:c.body)},N),h),k);return f.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":i?m:null,"aria-modal":"true",ref:j,style:u(u({},l),g),className:x(t,o),onMouseDown:w,onMouseUp:O},f.createElement("div",{tabIndex:0,ref:$,style:ee,"aria-hidden":"true"}),f.createElement(ye,{shouldUpdate:P||M},E?E(T):T),f.createElement("div",{tabIndex:0,ref:U,style:ee,"aria-hidden":"true"}))}),ne=n.forwardRef(function(e,a){var t=e.prefixCls,o=e.title,l=e.style,i=e.className,m=e.visible,d=e.forceRender,v=e.destroyOnClose,R=e.motionName,y=e.ariaId,h=e.onVisibleChanged,b=e.mousePosition,N=n.useRef(),E=n.useState(),w=F(E,2),O=w[0],V=w[1],P={};O&&(P.transformOrigin=O);function M(){var C=Ce(N.current);V(b?"".concat(b.x-C.left,"px ").concat(b.y-C.top,"px"):"")}return n.createElement(te,{visible:m,onVisibleChanged:h,onAppearPrepare:M,onEnterPrepare:M,forceRender:d,motionName:R,removeOnLeave:v,ref:N},function(C,_){var s=C.className,c=C.style;return n.createElement(be,I({},e,{ref:a,title:o,ariaId:y,prefixCls:t,holderRef:_,style:u(u(u({},c),l),P),className:x(i,s)}))})});ne.displayName="Content";function Ne(e){var a=e.prefixCls,t=e.style,o=e.visible,l=e.maskProps,i=e.motionName,m=e.className;return n.createElement(te,{key:"mask",visible:o,motionName:i,leavedClassName:"".concat(a,"-mask-hidden")},function(d,v){var R=d.className,y=d.style;return n.createElement("div",I({ref:v,style:u(u({},y),t),className:x("".concat(a,"-mask"),R,m)},l))})}function ge(e){var a=e.prefixCls,t=a===void 0?"rc-dialog":a,o=e.zIndex,l=e.visible,i=l===void 0?!1:l,m=e.keyboard,d=m===void 0?!0:m,v=e.focusTriggerAfterClose,R=v===void 0?!0:v,y=e.wrapStyle,h=e.wrapClassName,b=e.wrapProps,N=e.onClose,E=e.afterOpenChange,w=e.afterClose,O=e.transitionName,V=e.animation,P=e.closable,M=P===void 0?!0:P,C=e.mask,_=C===void 0?!0:C,s=e.maskTransitionName,c=e.maskAnimation,L=e.maskClosable,B=L===void 0?!0:L,j=e.maskStyle,$=e.maskProps,U=e.rootClassName,g=e.classNames,k=e.styles,A=n.useRef(),D=n.useRef(),T=n.useRef(),H=n.useState(i),S=F(H,2),W=S[0],K=S[1],oe=me();function le(){J(D.current,document.activeElement)||(A.current=document.activeElement)}function ie(){if(!J(D.current,document.activeElement)){var r;(r=T.current)===null||r===void 0||r.focus()}}function re(r){if(r)ie();else{if(K(!1),_&&A.current&&R){try{A.current.focus({preventScroll:!0})}catch{}A.current=null}W&&(w==null||w())}E==null||E(r)}function X(r){N==null||N(r)}var z=n.useRef(!1),Y=n.useRef(),se=function(){clearTimeout(Y.current),z.current=!0},ce=function(){Y.current=setTimeout(function(){z.current=!1})},G=null;B&&(G=function(q){z.current?z.current=!1:D.current===q.target&&X(q)});function ue(r){if(d&&r.keyCode===Q.ESC){r.stopPropagation(),X(r);return}i&&r.keyCode===Q.TAB&&T.current.changeActive(!r.shiftKey)}return n.useEffect(function(){i&&(K(!0),le())},[i]),n.useEffect(function(){return function(){clearTimeout(Y.current)}},[]),n.createElement("div",I({className:x("".concat(t,"-root"),U)},ve(e,{data:!0})),n.createElement(Ne,{prefixCls:t,visible:_&&i,motionName:Z(t,s,c),style:u(u({zIndex:o},j),k==null?void 0:k.mask),maskProps:$,className:g==null?void 0:g.mask}),n.createElement("div",I({tabIndex:-1,onKeyDown:ue,className:x("".concat(t,"-wrap"),h,g==null?void 0:g.wrapper),ref:D,onClick:G,style:u(u(u({zIndex:o},y),k==null?void 0:k.wrapper),{},{display:W?null:"none"})},b),n.createElement(ne,I({},e,{onMouseDown:se,onMouseUp:ce,ref:T,closable:M,ariaId:oe,prefixCls:t,visible:i&&W,onClose:X,onVisibleChanged:re,motionName:Z(t,O,V)}))))}var Re=function(a){var t=a.visible,o=a.getContainer,l=a.forceRender,i=a.destroyOnClose,m=i===void 0?!1:i,d=a.afterClose,v=a.panelRef,R=n.useState(t),y=F(R,2),h=y[0],b=y[1],N=n.useMemo(function(){return{panel:v}},[v]);return n.useEffect(function(){t&&b(!0)},[t]),!l&&m&&!h?null:n.createElement(ae.Provider,{value:N},n.createElement(fe,{open:t||l||h,autoDestroy:!1,getContainer:o,autoLock:t||h},n.createElement(ge,I({},a,{destroyOnClose:m,afterClose:function(){d==null||d(),b(!1)}}))))};Re.displayName="Dialog";export{Re as D,be as P};

import{c as D,h as aa,a as U,e as wa,b as Na}from"./@babel-d329d0e8.js";import{r as t}from"./react-0dc647d4.js";import{r as Sa}from"./react-dom-6e813590.js";import{c as zr,b as Y,d as $a,u as Ra,r as ua,s as ba,e as Pa,f as Ue,i as ta,h as Ea,j as la,g as na,k as Wa,l as za,m as xa,n as Ba}from"./rc-util-0d114846.js";import{c as Oe}from"./classnames-0ec0b352.js";import{R as Da}from"./rc-resize-observer-869a1ed4.js";import"./react-is-e8e5dbb3.js";import{C as ka}from"./rc-motion-acd4ad74.js";var La=t.createContext(null),sa=[];function Ha(e,a){var r=t.useState(function(){if(!zr())return null;var m=document.createElement("div");return m}),n=D(r,1),i=n[0],l=t.useRef(!1),s=t.useContext(La),f=t.useState(sa),d=D(f,2),h=d[0],k=d[1],g=s||(l.current?void 0:function(m){k(function(S){var E=[m].concat(aa(S));return E})});function P(){i.parentElement||document.body.appendChild(i),l.current=!0}function c(){var m;(m=i.parentElement)===null||m===void 0||m.removeChild(i),l.current=!1}return Y(function(){return e?s?s(P):P():c(),c},[e]),Y(function(){h.length&&(h.forEach(function(m){return m()}),k(sa))},[h]),[i,g]}function Fa(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var _a="rc-util-locker-".concat(Date.now()),va=0;function Va(e){var a=!!e,r=t.useState(function(){return va+=1,"".concat(_a,"_").concat(va)}),n=D(r,1),i=n[0];Y(function(){if(a){var l=$a(),s=Fa();Ra(`
html body {
  overflow-y: hidden;
  `.concat(s?"width: calc(100% - ".concat(l,"px);"):"",`
}`),i)}else ua(i);return function(){ua(i)}},[a,i])}var ca=!1;function Aa(e){return typeof e=="boolean"&&(ca=e),ca}var fa=function(a){return a===!1?!1:!zr()||!a?null:typeof a=="string"?document.querySelector(a):typeof a=="function"?a():a},Ta=t.forwardRef(function(e,a){var r=e.open,n=e.autoLock,i=e.getContainer;e.debug;var l=e.autoDestroy,s=l===void 0?!0:l,f=e.children,d=t.useState(r),h=D(d,2),k=h[0],g=h[1],P=k||r;t.useEffect(function(){(s||r)&&g(r)},[r,s]);var c=t.useState(function(){return fa(i)}),m=D(c,2),S=m[0],E=m[1];t.useEffect(function(){var V=fa(i);E(V??null)});var $=Ha(P&&!S),M=D($,2),b=M[0],u=M[1],z=S??b;Va(n&&r&&zr()&&(z===b||z===document.body));var j=null;if(f&&ba(f)&&a){var I=f;j=I.ref}var X=Pa(j,a);if(!P||!zr()||S===void 0)return null;var ae=z===!1||Aa(),F=f;return a&&(F=t.cloneElement(f,{ref:X})),t.createElement(La.Provider,{value:u},ae?F:Sa.createPortal(F,z))}),da=t.createContext(null);function ha(e){return e?Array.isArray(e)?e:[e]:[]}function Ua(e,a,r,n){return t.useMemo(function(){var i=ha(r??a),l=ha(n??a),s=new Set(i),f=new Set(l);return e&&(s.has("hover")&&(s.delete("hover"),s.add("click")),f.has("hover")&&(f.delete("hover"),f.add("click"))),[s,f]},[e,a,r,n])}function qa(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===a[0]:e[0]===a[0]&&e[1]===a[1]}function Qa(e,a,r,n){for(var i=r.points,l=Object.keys(e),s=0;s<l.length;s+=1){var f,d=l[s];if(qa((f=e[d])===null||f===void 0?void 0:f.points,i,n))return"".concat(a,"-placement-").concat(d)}return""}function ma(e,a,r,n){return a||(r?{motionName:"".concat(e,"-").concat(r)}:n?{motionName:n}:null)}function sr(e){return e.ownerDocument.defaultView}function oa(e){for(var a=[],r=e==null?void 0:e.parentElement,n=["hidden","scroll","clip","auto"];r;){var i=sr(r).getComputedStyle(r),l=i.overflowX,s=i.overflowY,f=i.overflow;[l,s,f].some(function(d){return n.includes(d)})&&a.push(r),r=r.parentElement}return a}function lr(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?a:e}function ur(e){return lr(parseFloat(e),0)}function ga(e,a){var r=U({},e);return(a||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var i=sr(n).getComputedStyle(n),l=i.overflow,s=i.overflowClipMargin,f=i.borderTopWidth,d=i.borderBottomWidth,h=i.borderLeftWidth,k=i.borderRightWidth,g=n.getBoundingClientRect(),P=n.offsetHeight,c=n.clientHeight,m=n.offsetWidth,S=n.clientWidth,E=ur(f),$=ur(d),M=ur(h),b=ur(k),u=lr(Math.round(g.width/m*1e3)/1e3),z=lr(Math.round(g.height/P*1e3)/1e3),j=(m-S-M-b)*u,I=(P-c-E-$)*z,X=E*z,ae=$*z,F=M*u,V=b*u,he=0,me=0;if(l==="clip"){var se=ur(s);he=se*u,me=se*z}var A=g.x+F-he,L=g.y+X-me,C=A+g.width+2*he-F-V-j,J=L+g.height+2*me-X-ae-I;r.left=Math.max(r.left,A),r.top=Math.max(r.top,L),r.right=Math.min(r.right,C),r.bottom=Math.min(r.bottom,J)}}),r}function ya(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(a),n=r.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(r)}function Ca(e,a){var r=a||[],n=D(r,2),i=n[0],l=n[1];return[ya(e.width,i),ya(e.height,l)]}function Ma(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function Xe(e,a){var r=a[0],n=a[1],i,l;return r==="t"?l=e.y:r==="b"?l=e.y+e.height:l=e.y+e.height/2,n==="l"?i=e.x:n==="r"?i=e.x+e.width:i=e.x+e.width/2,{x:i,y:l}}function $e(e,a){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(n,i){return i===a?r[n]||"c":n}).join("")}function ja(e,a,r,n,i,l,s){var f=t.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[n]||{}}),d=D(f,2),h=d[0],k=d[1],g=t.useRef(0),P=t.useMemo(function(){return a?oa(a):[]},[a]),c=t.useRef({}),m=function(){c.current={}};e||m();var S=Ue(function(){if(a&&r&&e){let H=function(Rr,be){var Ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Re,Ye=R.x+Rr,ir=R.y+be,Xr=Ye+oe,Or=ir+B,pr=Math.max(Ye,Ae.left),ea=Math.max(ir,Ae.top),o=Math.min(Xr,Ae.right),v=Math.min(Or,Ae.bottom);return Math.max(0,(o-pr)*(v-ea))},$r=function(){De=R.y+W,Ke=De+B,ke=R.x+y,Be=ke+oe};var M,b,u=a,z=u.ownerDocument,j=sr(u),I=j.getComputedStyle(u),X=I.width,ae=I.height,F=I.position,V=u.style.left,he=u.style.top,me=u.style.right,se=u.style.bottom,A=U(U({},i[n]),l),L=z.createElement("div");(M=u.parentElement)===null||M===void 0||M.appendChild(L),L.style.left="".concat(u.offsetLeft,"px"),L.style.top="".concat(u.offsetTop,"px"),L.style.position=F,L.style.height="".concat(u.offsetHeight,"px"),L.style.width="".concat(u.offsetWidth,"px"),u.style.left="0",u.style.top="0",u.style.right="auto",u.style.bottom="auto";var C;if(Array.isArray(r))C={x:r[0],y:r[1],width:0,height:0};else{var J=r.getBoundingClientRect();C={x:J.x,y:J.y,width:J.width,height:J.height}}var R=u.getBoundingClientRect(),G=z.documentElement,te=G.clientWidth,pe=G.clientHeight,qe=G.scrollWidth,ge=G.scrollHeight,Qe=G.scrollTop,ne=G.scrollLeft,B=R.height,oe=R.width,ie=C.height,ve=C.width,je={left:0,top:0,right:te,bottom:pe},er={left:-ne,top:-Qe,right:qe-ne,bottom:ge-Qe},_=A.htmlRegion,Ie="visible",Pe="visibleFirst";_!=="scroll"&&_!==Pe&&(_=Ie);var K=_===Pe,ye=ga(er,P),w=ga(je,P),Re=_===Ie?w:ye,O=K?w:Re;u.style.left="auto",u.style.top="auto",u.style.right="0",u.style.bottom="0";var vr=u.getBoundingClientRect();u.style.left=V,u.style.top=he,u.style.right=me,u.style.bottom=se,(b=u.parentElement)===null||b===void 0||b.removeChild(L);var Ee=lr(Math.round(oe/parseFloat(X)*1e3)/1e3),We=lr(Math.round(B/parseFloat(ae)*1e3)/1e3);if(Ee===0||We===0||ta(r)&&!Ea(r))return;var cr=A.offset,ue=A.targetOffset,xr=Ca(R,cr),fr=D(xr,2),le=fr[0],p=fr[1],ce=Ca(C,ue),dr=D(ce,2),Br=dr[0],Je=dr[1];C.x-=Br,C.y-=Je;var ee=A.points||[],Ce=D(ee,2),Hr=Ce[0],Fr=Ce[1],Me=Ma(Fr),Z=Ma(Hr),rr=Xe(C,Me),hr=Xe(R,Z),we=U({},A),y=rr.x-hr.x+le,W=rr.y-hr.y+p,q=H(y,W),ze=H(y,W,w),ar=Xe(C,["t","l"]),tr=Xe(R,["t","l"]),re=Xe(C,["b","r"]),mr=Xe(R,["b","r"]),xe=A.overflow||{},nr=xe.adjustX,gr=xe.adjustY,yr=xe.shiftX,or=xe.shiftY,Ge=function(be){return typeof be=="boolean"?be:be>=0},De,Ke,ke,Be;$r();var Cr=Ge(gr),He=Z[0]===Me[0];if(Cr&&Z[0]==="t"&&(Ke>O.bottom||c.current.bt)){var Fe=W;He?Fe-=B-ie:Fe=ar.y-mr.y-p;var Q=H(y,Fe),_r=H(y,Fe,w);Q>q||Q===q&&(!K||_r>=ze)?(c.current.bt=!0,W=Fe,p=-p,we.points=[$e(Z,0),$e(Me,0)]):c.current.bt=!1}if(Cr&&Z[0]==="b"&&(De<O.top||c.current.tb)){var _e=W;He?_e+=B-ie:_e=re.y-tr.y-p;var Mr=H(y,_e),Vr=H(y,_e,w);Mr>q||Mr===q&&(!K||Vr>=ze)?(c.current.tb=!0,W=_e,p=-p,we.points=[$e(Z,0),$e(Me,0)]):c.current.tb=!1}var wr=Ge(nr),Sr=Z[1]===Me[1];if(wr&&Z[1]==="l"&&(Be>O.right||c.current.rl)){var Ve=y;Sr?Ve-=oe-ve:Ve=ar.x-mr.x-le;var br=H(Ve,W),Ar=H(Ve,W,w);br>q||br===q&&(!K||Ar>=ze)?(c.current.rl=!0,y=Ve,le=-le,we.points=[$e(Z,1),$e(Me,1)]):c.current.rl=!1}if(wr&&Z[1]==="r"&&(ke<O.left||c.current.lr)){var fe=y;Sr?fe+=oe-ve:fe=re.x-tr.x-le;var Ze=H(fe,W),Ur=H(fe,W,w);Ze>q||Ze===q&&(!K||Ur>=ze)?(c.current.lr=!0,y=fe,le=-le,we.points=[$e(Z,1),$e(Me,1)]):c.current.lr=!1}$r();var Le=yr===!0?0:yr;typeof Le=="number"&&(ke<w.left&&(y-=ke-w.left-le,C.x+ve<w.left+Le&&(y+=C.x-w.left+ve-Le)),Be>w.right&&(y-=Be-w.right-le,C.x>w.right-Le&&(y+=C.x-w.right+Le)));var de=or===!0?0:or;typeof de=="number"&&(De<w.top&&(W-=De-w.top-p,C.y+ie<w.top+de&&(W+=C.y-w.top+ie-de)),Ke>w.bottom&&(W-=Ke-w.bottom-p,C.y>w.bottom-de&&(W+=C.y-w.bottom+de)));var Se=R.x+y,Pr=Se+oe,Te=R.y+W,Ne=Te+B,Dr=C.x,qr=Dr+ve,kr=C.y,Lr=kr+ie,Qr=Math.max(Se,Dr),jr=Math.min(Pr,qr),Ir=(Qr+jr)/2,Tr=Ir-Se,Jr=Math.max(Te,kr),Gr=Math.min(Ne,Lr),Nr=(Jr+Gr)/2,Kr=Nr-Te;s==null||s(a,we);var Zr=vr.right-R.x-(y+R.width),Yr=vr.bottom-R.y-(W+R.height);k({ready:!0,offsetX:y/Ee,offsetY:W/We,offsetR:Zr/Ee,offsetB:Yr/We,arrowX:Tr/Ee,arrowY:Kr/We,scaleX:Ee,scaleY:We,align:we})}}),E=function(){g.current+=1;var b=g.current;Promise.resolve().then(function(){g.current===b&&S()})},$=function(){k(function(b){return U(U({},b),{},{ready:!1})})};return Y($,[n]),Y(function(){e||$()},[e]),[h.ready,h.offsetX,h.offsetY,h.offsetR,h.offsetB,h.arrowX,h.arrowY,h.scaleX,h.scaleY,h.align,E]}function Ia(e,a,r,n,i){Y(function(){if(e&&a&&r){let g=function(){n(),i()};var l=a,s=r,f=oa(l),d=oa(s),h=sr(s),k=new Set([h].concat(aa(f),aa(d)));return k.forEach(function(P){P.addEventListener("scroll",g,{passive:!0})}),h.addEventListener("resize",g,{passive:!0}),n(),function(){k.forEach(function(P){P.removeEventListener("scroll",g),h.removeEventListener("resize",g)})}}},[e,a,r])}function Ja(e,a,r,n,i,l,s,f){var d=t.useRef(e),h=t.useRef(!1);d.current!==e&&(h.current=!0,d.current=e),t.useEffect(function(){var k=la(function(){h.current=!1});return function(){la.cancel(k)}},[e]),t.useEffect(function(){if(a&&n&&(!i||l)){var k=function(){var j=!1,I=function(F){var V=F.target;j=s(V)},X=function(F){var V=F.target;!h.current&&d.current&&!j&&!s(V)&&f(!1)};return[I,X]},g=k(),P=D(g,2),c=P[0],m=P[1],S=k(),E=D(S,2),$=E[0],M=E[1],b=sr(n);b.addEventListener("mousedown",c,!0),b.addEventListener("click",m,!0),b.addEventListener("contextmenu",m,!0);var u=na(r);return u&&(u.addEventListener("mousedown",$,!0),u.addEventListener("click",M,!0),u.addEventListener("contextmenu",M,!0)),function(){b.removeEventListener("mousedown",c,!0),b.removeEventListener("click",m,!0),b.removeEventListener("contextmenu",m,!0),u&&(u.removeEventListener("mousedown",$,!0),u.removeEventListener("click",M,!0),u.removeEventListener("contextmenu",M,!0))}}},[a,r,n,i,l])}function Ga(e){var a=e.prefixCls,r=e.align,n=e.arrow,i=e.arrowPos,l=n||{},s=l.className,f=l.content,d=i.x,h=d===void 0?0:d,k=i.y,g=k===void 0?0:k,P=t.useRef();if(!r||!r.points)return null;var c={position:"absolute"};if(r.autoArrow!==!1){var m=r.points[0],S=r.points[1],E=m[0],$=m[1],M=S[0],b=S[1];E===M||!["t","b"].includes(E)?c.top=g:E==="t"?c.top=0:c.bottom=0,$===b||!["l","r"].includes($)?c.left=h:$==="l"?c.left=0:c.right=0}return t.createElement("div",{ref:P,className:Oe("".concat(a,"-arrow"),s),style:c},f)}function Ka(e){var a=e.prefixCls,r=e.open,n=e.zIndex,i=e.mask,l=e.motion;return i?t.createElement(ka,wa({},l,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(s){var f=s.className;return t.createElement("div",{style:{zIndex:n},className:Oe("".concat(a,"-mask"),f)})}):null}var Za=t.memo(function(e){var a=e.children;return a},function(e,a){return a.cache}),Ya=t.forwardRef(function(e,a){var r=e.popup,n=e.className,i=e.prefixCls,l=e.style,s=e.target,f=e.onVisibleChanged,d=e.open,h=e.keepDom,k=e.onClick,g=e.mask,P=e.arrow,c=e.arrowPos,m=e.align,S=e.motion,E=e.maskMotion,$=e.forceRender,M=e.getPopupContainer,b=e.autoDestroy,u=e.portal,z=e.zIndex,j=e.onMouseEnter,I=e.onMouseLeave,X=e.onPointerEnter,ae=e.ready,F=e.offsetX,V=e.offsetY,he=e.offsetR,me=e.offsetB,se=e.onAlign,A=e.onPrepare,L=e.stretch,C=e.targetWidth,J=e.targetHeight,R=typeof r=="function"?r():r,G=d||h,te=(M==null?void 0:M.length)>0,pe=t.useState(!M||!te),qe=D(pe,2),ge=qe[0],Qe=qe[1];if(Y(function(){!ge&&te&&s&&Qe(!0)},[ge,te,s]),!ge)return null;var ne="auto",B={left:"-1000vw",top:"-1000vh",right:ne,bottom:ne};if(ae||!d){var oe=m.points,ie=m._experimental,ve=ie==null?void 0:ie.dynamicInset,je=ve&&oe[0][1]==="r",er=ve&&oe[0][0]==="b";je?(B.right=he,B.left=ne):(B.left=F,B.right=ne),er?(B.bottom=me,B.top=ne):(B.top=V,B.bottom=ne)}var _={};return L&&(L.includes("height")&&J?_.height=J:L.includes("minHeight")&&J&&(_.minHeight=J),L.includes("width")&&C?_.width=C:L.includes("minWidth")&&C&&(_.minWidth=C)),d||(_.pointerEvents="none"),t.createElement(u,{open:$||G,getContainer:M&&function(){return M(s)},autoDestroy:b},t.createElement(Ka,{prefixCls:i,open:d,zIndex:z,mask:g,motion:E}),t.createElement(Da,{onResize:se,disabled:!d},function(Ie){return t.createElement(ka,wa({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:$,leavedClassName:"".concat(i,"-hidden")},S,{onAppearPrepare:A,onEnterPrepare:A,visible:d,onVisibleChanged:function(K){var ye;S==null||(ye=S.onVisibleChanged)===null||ye===void 0||ye.call(S,K),f(K)}}),function(Pe,K){var ye=Pe.className,w=Pe.style,Re=Oe(i,ye,n);return t.createElement("div",{ref:Wa(Ie,a,K),className:Re,style:U(U(U(U({"--arrow-x":"".concat(c.x||0,"px"),"--arrow-y":"".concat(c.y||0,"px")},B),_),w),{},{boxSizing:"border-box",zIndex:z},l),onMouseEnter:j,onMouseLeave:I,onPointerEnter:X,onClick:k},P&&t.createElement(Ga,{prefixCls:i,arrow:P,arrowPos:c,align:m}),t.createElement(Za,{cache:!d},R))})}))}),Xa=t.forwardRef(function(e,a){var r=e.children,n=e.getTriggerDOMNode,i=ba(r),l=t.useCallback(function(f){za(a,n?n(f):f)},[n]),s=Pa(l,r.ref);return i?t.cloneElement(r,{ref:s}):r}),Oa=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function pa(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ta,a=t.forwardRef(function(r,n){var i=r.prefixCls,l=i===void 0?"rc-trigger-popup":i,s=r.children,f=r.action,d=f===void 0?"hover":f,h=r.showAction,k=r.hideAction,g=r.popupVisible,P=r.defaultPopupVisible,c=r.onPopupVisibleChange,m=r.afterPopupVisibleChange,S=r.mouseEnterDelay,E=r.mouseLeaveDelay,$=E===void 0?.1:E,M=r.focusDelay,b=r.blurDelay,u=r.mask,z=r.maskClosable,j=z===void 0?!0:z,I=r.getPopupContainer,X=r.forceRender,ae=r.autoDestroy,F=r.destroyPopupOnHide,V=r.popup,he=r.popupClassName,me=r.popupStyle,se=r.popupPlacement,A=r.builtinPlacements,L=A===void 0?{}:A,C=r.popupAlign,J=r.zIndex,R=r.stretch,G=r.getPopupClassNameFromAlign,te=r.alignPoint,pe=r.onPopupClick,qe=r.onPopupAlign,ge=r.arrow,Qe=r.popupMotion,ne=r.maskMotion,B=r.popupTransitionName,oe=r.popupAnimation,ie=r.maskTransitionName,ve=r.maskAnimation,je=r.className,er=r.getTriggerDOMNode,_=Na(r,Oa),Ie=ae||F||!1,Pe=t.useState(!1),K=D(Pe,2),ye=K[0],w=K[1];Y(function(){w(xa())},[]);var Re=t.useRef({}),O=t.useContext(da),vr=t.useMemo(function(){return{registerSubPopup:function(v,T){Re.current[v]=T,O==null||O.registerSubPopup(v,T)}}},[O]),Ee=Ba(),We=t.useState(null),cr=D(We,2),ue=cr[0],xr=cr[1],fr=Ue(function(o){ta(o)&&ue!==o&&xr(o),O==null||O.registerSubPopup(Ee,o)}),le=t.useState(null),p=D(le,2),ce=p[0],dr=p[1],Br=Ue(function(o){ta(o)&&ce!==o&&dr(o)}),Je=t.Children.only(s),ee=(Je==null?void 0:Je.props)||{},Ce={},Hr=Ue(function(o){var v,T,x=ce;return(x==null?void 0:x.contains(o))||((v=na(x))===null||v===void 0?void 0:v.host)===o||o===x||(ue==null?void 0:ue.contains(o))||((T=na(ue))===null||T===void 0?void 0:T.host)===o||o===ue||Object.values(Re.current).some(function(N){return(N==null?void 0:N.contains(o))||o===N})}),Fr=ma(l,Qe,oe,B),Me=ma(l,ne,ve,ie),Z=t.useState(P||!1),rr=D(Z,2),hr=rr[0],we=rr[1],y=g??hr,W=Ue(function(o){g===void 0&&we(o)});Y(function(){we(g||!1)},[g]);var q=t.useRef(y);q.current=y;var ze=Ue(function(o){Sa.flushSync(function(){y!==o&&(W(o),c==null||c(o))})}),ar=t.useRef(),tr=function(){clearTimeout(ar.current)},re=function(v){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;tr(),T===0?ze(v):ar.current=setTimeout(function(){ze(v)},T*1e3)};t.useEffect(function(){return tr},[]);var mr=t.useState(!1),xe=D(mr,2),nr=xe[0],gr=xe[1];Y(function(o){(!o||y)&&gr(!0)},[y]);var yr=t.useState(null),or=D(yr,2),Ge=or[0],De=or[1],Ke=t.useState([0,0]),ke=D(Ke,2),Be=ke[0],Cr=ke[1],He=function(v){Cr([v.clientX,v.clientY])},Fe=ja(y,ue,te?Be:ce,se,L,C,qe),Q=D(Fe,11),_r=Q[0],_e=Q[1],Mr=Q[2],Vr=Q[3],wr=Q[4],Sr=Q[5],Ve=Q[6],br=Q[7],Ar=Q[8],fe=Q[9],Ze=Q[10],Ur=Ua(ye,d,h,k),Le=D(Ur,2),de=Le[0],Se=Le[1],Pr=de.has("click"),Te=Se.has("click")||Se.has("contextMenu"),Ne=Ue(function(){nr||Ze()}),Dr=function(){q.current&&te&&Te&&re(!1)};Ia(y,ce,ue,Ne,Dr),Y(function(){Ne()},[Be,se]),Y(function(){y&&!(L!=null&&L[se])&&Ne()},[JSON.stringify(C)]);var qr=t.useMemo(function(){var o=Qa(L,l,fe,te);return Oe(o,G==null?void 0:G(fe))},[fe,G,L,l,te]);t.useImperativeHandle(n,function(){return{forceAlign:Ne}});var kr=t.useState(0),Lr=D(kr,2),Qr=Lr[0],jr=Lr[1],Ir=t.useState(0),Tr=D(Ir,2),Jr=Tr[0],Gr=Tr[1],Nr=function(){if(R&&ce){var v=ce.getBoundingClientRect();jr(v.width),Gr(v.height)}},Kr=function(){Nr(),Ne()},Zr=function(v){gr(!1),Ze(),m==null||m(v)},Yr=function(){return new Promise(function(v){Nr(),De(function(){return v})})};Y(function(){Ge&&(Ze(),Ge(),De(null))},[Ge]);function H(o,v,T,x){Ce[o]=function(N){var Er;x==null||x(N),re(v,T);for(var ra=arguments.length,ia=new Array(ra>1?ra-1:0),Wr=1;Wr<ra;Wr++)ia[Wr-1]=arguments[Wr];(Er=ee[o])===null||Er===void 0||Er.call.apply(Er,[ee,N].concat(ia))}}(Pr||Te)&&(Ce.onClick=function(o){var v;q.current&&Te?re(!1):!q.current&&Pr&&(He(o),re(!0));for(var T=arguments.length,x=new Array(T>1?T-1:0),N=1;N<T;N++)x[N-1]=arguments[N];(v=ee.onClick)===null||v===void 0||v.call.apply(v,[ee,o].concat(x))}),Ja(y,Te,ce,ue,u,j,Hr,re);var $r=de.has("hover"),Rr=Se.has("hover"),be,Ae;$r&&(H("onMouseEnter",!0,S,function(o){He(o)}),H("onPointerEnter",!0,S,function(o){He(o)}),be=function(){(y||nr)&&re(!0,S)},te&&(Ce.onMouseMove=function(o){var v;(v=ee.onMouseMove)===null||v===void 0||v.call(ee,o)})),Rr&&(H("onMouseLeave",!1,$),H("onPointerLeave",!1,$),Ae=function(){re(!1,$)}),de.has("focus")&&H("onFocus",!0,M),Se.has("focus")&&H("onBlur",!1,b),de.has("contextMenu")&&(Ce.onContextMenu=function(o){var v;q.current&&Se.has("contextMenu")?re(!1):(He(o),re(!0)),o.preventDefault();for(var T=arguments.length,x=new Array(T>1?T-1:0),N=1;N<T;N++)x[N-1]=arguments[N];(v=ee.onContextMenu)===null||v===void 0||v.call.apply(v,[ee,o].concat(x))}),je&&(Ce.className=Oe(ee.className,je));var Ye=U(U({},ee),Ce),ir={},Xr=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Xr.forEach(function(o){_[o]&&(ir[o]=function(){for(var v,T=arguments.length,x=new Array(T),N=0;N<T;N++)x[N]=arguments[N];(v=Ye[o])===null||v===void 0||v.call.apply(v,[Ye].concat(x)),_[o].apply(_,x)})});var Or=t.cloneElement(Je,U(U({},Ye),ir)),pr={x:Sr,y:Ve},ea=ge?U({},ge!==!0?ge:{}):null;return t.createElement(t.Fragment,null,t.createElement(Da,{disabled:!y,ref:Br,onResize:Kr},t.createElement(Xa,{getTriggerDOMNode:er},Or)),t.createElement(da.Provider,{value:vr},t.createElement(Ya,{portal:e,ref:fr,prefixCls:l,popup:V,className:Oe(he,qr),style:me,target:ce,onMouseEnter:be,onMouseLeave:Ae,onPointerEnter:be,zIndex:J,open:y,keepDom:nr,onClick:pe,mask:u,motion:Fr,maskMotion:Me,onVisibleChanged:Zr,onPrepare:Yr,forceRender:X,autoDestroy:Ie,getPopupContainer:I,align:fe,arrow:ea,arrowPos:pr,ready:_r,offsetX:_e,offsetY:Mr,offsetR:Vr,offsetB:wr,onAlign:Ne,stretch:R,targetWidth:Qr/br,targetHeight:Jr/Ar})))});return a}const lt=pa(Ta);export{Ta as P,lt as T};

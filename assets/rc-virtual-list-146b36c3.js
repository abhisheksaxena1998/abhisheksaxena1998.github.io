import{e as he,b as k,g as Je,c as H,_ as Rt,a as pt,d as Ce,h as Mt}from"./@babel-43e769cc.js";import{r as t}from"./react-d998b26c.js";import{r as Ae}from"./react-dom-890fecd1.js";import{c as Me}from"./classnames-325479d5.js";import{R as Qe}from"./rc-resize-observer-ee76393b.js";import{j as X,O as bt,a as Te,f as je}from"./rc-util-6fbd7337.js";import"./react-is-e8e5dbb3.js";var et=t.forwardRef(function(e,f){var r=e.height,o=e.offsetY,m=e.offsetX,n=e.children,l=e.prefixCls,h=e.onInnerResize,g=e.innerProps,S=e.rtl,v=e.extra,u={},c={display:"flex",flexDirection:"column"};if(o!==void 0){var d;u={height:r,position:"relative",overflow:"hidden"},c=he(he({},c),{},(d={transform:"translateY(".concat(o,"px)")},k(d,S?"marginRight":"marginLeft",-m),k(d,"position","absolute"),k(d,"left",0),k(d,"right",0),k(d,"top",0),d))}return t.createElement("div",{style:u},t.createElement(Qe,{onResize:function(s){var p=s.offsetHeight;p&&h&&h()}},t.createElement("div",Je({style:c,className:Me(k({},"".concat(l,"-holder-inner"),l)),ref:f},g),n,v)))});et.displayName="Filler";function Ge(e,f){var r="touches"in e?e.touches[0]:e;return r[f?"pageX":"pageY"]}var Ue=t.forwardRef(function(e,f){var r,o=e.prefixCls,m=e.rtl,n=e.scrollOffset,l=e.scrollRange,h=e.onStartMove,g=e.onStopMove,S=e.onScroll,v=e.horizontal,u=e.spinSize,c=e.containerSize,d=t.useState(!1),M=H(d,2),s=M[0],p=M[1],y=t.useState(null),b=H(y,2),I=b[0],P=b[1],K=t.useState(null),Y=H(K,2),F=Y[0],L=Y[1],$=!m,z=t.useRef(),Z=t.useRef(),x=t.useState(!1),T=H(x,2),A=T[0],q=T[1],ne=t.useRef(),O=function(){clearTimeout(ne.current),q(!0),ne.current=setTimeout(function(){q(!1)},3e3)},G=l-c||0,ae=c-u||0,ge=G>0,W=t.useMemo(function(){if(n===0||G===0)return 0;var D=n/G;return D*ae},[n,G,ae]),ie=function(E){E.stopPropagation(),E.preventDefault()},oe=t.useRef({top:W,dragging:s,pageY:I,startTop:F});oe.current={top:W,dragging:s,pageY:I,startTop:F};var J=function(E){p(!0),P(Ge(E,v)),L(oe.current.top),h(),E.stopPropagation(),E.preventDefault()};t.useEffect(function(){var D=function(ue){ue.preventDefault()},E=z.current,V=Z.current;return E.addEventListener("touchstart",D),V.addEventListener("touchstart",J),function(){E.removeEventListener("touchstart",D),V.removeEventListener("touchstart",J)}},[]);var Se=t.useRef();Se.current=G;var le=t.useRef();le.current=ae,t.useEffect(function(){if(s){var D,E=function(ue){var ce=oe.current,be=ce.dragging,xe=ce.pageY,Q=ce.startTop;if(X.cancel(D),be){var Re=Ge(ue,v)-xe,ee=Q;!$&&v?ee-=Re:ee+=Re;var te=Se.current,pe=le.current,re=pe?ee/pe:0,N=Math.ceil(re*te);N=Math.max(N,0),N=Math.min(N,te),D=X(function(){S(N,v)})}},V=function(){p(!1),g()};return window.addEventListener("mousemove",E),window.addEventListener("touchmove",E),window.addEventListener("mouseup",V),window.addEventListener("touchend",V),function(){window.removeEventListener("mousemove",E),window.removeEventListener("touchmove",E),window.removeEventListener("mouseup",V),window.removeEventListener("touchend",V),X.cancel(D)}}},[s]),t.useEffect(function(){O()},[n]),t.useImperativeHandle(f,function(){return{delayHidden:O}});var B="".concat(o,"-scrollbar"),C={position:"absolute",visibility:A&&ge?null:"hidden"},_={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return v?(C.height=8,C.left=0,C.right=0,C.bottom=0,_.height="100%",_.width=u,$?_.left=W:_.right=W):(C.width=8,C.top=0,C.bottom=0,$?C.right=0:C.left=0,_.width="100%",_.height=u,_.top=W),t.createElement("div",{ref:z,className:Me(B,(r={},k(r,"".concat(B,"-horizontal"),v),k(r,"".concat(B,"-vertical"),!v),k(r,"".concat(B,"-visible"),A),r)),style:C,onMouseDown:ie,onMouseMove:O},t.createElement("div",{ref:Z,className:Me("".concat(B,"-thumb"),k({},"".concat(B,"-thumb-moving"),s)),style:_,onMouseDown:J}))});function xt(e){var f=e.children,r=e.setRef,o=t.useCallback(function(m){r(m)},[]);return t.cloneElement(f,{ref:o})}function Et(e,f,r,o,m,n,l){var h=l.getKey;return e.slice(f,r+1).map(function(g,S){var v=f+S,u=n(g,v,{style:{width:o}}),c=h(g);return t.createElement(xt,{key:c,setRef:function(M){return m(g,M)}},u)})}var yt=function(){function e(){pt(this,e),this.maps=void 0,this.id=0,this.maps=Object.create(null)}return Rt(e,[{key:"set",value:function(r,o){this.maps[r]=o,this.id+=1}},{key:"get",value:function(r){return this.maps[r]}}]),e}();function wt(e,f,r){var o=t.useState(0),m=H(o,2),n=m[0],l=m[1],h=t.useRef(new Map),g=t.useRef(new yt),S=t.useRef();function v(){X.cancel(S.current)}function u(){v(),S.current=X(function(){h.current.forEach(function(d,M){if(d&&d.offsetParent){var s=bt(d),p=s.offsetHeight;g.current.get(M)!==p&&g.current.set(M,s.offsetHeight)}}),l(function(d){return d+1})})}function c(d,M){var s=e(d),p=h.current.get(s);M?(h.current.set(s,M),u()):h.current.delete(s),!p!=!M&&(M?f==null||f(d):r==null||r(d))}return t.useEffect(function(){return v},[]),[c,u,g.current,n]}function zt(e,f,r,o,m,n,l,h){var g=t.useRef();return function(S){if(S==null){h();return}if(X.cancel(g.current),typeof S=="number")l(S);else if(S&&Ce(S)==="object"){var v,u=S.align;"index"in S?v=S.index:v=f.findIndex(function(s){return m(s)===S.key});var c=S.offset,d=c===void 0?0:c,M=function s(p,y){if(!(p<0||!e.current)){var b=e.current.clientHeight,I=!1,P=y;if(b){for(var K=y||u,Y=0,F=0,L=0,$=Math.min(f.length,v),z=0;z<=$;z+=1){var Z=m(f[z]);F=Y;var x=r.get(Z);L=F+(x===void 0?o:x),Y=L,z===v&&x===void 0&&(I=!0)}var T=null;switch(K){case"top":T=F-d;break;case"bottom":T=L-b+d;break;default:{var A=e.current.scrollTop,q=A+b;F<A?P="top":L>q&&(P="bottom")}}T!==null&&T!==e.current.scrollTop&&l(T)}g.current=X(function(){I&&n(),s(p-1,P)},2)}};M(3)}}}function Lt(e,f,r){var o=e.length,m=f.length,n,l;if(o===0&&m===0)return null;o<m?(n=e,l=f):(n=f,l=e);var h={__EMPTY_ITEM__:!0};function g(M){return M!==void 0?r(M):h}for(var S=null,v=Math.abs(o-m)!==1,u=0;u<l.length;u+=1){var c=g(n[u]),d=g(l[u]);if(c!==d){S=u,v=v||c!==g(l[u+1]);break}}return S===null?null:{index:S,multiple:v}}function _t(e,f,r){var o=t.useState(e),m=H(o,2),n=m[0],l=m[1],h=t.useState(null),g=H(h,2),S=g[0],v=g[1];return t.useEffect(function(){var u=Lt(n||[],e||[],f);(u==null?void 0:u.index)!==void 0&&(r==null||r(u.index),v(e[u.index])),l(e)},[e]),[S]}var Ze=(typeof navigator>"u"?"undefined":Ce(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const tt=function(e,f){var r=t.useRef(!1),o=t.useRef(null);function m(){clearTimeout(o.current),r.current=!0,o.current=setTimeout(function(){r.current=!1},50)}var n=t.useRef({top:e,bottom:f});return n.current.top=e,n.current.bottom=f,function(l){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=l<0&&n.current.top||l>0&&n.current.bottom;return h&&g?(clearTimeout(o.current),r.current=!1):(!g||r.current)&&m(),!r.current&&g}};function Ht(e,f,r,o,m){var n=t.useRef(0),l=t.useRef(null),h=t.useRef(null),g=t.useRef(!1),S=tt(f,r);function v(p,y){X.cancel(l.current),n.current+=y,h.current=y,!S(y)&&(Ze||p.preventDefault(),l.current=X(function(){var b=g.current?10:1;m(n.current*b),n.current=0}))}function u(p,y){m(y,!0),Ze||p.preventDefault()}var c=t.useRef(null),d=t.useRef(null);function M(p){if(e){X.cancel(d.current),d.current=X(function(){c.current=null},2);var y=p.deltaX,b=p.deltaY,I=p.shiftKey,P=y,K=b;(c.current==="sx"||!c.current&&I&&b&&!y)&&(P=b,K=0,c.current="sx");var Y=Math.abs(P),F=Math.abs(K);c.current===null&&(c.current=o&&Y>F?"x":"y"),c.current==="y"?v(p,K):u(p,P)}}function s(p){e&&(g.current=p.detail===h.current)}return[M,s]}var Tt=14/15;function Ct(e,f,r){var o=t.useRef(!1),m=t.useRef(0),n=t.useRef(null),l=t.useRef(null),h,g=function(c){if(o.current){var d=Math.ceil(c.touches[0].pageY),M=m.current-d;m.current=d,r(M)&&c.preventDefault(),clearInterval(l.current),l.current=setInterval(function(){M*=Tt,(!r(M,!0)||Math.abs(M)<=.1)&&clearInterval(l.current)},16)}},S=function(){o.current=!1,h()},v=function(c){h(),c.touches.length===1&&!o.current&&(o.current=!0,m.current=Math.ceil(c.touches[0].pageY),n.current=c.target,n.current.addEventListener("touchmove",g),n.current.addEventListener("touchend",S))};h=function(){n.current&&(n.current.removeEventListener("touchmove",g),n.current.removeEventListener("touchend",S))},Te(function(){return e&&f.current.addEventListener("touchstart",v),function(){var u;(u=f.current)===null||u===void 0||u.removeEventListener("touchstart",v),h(),clearInterval(l.current)}},[e])}var Dt=20;function qe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=e/f*100;return isNaN(r)&&(r=0),r=Math.max(r,Dt),r=Math.min(r,e/2),Math.floor(r)}function It(e,f,r,o){var m=t.useMemo(function(){return[new Map,[]]},[e,r.id,o]),n=H(m,2),l=n[0],h=n[1],g=function(v){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v,c=l.get(v),d=l.get(u);if(c===void 0||d===void 0)for(var M=e.length,s=h.length;s<M;s+=1){var p,y=e[s],b=f(y);l.set(b,s);var I=(p=r.get(b))!==null&&p!==void 0?p:o;if(h[s]=(h[s-1]||0)+I,b===v&&(c=s),b===u&&(d=s),c!==void 0&&d!==void 0)break}return{top:h[c-1]||0,bottom:h[d]}};return g}var Pt=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender"],Ot=[],Nt={overflowY:"auto",overflowAnchor:"none"};function kt(e,f){var r=e.prefixCls,o=r===void 0?"rc-virtual-list":r,m=e.className,n=e.height,l=e.itemHeight,h=e.fullHeight,g=h===void 0?!0:h,S=e.style,v=e.data,u=e.children,c=e.itemKey,d=e.virtual,M=e.direction,s=e.scrollWidth,p=e.component,y=p===void 0?"div":p,b=e.onScroll,I=e.onVirtualScroll,P=e.onVisibleChange,K=e.innerProps,Y=e.extraRender,F=Mt(e,Pt),L=!!(d!==!1&&n&&l),$=L&&v&&(l*v.length>n||!!s),z=M==="rtl",Z=Me(o,k({},"".concat(o,"-rtl"),z),m),x=v||Ot,T=t.useRef(),A=t.useRef(),q=t.useState(0),ne=H(q,2),O=ne[0],G=ne[1],ae=t.useState(0),ge=H(ae,2),W=ge[0],ie=ge[1],oe=t.useState(!1),J=H(oe,2),Se=J[0],le=J[1],B=function(){le(!0)},C=function(){le(!1)},_=t.useCallback(function(a){return typeof c=="function"?c(a):a==null?void 0:a[c]},[c]),D={getKey:_};function E(a){G(function(i){var R;typeof a=="function"?R=a(i):R=a;var w=lt(R);return T.current.scrollTop=w,w})}var V=t.useRef({start:0,end:x.length}),me=t.useRef(),ue=_t(x,_),ce=H(ue,1),be=ce[0];me.current=be;var xe=wt(_,null,null),Q=H(xe,4),Re=Q[0],ee=Q[1],te=Q[2],pe=Q[3],re=t.useMemo(function(){if(!L)return{scrollHeight:void 0,start:0,end:x.length-1,offset:void 0};if(!$){var a;return{scrollHeight:((a=A.current)===null||a===void 0?void 0:a.offsetHeight)||0,start:0,end:x.length-1,offset:void 0}}for(var i=0,R,w,j,gt=x.length,de=0;de<gt;de+=1){var St=x[de],mt=_(St),Be=te.get(mt),He=i+(Be===void 0?l:Be);He>=O&&R===void 0&&(R=de,w=i),He>O+n&&j===void 0&&(j=de),i=He}return R===void 0&&(R=0,w=0,j=Math.ceil(n/l)),j===void 0&&(j=x.length-1),j=Math.min(j+1,x.length-1),{scrollHeight:i,start:R,end:j,offset:w}},[$,L,O,x,pe,n]),N=re.scrollHeight,fe=re.start,se=re.end,De=re.offset;V.current.start=fe,V.current.end=se;var rt=t.useState({width:0,height:n}),Ie=H(rt,2),U=Ie[0],nt=Ie[1],at=function(i){nt(i)},Pe=t.useRef(),Oe=t.useRef(),it=t.useMemo(function(){return qe(U.width,s)},[U.width,s]),ot=t.useMemo(function(){return qe(U.height,N)},[U.height,N]),Ee=N-n,ye=t.useRef(Ee);ye.current=Ee;function lt(a){var i=a;return Number.isNaN(ye.current)||(i=Math.min(i,ye.current)),i=Math.max(i,0),i}var Ne=O<=0,ke=O>=Ee,ut=tt(Ne,ke),we=function(){return{x:z?-W:W,y:O}},ze=t.useRef(we()),Le=je(function(){if(I){var a=we();(ze.current.x!==a.x||ze.current.y!==a.y)&&(I(a),ze.current=a)}});function Ye(a,i){var R=a;i?(Ae.flushSync(function(){ie(R)}),Le()):E(R)}function ct(a){var i=a.currentTarget.scrollTop;i!==O&&E(i),b==null||b(a),Le()}var Fe=function(i){var R=i,w=s-U.width;return R=Math.max(R,0),R=Math.min(R,w),R},ft=je(function(a,i){i?(Ae.flushSync(function(){ie(function(R){var w=R+(z?-a:a);return Fe(w)})}),Le()):E(function(R){var w=R+a;return w})}),st=Ht(L,Ne,ke,!!s,ft),$e=H(st,2),_e=$e[0],We=$e[1];Ct(L,T,function(a,i){return ut(a,i)?!1:(_e({preventDefault:function(){},deltaY:a}),!0)}),Te(function(){function a(R){L&&R.preventDefault()}var i=T.current;return i.addEventListener("wheel",_e),i.addEventListener("DOMMouseScroll",We),i.addEventListener("MozMousePixelScroll",a),function(){i.removeEventListener("wheel",_e),i.removeEventListener("DOMMouseScroll",We),i.removeEventListener("MozMousePixelScroll",a)}},[L]);var Xe=function(){var i,R;(i=Pe.current)===null||i===void 0||i.delayHidden(),(R=Oe.current)===null||R===void 0||R.delayHidden()},Ve=zt(T,x,te,l,_,ee,E,Xe);t.useImperativeHandle(f,function(){return{getScrollInfo:we,scrollTo:function(i){function R(w){return w&&Ce(w)==="object"&&("left"in w||"top"in w)}R(i)?(i.left!==void 0&&ie(Fe(i.left)),Ve(i.top)):Ve(i)}}}),Te(function(){if(P){var a=x.slice(fe,se+1);P(a,x)}},[fe,se,x]);var vt=It(x,_,te,l),dt=Y==null?void 0:Y({start:fe,end:se,virtual:$,offsetX:W,offsetY:De,rtl:z,getSize:vt}),ht=Et(x,fe,se,s,Re,u,D),ve=null;n&&(ve=he(k({},g?"height":"maxHeight",n),Nt),L&&(ve.overflowY="hidden",s&&(ve.overflowX="hidden"),Se&&(ve.pointerEvents="none")));var Ke={};return z&&(Ke.dir="rtl"),t.createElement("div",Je({style:he(he({},S),{},{position:"relative"}),className:Z},Ke,F),t.createElement(Qe,{onResize:at},t.createElement(y,{className:"".concat(o,"-holder"),style:ve,ref:T,onScroll:ct,onMouseEnter:Xe},t.createElement(et,{prefixCls:o,height:N,offsetX:W,offsetY:De,scrollWidth:s,onInnerResize:ee,ref:A,innerProps:K,rtl:z,extra:dt},ht))),$&&N>n&&t.createElement(Ue,{ref:Pe,prefixCls:o,scrollOffset:O,scrollRange:N,rtl:z,onScroll:Ye,onStartMove:B,onStopMove:C,spinSize:ot,containerSize:U.height}),$&&s&&t.createElement(Ue,{ref:Oe,prefixCls:o,scrollOffset:W,scrollRange:s,rtl:z,onScroll:Ye,onStartMove:B,onStopMove:C,spinSize:it,containerSize:U.width,horizontal:!0}))}var Yt=t.forwardRef(kt);Yt.displayName="List";export{Yt as L};
